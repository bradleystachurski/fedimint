test run 1
./scripts/tests/test-ci-all.sh
Pre-building workspace...
    Finished dev [unoptimized + debuginfo] target(s) in 0.24s
Pre-building tests...
    Finished test [unoptimized + debuginfo] target(s) in 0.22s
## Starting all tests in parallel...
## START: always_success_test
## COMPLETE: always_success_test
## START: lightning_reconnect_test
00:00:00 Setting up env variables in /tmp/nix-shell.mCrVBQ/nix-shell.bWG9jl/fm-Qd2S
00:00:00     Finished dev [unoptimized + debuginfo] target(s) in 0.28s
00:00:00 2023-09-24T05:36:49.696165Z  INFO devimint: Test setup in "/tmp/nix-shell.mCrVBQ/nix-shell.bWG9jl/fm-Qd2S/cfg"
00:00:00 2023-09-24T05:36:49.697660Z  WARN devimint: Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:03 2023-09-24T05:36:52.667436Z  INFO devimint: electrs started
00:00:03 2023-09-24T05:36:52.668542Z  INFO devimint: esplora started
00:00:03 2023-09-24T05:36:52.668602Z  INFO devimint::federation: fedimintd-0 started
00:00:03 2023-09-24T05:36:52.676569Z  INFO devimint::federation: fedimintd-3 started
00:00:03 2023-09-24T05:36:52.678208Z  INFO devimint::federation: fedimintd-1 started
00:00:03 2023-09-24T05:36:52.684562Z  INFO devimint::federation: fedimintd-2 started
00:00:03 2023-09-24T05:36:52.698338Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:04 2023-09-24T05:36:53.703076Z  INFO devimint::federation: Connected to 0
00:00:04 2023-09-24T05:36:53.704888Z  INFO devimint::federation: Connected to 1
00:00:04 2023-09-24T05:36:53.706497Z  INFO devimint::federation: Connected to 2
00:00:04 2023-09-24T05:36:53.708007Z  INFO devimint::federation: Connected to 3
00:00:04 2023-09-24T05:36:53.716237Z  INFO devimint::federation: calling set_config_gen_connections for 1 random-y4eH91
00:00:04 2023-09-24T05:36:53.723890Z  INFO devimint::federation: calling set_config_gen_connections for 2 random-jHj7B2
00:00:04 2023-09-24T05:36:53.731178Z  INFO devimint::federation: calling set_config_gen_connections for 3 random-EegPP3
00:00:04 2023-09-24T05:36:53.758890Z  INFO devimint::federation: Running DKG...
00:00:06 2023-09-24T05:36:55.798559Z  INFO devimint::federation: DKG successfully complete. Starting consensus...
00:00:06 2023-09-24T05:36:55.804975Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:06 2023-09-24T05:36:55.805252Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:06 2023-09-24T05:36:55.805516Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:07 2023-09-24T05:36:56.825155Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:07 2023-09-24T05:36:56.825553Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:07 2023-09-24T05:36:56.825939Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:08 2023-09-24T05:36:57.148618Z  INFO devimint: lightning started
00:00:08 2023-09-24T05:36:57.185798Z  INFO devimint: block sync done
00:00:08 2023-09-24T05:36:57.216204Z  INFO devimint: Sending funds from bitcoind amount=100000000 addr="bcrt1qpd4z759nlkhyw5uy9kp99gc5jglw5zchrxkynd"
00:00:08 2023-09-24T05:36:57.278793Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:08 2023-09-24T05:36:57.790495Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:08 2023-09-24T05:36:57.978196Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:08 2023-09-24T05:36:57.978448Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:08 2023-09-24T05:36:57.979208Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:09 2023-09-24T05:36:58.992919Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:09 2023-09-24T05:36:58.993190Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:09 2023-09-24T05:36:58.993453Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:10 2023-09-24T05:36:59.191888Z  INFO devimint: gateways started
00:00:10 2023-09-24T05:36:59.997722Z  INFO devimint::federation: Consensus is running
00:00:10 2023-09-24T05:36:59.998060Z  INFO devimint::federation: copied client configs
00:00:10 2023-09-24T05:36:59.998092Z  INFO devimint: federation and gateways started
00:00:10 2023-09-24T05:36:59.998771Z  INFO devimint: Joining federation with the main client
00:00:13 2023-09-24T05:37:02.540162Z  INFO devimint: Generating first epoch
00:00:13 2023-09-24T05:37:02.579688Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:14 2023-09-24T05:37:03.182049Z  INFO devimint: await gateways registered
00:00:14 2023-09-24T05:37:03.364319Z  INFO devimint: gateways registered
00:00:14 2023-09-24T05:37:03.603595Z  INFO devimint::federation: Using cln gateway
00:00:14 2023-09-24T05:37:03.603645Z  INFO devimint: starting dev federation took 13.907331243s
00:00:14 2023-09-24T05:37:03.603682Z  INFO devimint: Pegging-in both gateways
00:00:14 2023-09-24T05:37:03.603705Z  INFO devimint::federation: Pegging-in gateway funds amount=99999
00:00:14 2023-09-24T05:37:03.651515Z  INFO devimint: Sending funds from bitcoind amount=99999 addr="bcrt1qzp9r24sghu8ugxsccyfwtwep4fewc6yzs8ffyqag9vta952ta6uqh6d0gp"
00:00:14 2023-09-24T05:37:03.676581Z  INFO devimint: Mining bitcoin blocks block_num=21
00:00:26 2023-09-24T05:37:15.958258Z  INFO devimint::federation: Pegging-in gateway funds amount=99999
00:00:26 2023-09-24T05:37:15.997557Z  INFO devimint: Sending funds from bitcoind amount=99999 addr="bcrt1q0eld37paap7r2ceh3z39netrmf3qd6e9ggzgt6vnac9208d5eursqnqldu"
00:00:27 2023-09-24T05:37:16.033518Z  INFO devimint: Mining bitcoin blocks block_num=21
00:00:33 2023-09-24T05:37:22.745711Z  INFO devimint: Stopping all lightning nodes
00:00:33 2023-09-24T05:37:22.828727Z  INFO devimint: Stopping lightning node
00:00:33 2023-09-24T05:37:22.833457Z  INFO devimint: sending SIGTERM to lightningd and waiting for it to exit
00:00:33 2023-09-24T05:37:22.911325Z  INFO devimint: Stopping lightning node
00:00:33 2023-09-24T05:37:22.911380Z  INFO devimint: sending SIGTERM to lnd and waiting for it to exit
00:00:33 2023-09-24T05:37:22.966694Z  INFO devimint: Restarting both lightning nodes...
00:00:34 2023-09-24T05:37:23.383637Z  INFO devimint::external: lnd_connect failed: ConnectError { internal: Connect { address: "http://localhost:11009", error: tonic::transport::Error(Transport, hyper::Error(Connect, ConnectError("tcp connect error", Os { code: 111, kind: ConnectionRefused, message: "Connection refused" }))) } }
00:00:34 2023-09-24T05:37:23.395376Z  INFO devimint::external: lnd_connect failed: ConnectError { internal: Connect { address: "http://localhost:11009", error: tonic::transport::Error(Transport, hyper::Error(Connect, ConnectError("tcp connect error", Os { code: 111, kind: ConnectionRefused, message: "Connection refused" }))) } }
00:00:36 2023-09-24T05:37:25.021468Z  INFO devimint: Retrying info...
00:00:40 2023-09-24T05:37:29.361411Z  INFO devimint::federation: Using cln gateway
00:00:40 2023-09-24T05:37:29.361464Z  INFO devimint: Creating invoice....
00:00:44 2023-09-24T05:37:33.250658Z  INFO devimint: sending SIGKILL to gatewayd-cln and waiting for it to exit
00:00:44 2023-09-24T05:37:33.779488Z  INFO devimint::federation: Using lnd gateway
00:00:44 2023-09-24T05:37:33.779630Z  INFO devimint: Creating invoice....
00:00:49 2023-09-24T05:37:38.392706Z  INFO devimint: sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:00:49 2023-09-24T05:37:38.400555Z  INFO devimint: lightning_reconnect_test: success
00:00:49 2023-09-24T05:37:38.400627Z  INFO devimint: sending SIGKILL to lnd and waiting for it to exit
00:00:49 2023-09-24T05:37:38.409638Z  INFO devimint: sending SIGTERM to lightningd and waiting for it to exit
00:00:49 2023-09-24T05:37:38.412299Z  INFO devimint: sending SIGKILL to faucet and waiting for it to exit
00:00:49 2023-09-24T05:37:38.413580Z  INFO devimint: sending SIGKILL to esplora and waiting for it to exit
00:00:49 2023-09-24T05:37:38.417223Z  INFO devimint: sending SIGKILL to electrs and waiting for it to exit
00:00:49 2023-09-24T05:37:38.421006Z  INFO devimint: sending SIGKILL to fedimintd-0 and waiting for it to exit
00:00:49 2023-09-24T05:37:38.435854Z  INFO devimint: sending SIGKILL to fedimintd-1 and waiting for it to exit
00:00:49 2023-09-24T05:37:38.447835Z  INFO devimint: sending SIGKILL to fedimintd-2 and waiting for it to exit
00:00:49 2023-09-24T05:37:38.456370Z  INFO devimint: sending SIGKILL to fedimintd-3 and waiting for it to exit
00:00:49 2023-09-24T05:37:38.468172Z  INFO devimint: sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: lightning_reconnect_test
## START: gateway_reboot_test
00:00:00 Setting up env variables in /tmp/nix-shell.mCrVBQ/nix-shell.bWG9jl/fm-rig4
00:00:01     Finished dev [unoptimized + debuginfo] target(s) in 0.59s
00:00:01 2023-09-24T05:36:55.375475Z  INFO devimint: Test setup in "/tmp/nix-shell.mCrVBQ/nix-shell.bWG9jl/fm-rig4/cfg"
00:00:01 2023-09-24T05:36:55.376651Z  WARN devimint: Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:05 2023-09-24T05:36:59.531473Z  INFO devimint: electrs started
00:00:05 2023-09-24T05:36:59.536137Z  INFO devimint: esplora started
00:00:05 2023-09-24T05:36:59.536227Z  INFO devimint::federation: fedimintd-0 started
00:00:05 2023-09-24T05:36:59.541510Z  INFO devimint::federation: fedimintd-1 started
00:00:05 2023-09-24T05:36:59.542245Z  INFO devimint::federation: fedimintd-2 started
00:00:05 2023-09-24T05:36:59.543142Z  INFO devimint::federation: fedimintd-3 started
00:00:05 2023-09-24T05:36:59.546137Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:06 2023-09-24T05:37:00.549784Z  INFO devimint::federation: Connected to 0
00:00:06 2023-09-24T05:37:00.551522Z  INFO devimint::federation: Connected to 1
00:00:06 2023-09-24T05:37:00.553164Z  INFO devimint::federation: Connected to 2
00:00:06 2023-09-24T05:37:00.554677Z  INFO devimint::federation: Connected to 3
00:00:06 2023-09-24T05:37:00.562817Z  INFO devimint::federation: calling set_config_gen_connections for 1 random-5Cz4H1
00:00:06 2023-09-24T05:37:00.570977Z  INFO devimint::federation: calling set_config_gen_connections for 2 random-V3Qj32
00:00:06 2023-09-24T05:37:00.578716Z  INFO devimint::federation: calling set_config_gen_connections for 3 random-BHCYb3
00:00:06 2023-09-24T05:37:00.608587Z  INFO devimint::federation: Running DKG...
00:00:09 2023-09-24T05:37:03.656634Z  INFO devimint::federation: DKG successfully complete. Starting consensus...
00:00:09 2023-09-24T05:37:03.669149Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:09 2023-09-24T05:37:03.997479Z  INFO devimint: lightning started
00:00:10 2023-09-24T05:37:04.700665Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:10 2023-09-24T05:37:04.701617Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:10 2023-09-24T05:37:04.701914Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:11 2023-09-24T05:37:05.223517Z  INFO devimint: block sync done
00:00:11 2023-09-24T05:37:05.229053Z  INFO devimint: Sending funds from bitcoind amount=100000000 addr="bcrt1qxk00wwxe7qxrxxfwk6gs9e7g63walgr25g0wv2"
00:00:11 2023-09-24T05:37:05.241512Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:11 2023-09-24T05:37:05.780370Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:12 2023-09-24T05:37:06.784487Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:12 2023-09-24T05:37:06.945263Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:13 2023-09-24T05:37:07.515970Z  WARN devimint::external: Empty chan info edge=ChannelEdge { channel_id: 123145302376449, chan_point: "3d5074de47b368f0d3805f56e817bc1a07f9ff9e368b255e6573453f65a1dec9:1", last_update: 1695533827, node1_pub: "030c631e6dcb529221617bc55838e768cf50c81430c2f821f03fdd54c7d50fdb04", node2_pub: "03b32bf4a9511d37b6efbdddba3a201c09def7c0c9a9ce37fc1d35b52f3e1156db", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1695533827 }) }
00:00:13 2023-09-24T05:37:07.796755Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:13 2023-09-24T05:37:07.797167Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:13 2023-09-24T05:37:07.797445Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:14 2023-09-24T05:37:08.327829Z  WARN devimint::external: Empty chan info edge=ChannelEdge { channel_id: 123145302376449, chan_point: "3d5074de47b368f0d3805f56e817bc1a07f9ff9e368b255e6573453f65a1dec9:1", last_update: 1695533827, node1_pub: "030c631e6dcb529221617bc55838e768cf50c81430c2f821f03fdd54c7d50fdb04", node2_pub: "03b32bf4a9511d37b6efbdddba3a201c09def7c0c9a9ce37fc1d35b52f3e1156db", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1695533827 }) }
00:00:14 2023-09-24T05:37:08.807516Z  INFO devimint::federation: Consensus is running
00:00:14 2023-09-24T05:37:08.809939Z  INFO devimint::federation: copied client configs
00:00:15 2023-09-24T05:37:09.538902Z  INFO devimint: gateways started
00:00:15 2023-09-24T05:37:09.538947Z  INFO devimint: federation and gateways started
00:00:15 2023-09-24T05:37:09.556191Z  INFO devimint: Joining federation with the main client
00:00:16 2023-09-24T05:37:10.177580Z  INFO devimint: Generating first epoch
00:00:16 2023-09-24T05:37:10.214287Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:17 2023-09-24T05:37:11.610785Z  INFO devimint: await gateways registered
00:00:18 2023-09-24T05:37:12.384881Z  INFO devimint: gateways registered
00:00:18 2023-09-24T05:37:12.920849Z  INFO devimint::federation: Using cln gateway
00:00:18 2023-09-24T05:37:12.920886Z  INFO devimint: starting dev federation took 17.54527194s
00:00:18 2023-09-24T05:37:12.980219Z  INFO devimint: sending SIGKILL to gatewayd-cln and waiting for it to exit
00:00:18 2023-09-24T05:37:12.987907Z  INFO devimint: sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:00:45 2023-09-24T05:37:39.089732Z  INFO devimint: CLN Gateway restarted, with auto-rejoin to federation
00:00:45 2023-09-24T05:37:39.120165Z  INFO devimint: LND Gateway restarted, with auto-rejoin to federation
00:00:45 2023-09-24T05:37:39.120245Z  INFO devimint: gateway_reboot_test: success LOG_DEVIMINT="devimint"
00:00:45 2023-09-24T05:37:39.120278Z  INFO devimint: sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:00:45 2023-09-24T05:37:39.126453Z  INFO devimint: sending SIGKILL to gatewayd-cln and waiting for it to exit
00:00:45 2023-09-24T05:37:39.131904Z  INFO devimint: sending SIGKILL to faucet and waiting for it to exit
00:00:45 2023-09-24T05:37:39.132747Z  INFO devimint: sending SIGKILL to esplora and waiting for it to exit
00:00:45 2023-09-24T05:37:39.134101Z  INFO devimint: sending SIGKILL to electrs and waiting for it to exit
00:00:45 2023-09-24T05:37:39.135065Z  INFO devimint: sending SIGKILL to fedimintd-0 and waiting for it to exit
00:00:45 2023-09-24T05:37:39.139584Z  INFO devimint: sending SIGKILL to fedimintd-1 and waiting for it to exit
00:00:45 2023-09-24T05:37:39.143515Z  INFO devimint: sending SIGKILL to fedimintd-2 and waiting for it to exit
00:00:45 2023-09-24T05:37:39.147128Z  INFO devimint: sending SIGKILL to fedimintd-3 and waiting for it to exit
00:00:45 2023-09-24T05:37:39.150695Z  INFO devimint: sending SIGKILL to lnd and waiting for it to exit
00:00:45 2023-09-24T05:37:39.156628Z  INFO devimint: sending SIGTERM to lightningd and waiting for it to exit
00:00:45 2023-09-24T05:37:39.157401Z  INFO devimint: sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: gateway_reboot_test
## START: load_test_tool_test
00:00:00 Setting up env variables in /tmp/nix-shell.mCrVBQ/nix-shell.bWG9jl/fm-YCjH
00:00:00     Finished dev [unoptimized + debuginfo] target(s) in 0.33s
00:00:00 2023-09-24T05:37:05.428313Z  INFO devimint: Test setup in "/tmp/nix-shell.mCrVBQ/nix-shell.bWG9jl/fm-YCjH/cfg"
00:00:00 2023-09-24T05:37:05.429878Z  WARN devimint: Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:03 2023-09-24T05:37:08.650547Z  INFO devimint: electrs started
00:00:03 2023-09-24T05:37:08.651619Z  INFO devimint: esplora started
00:00:03 2023-09-24T05:37:08.651666Z  INFO devimint::federation: fedimintd-0 started
00:00:03 2023-09-24T05:37:08.676302Z  INFO devimint::federation: fedimintd-2 started
00:00:03 2023-09-24T05:37:08.679929Z  INFO devimint::federation: fedimintd-3 started
00:00:03 2023-09-24T05:37:08.688816Z  INFO devimint::federation: fedimintd-1 started
00:00:03 2023-09-24T05:37:08.694824Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:04 2023-09-24T05:37:09.710593Z  INFO devimint::federation: Connected to 0
00:00:04 2023-09-24T05:37:09.721337Z  INFO devimint::federation: Connected to 1
00:00:04 2023-09-24T05:37:09.740315Z  INFO devimint::federation: Connected to 2
00:00:04 2023-09-24T05:37:09.747263Z  INFO devimint::federation: Connected to 3
00:00:04 2023-09-24T05:37:09.788167Z  INFO devimint::federation: calling set_config_gen_connections for 1 random-xjOPI1
00:00:04 2023-09-24T05:37:09.800528Z  INFO devimint::federation: calling set_config_gen_connections for 2 random-zeOQX2
00:00:04 2023-09-24T05:37:09.831381Z  INFO devimint::federation: calling set_config_gen_connections for 3 random-PG4fc3
00:00:04 2023-09-24T05:37:09.877026Z  INFO devimint::federation: Running DKG...
00:00:09 2023-09-24T05:37:14.039329Z  INFO devimint::federation: DKG successfully complete. Starting consensus...
00:00:09 2023-09-24T05:37:14.047766Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:09 2023-09-24T05:37:14.048203Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:09 2023-09-24T05:37:14.048588Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:10 2023-09-24T05:37:15.100120Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:10 2023-09-24T05:37:15.152877Z  INFO devimint: lightning started
00:00:10 2023-09-24T05:37:15.598634Z  INFO devimint: block sync done
00:00:10 2023-09-24T05:37:15.615991Z  INFO devimint: Sending funds from bitcoind amount=100000000 addr="bcrt1q8aat69plpzvhr5cd0j4sx96rkv9xf7zsj9uwud"
00:00:10 2023-09-24T05:37:15.632494Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:10 2023-09-24T05:37:15.901680Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:11 2023-09-24T05:37:16.113973Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:11 2023-09-24T05:37:16.114832Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:11 2023-09-24T05:37:16.115132Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:12 2023-09-24T05:37:17.144163Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:12 2023-09-24T05:37:17.211182Z  INFO devimint: gateways started
00:00:13 2023-09-24T05:37:18.138408Z  INFO devimint::federation: Consensus is running
00:00:13 2023-09-24T05:37:18.138847Z  INFO devimint::federation: copied client configs
00:00:13 2023-09-24T05:37:18.138883Z  INFO devimint: federation and gateways started
00:00:13 2023-09-24T05:37:18.139607Z  INFO devimint: Joining federation with the main client
00:00:15 2023-09-24T05:37:20.434226Z  INFO devimint: Generating first epoch
00:00:15 2023-09-24T05:37:20.471073Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:16 2023-09-24T05:37:21.252048Z  INFO devimint: await gateways registered
00:00:16 2023-09-24T05:37:21.486900Z  INFO devimint: gateways registered
00:00:16 2023-09-24T05:37:21.762556Z  INFO devimint::federation: Using cln gateway
00:00:16 2023-09-24T05:37:21.762619Z  INFO devimint: starting dev federation took 16.334135627s
00:00:16 2023-09-24T05:37:21.762658Z  INFO devimint::federation: Peg-in amount=10000
00:00:16 2023-09-24T05:37:21.972591Z  INFO devimint: Sending funds from bitcoind amount=10000 addr="bcrt1qkxhvq6jffl0m4yj84ua9t58l5uv8vzkvas2xke0jmmk7rlm33lqsp285am"
00:00:17 2023-09-24T05:37:22.020136Z  INFO devimint: Mining bitcoin blocks block_num=21
00:00:33 1 gateway_pay_invoice: avg 4.112932399s, median 4.112932399s, max 4.112932399s, min 4.112932399s
00:00:33 2 reissue_notes: avg 2.474872659s, median 2.628988959s, max 2.628988959s, min 2.320756359s
00:00:43 1 gateway_pay_invoice: avg 3.253907983s, median 3.253907983s, max 3.253907983s, min 3.253907983s (compared to previous: avg: -20.89%, median: -20.89%, max: -20.89%, min: -20.89%)
00:00:43 2 reissue_notes: avg 2.035912455s, median 2.159050366s, max 2.159050366s, min 1.912774544s (compared to previous: avg: -17.74%, median: -17.85%, max: -17.85%, min: -17.59%)
00:00:43 2023-09-24T05:37:48.445148Z  INFO devimint: sending SIGKILL to fedimintd-0 and waiting for it to exit
00:00:43 2023-09-24T05:37:48.450554Z  INFO devimint: sending SIGKILL to fedimintd-1 and waiting for it to exit
00:00:43 2023-09-24T05:37:48.457269Z  INFO devimint: sending SIGKILL to fedimintd-2 and waiting for it to exit
00:00:43 2023-09-24T05:37:48.462437Z  INFO devimint: sending SIGKILL to fedimintd-3 and waiting for it to exit
00:00:43 2023-09-24T05:37:48.469148Z  INFO devimint: sending SIGKILL to gatewayd-cln and waiting for it to exit
00:00:43 2023-09-24T05:37:48.486437Z  INFO devimint: sending SIGTERM to lightningd and waiting for it to exit
00:00:43 2023-09-24T05:37:48.488409Z  INFO devimint: sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:00:43 2023-09-24T05:37:48.501421Z  INFO devimint: sending SIGKILL to lnd and waiting for it to exit
00:00:43 2023-09-24T05:37:48.504235Z  INFO devimint: sending SIGKILL to electrs and waiting for it to exit
00:00:43 2023-09-24T05:37:48.505494Z  INFO devimint: sending SIGKILL to esplora and waiting for it to exit
00:00:43 2023-09-24T05:37:48.506775Z  INFO devimint: sending SIGKILL to bitcoind and waiting for it to exit
00:00:43 2023-09-24T05:37:48.511285Z  INFO devimint: sending SIGKILL to faucet and waiting for it to exit
## COMPLETE: load_test_tool_test
## START: devimint_cli_test
00:00:00 Setting up env variables in /tmp/nix-shell.mCrVBQ/nix-shell.bWG9jl/fm-fPIV
00:00:01     Finished dev [unoptimized + debuginfo] target(s) in 0.33s
00:00:01 2023-09-24T05:37:00.086648Z  INFO devimint: Test setup in "/tmp/nix-shell.mCrVBQ/nix-shell.bWG9jl/fm-fPIV/cfg"
00:00:01 2023-09-24T05:37:00.087748Z  WARN devimint: Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:05 2023-09-24T05:37:04.431828Z  INFO devimint: electrs started
00:00:05 2023-09-24T05:37:04.432959Z  INFO devimint: esplora started
00:00:05 2023-09-24T05:37:04.433009Z  INFO devimint::federation: fedimintd-2 started
00:00:05 2023-09-24T05:37:04.440357Z  INFO devimint::federation: fedimintd-0 started
00:00:05 2023-09-24T05:37:04.442268Z  INFO devimint::federation: fedimintd-3 started
00:00:05 2023-09-24T05:37:04.451829Z  INFO devimint::federation: fedimintd-1 started
00:00:05 2023-09-24T05:37:04.453065Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:06 2023-09-24T05:37:05.456728Z  INFO devimint::federation: Connected to 0
00:00:06 2023-09-24T05:37:05.458250Z  INFO devimint::federation: Connected to 1
00:00:06 2023-09-24T05:37:05.459763Z  INFO devimint::federation: Connected to 2
00:00:06 2023-09-24T05:37:05.461257Z  INFO devimint::federation: Connected to 3
00:00:06 2023-09-24T05:37:05.469593Z  INFO devimint::federation: calling set_config_gen_connections for 1 random-uImSP1
00:00:06 2023-09-24T05:37:05.477163Z  INFO devimint::federation: calling set_config_gen_connections for 2 random-AdUbo2
00:00:06 2023-09-24T05:37:05.483828Z  INFO devimint::federation: calling set_config_gen_connections for 3 random-KUA6M3
00:00:06 2023-09-24T05:37:05.511334Z  INFO devimint::federation: Running DKG...
00:00:08 2023-09-24T05:37:07.780294Z  INFO devimint::federation: DKG successfully complete. Starting consensus...
00:00:08 2023-09-24T05:37:07.787386Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:08 2023-09-24T05:37:07.787641Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:08 2023-09-24T05:37:07.787896Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:09 2023-09-24T05:37:08.801215Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:09 2023-09-24T05:37:08.805098Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:09 2023-09-24T05:37:08.909250Z  INFO devimint: lightning started
00:00:10 2023-09-24T05:37:09.421569Z  INFO devimint: block sync done
00:00:10 2023-09-24T05:37:09.429992Z  INFO devimint: Sending funds from bitcoind amount=100000000 addr="bcrt1qzpwhncf8na4ru9jyqwdkj28u2zpx9d4qzenma9"
00:00:10 2023-09-24T05:37:09.457588Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:10 2023-09-24T05:37:09.835919Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:10 2023-09-24T05:37:09.836767Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:10 2023-09-24T05:37:09.837136Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:11 2023-09-24T05:37:10.840471Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:12 2023-09-24T05:37:11.345668Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:12 2023-09-24T05:37:11.915330Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:12 2023-09-24T05:37:11.916600Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:12 2023-09-24T05:37:11.917192Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:13 2023-09-24T05:37:12.920430Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:14 2023-09-24T05:37:13.044962Z  INFO devimint: gateways started
00:00:14 2023-09-24T05:37:13.923368Z  INFO devimint::federation: Consensus is running
00:00:14 2023-09-24T05:37:13.923714Z  INFO devimint::federation: copied client configs
00:00:14 2023-09-24T05:37:13.923740Z  INFO devimint: federation and gateways started
00:00:14 2023-09-24T05:37:13.928438Z  INFO devimint: Joining federation with the main client
00:00:15 2023-09-24T05:37:14.313212Z  INFO devimint: Generating first epoch
00:00:15 2023-09-24T05:37:14.343583Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:15 2023-09-24T05:37:14.994821Z  INFO devimint: await gateways registered
00:00:16 2023-09-24T05:37:15.296351Z  INFO devimint: gateways registered
00:00:16 2023-09-24T05:37:15.575032Z  INFO devimint::federation: Using cln gateway
00:00:16 2023-09-24T05:37:15.575083Z  INFO devimint: starting dev federation took 15.488314628s
00:00:16 2023-09-24T05:37:15.651120Z  INFO devimint: Testing load last epoch with admin client
00:00:17 2023-09-24T05:37:16.040349Z  INFO devimint::federation: Pegging-in gateway funds amount=99999
00:00:17 2023-09-24T05:37:16.089655Z  INFO devimint: Sending funds from bitcoind amount=99999 addr="bcrt1qu5e6ww6q7apsq7mg62972y87wtgtz7k0sx86jkrz8zw2lr8f56xqsgqkvq"
00:00:17 2023-09-24T05:37:16.111950Z  INFO devimint: Mining bitcoin blocks block_num=21
00:00:26 2023-09-24T05:37:25.292222Z  INFO devimint: Testing LND can pay CLN directly
00:00:26 2023-09-24T05:37:25.647424Z  INFO devimint: Testing CLN can pay LND directly
00:00:27 2023-09-24T05:37:26.224297Z  INFO devimint: Testing Client
00:00:27 2023-09-24T05:37:26.224337Z  INFO devimint: Testing reissuing e-cash
00:00:27 2023-09-24T05:37:26.420478Z  INFO devimint::federation: Peg-in amount=420
00:00:27 2023-09-24T05:37:26.559904Z  INFO devimint: Sending funds from bitcoind amount=420 addr="bcrt1q2ew2h20mmq7wv88dx7qs76kyfy053gqmsljgknefrf8gp7yk4naqecay4l"
00:00:27 2023-09-24T05:37:26.575017Z  INFO devimint: Mining bitcoin blocks block_num=21
00:00:33 2023-09-24T05:37:32.630887Z  INFO devimint: Testing backup&restore
00:00:40 2023-09-24T05:37:39.417213Z  INFO devimint: Testing spending from client
00:00:43 2023-09-24T05:37:42.372362Z  INFO devimint: Testing reissuing e-cash after spending
00:00:46 2023-09-24T05:37:45.090387Z  INFO devimint: Testing reissuing e-cash via module commands
00:00:48 2023-09-24T05:37:47.533036Z  INFO devimint: Testing fedimint-cli pays LND via CLN gateway
00:00:48 2023-09-24T05:37:47.789746Z  INFO devimint::federation: Using cln gateway
00:00:55 2023-09-24T05:37:54.766947Z  INFO devimint: Testing receiving e-cash notes
00:00:58 2023-09-24T05:37:57.410363Z  INFO devimint: Testing LND gateway
00:00:58 2023-09-24T05:37:57.589341Z  INFO devimint::federation: Using lnd gateway
00:00:58 2023-09-24T05:37:57.589394Z  INFO devimint: Testing outgoing payment from client to CLN via LND gateway
00:01:02 2023-09-24T05:38:01.388048Z  INFO devimint: Testing incoming payment from CLN to client via LND gateway
00:01:06 2023-09-24T05:38:05.464475Z  INFO devimint: Testing receiving ecash notes
00:01:09 2023-09-24T05:38:08.006061Z  INFO devimint: Testing client deposit
00:01:09 2023-09-24T05:38:08.154965Z  INFO devimint::federation: Peg-in amount=100000
00:01:09 2023-09-24T05:38:08.289855Z  INFO devimint: Sending funds from bitcoind amount=100000 addr="bcrt1qxaxu3tljk5csr4wm63505277atmhq4z9qe98ghk9nj59ecsggrpqrhkyhx"
00:01:09 2023-09-24T05:38:08.305731Z  INFO devimint: Mining bitcoin blocks block_num=21
00:01:14 2023-09-24T05:38:13.270797Z  INFO devimint: Testing client withdraw
00:01:16 2023-09-24T05:38:15.463299Z  INFO devimint: sending SIGKILL to faucet and waiting for it to exit
00:01:16 2023-09-24T05:38:15.464227Z  INFO devimint: sending SIGKILL to esplora and waiting for it to exit
00:01:16 2023-09-24T05:38:15.465499Z  INFO devimint: sending SIGKILL to electrs and waiting for it to exit
00:01:16 2023-09-24T05:38:15.466449Z  INFO devimint: sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:01:16 2023-09-24T05:38:15.472173Z  INFO devimint: sending SIGKILL to gatewayd-cln and waiting for it to exit
00:01:16 2023-09-24T05:38:15.476776Z  INFO devimint: sending SIGKILL to fedimintd-0 and waiting for it to exit
00:01:16 2023-09-24T05:38:15.481478Z  INFO devimint: sending SIGKILL to fedimintd-1 and waiting for it to exit
00:01:16 2023-09-24T05:38:15.485380Z  INFO devimint: sending SIGKILL to fedimintd-2 and waiting for it to exit
00:01:16 2023-09-24T05:38:15.489606Z  INFO devimint: sending SIGKILL to fedimintd-3 and waiting for it to exit
00:01:16 2023-09-24T05:38:15.493608Z  INFO devimint: sending SIGKILL to lnd and waiting for it to exit
00:01:16 2023-09-24T05:38:15.499805Z  INFO devimint: sending SIGTERM to lightningd and waiting for it to exit
00:01:16 2023-09-24T05:38:15.500736Z  INFO devimint: sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: devimint_cli_test
## START: latency_test
00:00:00 Setting up env variables in /tmp/nix-shell.mCrVBQ/nix-shell.bWG9jl/fm-rrEP
00:00:00     Finished dev [unoptimized + debuginfo] target(s) in 0.22s
00:00:00 2023-09-24T05:36:38.639140Z  INFO devimint: Test setup in "/tmp/nix-shell.mCrVBQ/nix-shell.bWG9jl/fm-rrEP/cfg"
00:00:00 2023-09-24T05:36:38.640310Z  WARN devimint: Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:03 2023-09-24T05:36:41.232320Z  INFO devimint: electrs started
00:00:03 2023-09-24T05:36:41.233107Z  INFO devimint: esplora started
00:00:03 2023-09-24T05:36:41.233146Z  INFO devimint::federation: fedimintd-3 started
00:00:03 2023-09-24T05:36:41.236319Z  INFO devimint::federation: fedimintd-0 started
00:00:03 2023-09-24T05:36:41.236988Z  INFO devimint::federation: fedimintd-1 started
00:00:03 2023-09-24T05:36:41.238525Z  INFO devimint::federation: fedimintd-2 started
00:00:03 2023-09-24T05:36:41.239527Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:04 2023-09-24T05:36:42.243441Z  INFO devimint::federation: Connected to 0
00:00:04 2023-09-24T05:36:42.245357Z  INFO devimint::federation: Connected to 1
00:00:04 2023-09-24T05:36:42.247004Z  INFO devimint::federation: Connected to 2
00:00:04 2023-09-24T05:36:42.248582Z  INFO devimint::federation: Connected to 3
00:00:04 2023-09-24T05:36:42.256704Z  INFO devimint::federation: calling set_config_gen_connections for 1 random-tk1UB1
00:00:04 2023-09-24T05:36:42.263954Z  INFO devimint::federation: calling set_config_gen_connections for 2 random-90anI2
00:00:04 2023-09-24T05:36:42.271688Z  INFO devimint::federation: calling set_config_gen_connections for 3 random-r6HZb3
00:00:04 2023-09-24T05:36:42.298594Z  INFO devimint::federation: Running DKG...
00:00:06 2023-09-24T05:36:44.466813Z  INFO devimint::federation: DKG successfully complete. Starting consensus...
00:00:06 2023-09-24T05:36:44.473355Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:06 2023-09-24T05:36:44.473626Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:06 2023-09-24T05:36:44.473892Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:07 2023-09-24T05:36:45.485480Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:07 2023-09-24T05:36:45.485693Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:07 2023-09-24T05:36:45.485927Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:07 2023-09-24T05:36:45.686255Z  INFO devimint: lightning started
00:00:07 2023-09-24T05:36:45.689327Z  INFO devimint: block sync done
00:00:07 2023-09-24T05:36:45.699392Z  INFO devimint: Sending funds from bitcoind amount=100000000 addr="bcrt1qe0q89gjjalh7td5n2yh0v79h7a54t3wv7zvqcf"
00:00:07 2023-09-24T05:36:45.718136Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:07 2023-09-24T05:36:45.993260Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:08 2023-09-24T05:36:46.495940Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:08 2023-09-24T05:36:46.496209Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:08 2023-09-24T05:36:46.496430Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:09 2023-09-24T05:36:47.312349Z  INFO devimint: gateways started
00:00:09 2023-09-24T05:36:47.509054Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:09 2023-09-24T05:36:47.509344Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:09 2023-09-24T05:36:47.509721Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:10 2023-09-24T05:36:48.520855Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:11 2023-09-24T05:36:49.526152Z  INFO devimint::federation: Consensus is running
00:00:11 2023-09-24T05:36:49.526506Z  INFO devimint::federation: copied client configs
00:00:11 2023-09-24T05:36:49.526533Z  INFO devimint: federation and gateways started
00:00:11 2023-09-24T05:36:49.534450Z  INFO devimint: Joining federation with the main client
00:00:13 2023-09-24T05:36:51.024187Z  INFO devimint: Generating first epoch
00:00:13 2023-09-24T05:36:51.052972Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:13 2023-09-24T05:36:51.424341Z  INFO devimint: await gateways registered
00:00:13 2023-09-24T05:36:51.605459Z  INFO devimint: gateways registered
00:00:13 2023-09-24T05:36:51.844602Z  INFO devimint::federation: Using cln gateway
00:00:13 2023-09-24T05:36:51.844648Z  INFO devimint: starting dev federation took 13.205390365s
00:00:13 2023-09-24T05:36:51.844670Z  INFO devimint::federation: Peg-in amount=10000000
00:00:14 2023-09-24T05:36:52.006700Z  INFO devimint: Sending funds from bitcoind amount=10000000 addr="bcrt1qa9wreeuw3khfvrsvn02hfgh3nq2rww8elx08fhm33hkasaju2lcqwa3luh"
00:00:14 2023-09-24T05:36:52.026718Z  INFO devimint: Mining bitcoin blocks block_num=21
00:02:07 ================= RESULTS ==================
00:02:07 AVG REISSUE TIME: 3.045
00:02:07 AVG LN SEND TIME: 3.967
00:02:07 AVG LN RECV TIME: 3.546
00:02:07 2023-09-24T05:38:45.015151Z  INFO devimint: sending SIGKILL to faucet and waiting for it to exit
00:02:07 2023-09-24T05:38:45.016170Z  INFO devimint: sending SIGKILL to esplora and waiting for it to exit
00:02:07 2023-09-24T05:38:45.017408Z  INFO devimint: sending SIGKILL to electrs and waiting for it to exit
00:02:07 2023-09-24T05:38:45.018353Z  INFO devimint: sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:02:07 2023-09-24T05:38:45.029576Z  INFO devimint: sending SIGKILL to gatewayd-cln and waiting for it to exit
00:02:07 2023-09-24T05:38:45.036922Z  INFO devimint: sending SIGKILL to fedimintd-0 and waiting for it to exit
00:02:07 2023-09-24T05:38:45.043244Z  INFO devimint: sending SIGKILL to fedimintd-1 and waiting for it to exit
00:02:07 2023-09-24T05:38:45.049486Z  INFO devimint: sending SIGKILL to fedimintd-2 and waiting for it to exit
00:02:07 2023-09-24T05:38:45.058698Z  INFO devimint: sending SIGKILL to fedimintd-3 and waiting for it to exit
00:02:07 2023-09-24T05:38:45.064980Z  INFO devimint: sending SIGKILL to lnd and waiting for it to exit
00:02:07 2023-09-24T05:38:45.071805Z  INFO devimint: sending SIGTERM to lightningd and waiting for it to exit
00:02:07 2023-09-24T05:38:45.072723Z  INFO devimint: sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: latency_test
## START: reconnect_test
00:00:00 Setting up env variables in /tmp/nix-shell.mCrVBQ/nix-shell.bWG9jl/fm-7ysA
00:00:00     Finished dev [unoptimized + debuginfo] target(s) in 0.30s
00:00:01 2023-09-24T05:36:44.019720Z  INFO devimint: Test setup in "/tmp/nix-shell.mCrVBQ/nix-shell.bWG9jl/fm-7ysA/cfg"
00:00:01 2023-09-24T05:36:44.021002Z  WARN devimint: Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:03 2023-09-24T05:36:46.660148Z  INFO devimint: electrs started
00:00:03 2023-09-24T05:36:46.661114Z  INFO devimint: esplora started
00:00:03 2023-09-24T05:36:46.661154Z  INFO devimint::federation: fedimintd-1 started
00:00:03 2023-09-24T05:36:46.663494Z  INFO devimint::federation: fedimintd-3 started
00:00:03 2023-09-24T05:36:46.664082Z  INFO devimint::federation: fedimintd-2 started
00:00:03 2023-09-24T05:36:46.664628Z  INFO devimint::federation: fedimintd-0 started
00:00:03 2023-09-24T05:36:46.668386Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:04 2023-09-24T05:36:47.672485Z  INFO devimint::federation: Connected to 0
00:00:04 2023-09-24T05:36:47.674310Z  INFO devimint::federation: Connected to 1
00:00:04 2023-09-24T05:36:47.676281Z  INFO devimint::federation: Connected to 2
00:00:04 2023-09-24T05:36:47.678099Z  INFO devimint::federation: Connected to 3
00:00:04 2023-09-24T05:36:47.687073Z  INFO devimint::federation: calling set_config_gen_connections for 1 random-2Wvap1
00:00:04 2023-09-24T05:36:47.695433Z  INFO devimint::federation: calling set_config_gen_connections for 2 random-56JEe2
00:00:04 2023-09-24T05:36:47.703004Z  INFO devimint::federation: calling set_config_gen_connections for 3 random-OlmnR3
00:00:04 2023-09-24T05:36:47.731642Z  INFO devimint::federation: Running DKG...
00:00:06 2023-09-24T05:36:49.982589Z  INFO devimint::federation: DKG successfully complete. Starting consensus...
00:00:06 2023-09-24T05:36:49.991508Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:06 2023-09-24T05:36:49.991782Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:06 2023-09-24T05:36:49.992054Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:08 2023-09-24T05:36:51.005667Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: i/o error: Transport endpoint is not connected (os error 107)
00:00:08 2023-09-24T05:36:51.005924Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:08 2023-09-24T05:36:51.115973Z  INFO devimint: lightning started
00:00:08 2023-09-24T05:36:51.540083Z  INFO devimint: block sync done
00:00:08 2023-09-24T05:36:51.552250Z  INFO devimint: Sending funds from bitcoind amount=100000000 addr="bcrt1qphxssddmjplt4ta3qzlchq4fa5g6jlaelkttf3"
00:00:08 2023-09-24T05:36:51.575369Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:09 2023-09-24T05:36:52.017165Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:09 2023-09-24T05:36:52.017390Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:09 2023-09-24T05:36:52.017719Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:10 2023-09-24T05:36:53.010428Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:10 2023-09-24T05:36:53.122466Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:10 2023-09-24T05:36:53.122860Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:10 2023-09-24T05:36:53.123131Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:10 2023-09-24T05:36:53.530663Z  WARN devimint::external: Getting chan info failed e=status: Unknown, message: "edge not found", details: [], metadata: MetadataMap { headers: {"content-type": "application/grpc"} }
00:00:11 2023-09-24T05:36:54.128924Z  INFO devimint::federation: Consensus is running
00:00:11 2023-09-24T05:36:54.132191Z  INFO devimint::federation: copied client configs
00:00:11 2023-09-24T05:36:54.376532Z  INFO devimint: gateways started
00:00:11 2023-09-24T05:36:54.376577Z  INFO devimint: federation and gateways started
00:00:11 2023-09-24T05:36:54.408508Z  INFO devimint: Joining federation with the main client
00:00:13 2023-09-24T05:36:56.410037Z  INFO devimint: Generating first epoch
00:00:13 2023-09-24T05:36:56.433022Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:13 2023-09-24T05:36:56.770995Z  INFO devimint: await gateways registered
00:00:13 2023-09-24T05:36:56.980783Z  INFO devimint: gateways registered
00:00:14 2023-09-24T05:36:57.282745Z  INFO devimint::federation: Using cln gateway
00:00:14 2023-09-24T05:36:57.282874Z  INFO devimint: starting dev federation took 13.263022083s
00:00:14 2023-09-24T05:36:57.282909Z  INFO devimint: Mining bitcoin blocks block_num=110
00:00:17 2023-09-24T05:37:00.043464Z  INFO devimint: sending SIGTERM to fedimintd-0 and waiting for it to exit
00:00:52 2023-09-24T05:37:35.163679Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:53 2023-09-24T05:37:36.276315Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:54 2023-09-24T05:37:37.529045Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:55 2023-09-24T05:37:38.586696Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:56 2023-09-24T05:37:39.645971Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:57 2023-09-24T05:37:40.781578Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:58 2023-09-24T05:37:41.989220Z  INFO devimint: Mining bitcoin blocks block_num=10
00:01:00 2023-09-24T05:37:43.145962Z  INFO devimint: Mining bitcoin blocks block_num=10
00:01:01 2023-09-24T05:37:44.246416Z  INFO devimint: Mining bitcoin blocks block_num=10
00:01:02 2023-09-24T05:37:45.396810Z  INFO devimint: Mining bitcoin blocks block_num=10
00:01:03 2023-09-24T05:37:46.567120Z  INFO devimint::federation: fedimintd-0 started
00:01:03 2023-09-24T05:37:46.581939Z  INFO devimint: Mining bitcoin blocks block_num=10
00:01:04 2023-09-24T05:37:47.346849Z  INFO devimint: Mining bitcoin blocks block_num=10
00:01:04 2023-09-24T05:37:47.770044Z  INFO devimint: Mining bitcoin blocks block_num=10
00:01:05 2023-09-24T05:37:48.163333Z  INFO devimint: Mining bitcoin blocks block_num=10
00:01:05 2023-09-24T05:37:48.494635Z  INFO devimint: Mining bitcoin blocks block_num=10
00:01:05 2023-09-24T05:37:48.856822Z  INFO devimint: Mining bitcoin blocks block_num=10
00:01:06 2023-09-24T05:37:49.246749Z  INFO devimint: Mining bitcoin blocks block_num=10
00:01:06 2023-09-24T05:37:49.649937Z  INFO devimint: Mining bitcoin blocks block_num=10
00:01:07 2023-09-24T05:37:50.752947Z  INFO devimint: Mining bitcoin blocks block_num=10
00:01:08 2023-09-24T05:37:51.944121Z  INFO devimint: Mining bitcoin blocks block_num=10
00:01:09 2023-09-24T05:37:52.469814Z  INFO devimint: Server 0 successfully rejoined!
00:01:09 2023-09-24T05:37:52.469857Z  INFO devimint: Mining bitcoin blocks block_num=100
00:01:10 2023-09-24T05:37:53.878024Z  INFO devimint: sending SIGTERM to fedimintd-1 and waiting for it to exit
00:01:33 2023-09-24T05:38:16.493807Z  INFO devimint: Mining bitcoin blocks block_num=100
00:01:35 2023-09-24T05:38:18.126958Z  INFO devimint: sending SIGTERM to fedimintd-2 and waiting for it to exit
00:01:56 2023-09-24T05:38:39.931842Z  INFO devimint: sending SIGTERM to fedimintd-3 and waiting for it to exit
00:02:17 2023-09-24T05:39:00.692351Z  INFO devimint::federation: fedimintd-1 started
00:02:17 2023-09-24T05:39:00.692901Z  INFO devimint::federation: fedimintd-2 started
00:02:17 2023-09-24T05:39:00.693251Z  INFO devimint::federation: fedimintd-3 started
00:02:26 2023-09-24T05:39:09.257520Z  INFO devimint: fm success: reconnect-test
00:02:26 2023-09-24T05:39:09.257577Z  INFO devimint: sending SIGKILL to faucet and waiting for it to exit
00:02:26 2023-09-24T05:39:09.258530Z  INFO devimint: sending SIGKILL to esplora and waiting for it to exit
00:02:26 2023-09-24T05:39:09.260815Z  INFO devimint: sending SIGKILL to electrs and waiting for it to exit
00:02:26 2023-09-24T05:39:09.261947Z  INFO devimint: sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:02:26 2023-09-24T05:39:09.272216Z  INFO devimint: sending SIGKILL to gatewayd-cln and waiting for it to exit
00:02:26 2023-09-24T05:39:09.283098Z  INFO devimint: sending SIGKILL to fedimintd-0 and waiting for it to exit
00:02:26 2023-09-24T05:39:09.289679Z  INFO devimint: sending SIGKILL to fedimintd-1 and waiting for it to exit
00:02:26 2023-09-24T05:39:09.295619Z  INFO devimint: sending SIGKILL to fedimintd-2 and waiting for it to exit
00:02:26 2023-09-24T05:39:09.302946Z  INFO devimint: sending SIGKILL to fedimintd-3 and waiting for it to exit
00:02:26 2023-09-24T05:39:09.308296Z  INFO devimint: sending SIGKILL to lnd and waiting for it to exit
00:02:26 2023-09-24T05:39:09.315006Z  INFO devimint: sending SIGTERM to lightningd and waiting for it to exit
00:02:26 2023-09-24T05:39:09.316042Z  INFO devimint: sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: reconnect_test
## START: backend_test_electrs
00:00:00 Setting up env variables in /tmp/nix-shell.mCrVBQ/nix-shell.bWG9jl/fm-qv0T
00:00:00     Finished dev [unoptimized + debuginfo] target(s) in 0.24s
00:00:00 ### Setting up tests
00:00:00 2023-09-24T05:36:28.599216Z  INFO devimint: Test setup in "/tmp/nix-shell.mCrVBQ/nix-shell.bWG9jl/fm-qv0T/cfg"
00:00:00 2023-09-24T05:36:28.600275Z  WARN devimint: Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:03 2023-09-24T05:36:31.024356Z  INFO devimint: electrs started
00:00:03 2023-09-24T05:36:31.025233Z  INFO devimint: esplora started
00:00:06 2023-09-24T05:36:34.290299Z  INFO devimint: block sync done
00:00:06 2023-09-24T05:36:34.305807Z  INFO devimint: Sending funds from bitcoind amount=100000000 addr="bcrt1qzaxhk6658wz6x6058fz6w02lsmlnjna6mz56s0"
00:00:06 2023-09-24T05:36:34.320186Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:06 2023-09-24T05:36:34.905879Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:08 2023-09-24T05:36:36.222707Z  WARN devimint::external: Empty chan info edge=ChannelEdge { channel_id: 123145302376449, chan_point: "d236557a71123123700d14735420a41b6159d69ed33b913f4ba2f100aef08ab3:1", last_update: 1695533796, node1_pub: "030915f58675a6a3c03712e8a2866b275303c1c31b1ff0d4a917db59717f96d3a5", node2_pub: "03774b2b9b35111ff6aa1f5a1e14cd280a9356e66f4b7d6a9cff3e2357f1bc4df7", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1695533796 }) }
00:00:09 2023-09-24T05:36:37.426564Z  WARN devimint::external: Empty chan info edge=ChannelEdge { channel_id: 123145302376449, chan_point: "d236557a71123123700d14735420a41b6159d69ed33b913f4ba2f100aef08ab3:1", last_update: 1695533796, node1_pub: "030915f58675a6a3c03712e8a2866b275303c1c31b1ff0d4a917db59717f96d3a5", node2_pub: "03774b2b9b35111ff6aa1f5a1e14cd280a9356e66f4b7d6a9cff3e2357f1bc4df7", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1695533796 }) }
00:00:11 2023-09-24T05:36:39.048660Z  INFO devimint: starting base daemons took 10.449305257s
00:00:11 ### Setting up tests - complete
00:00:11 ### Testing against electrs
00:00:12     Finished test [unoptimized + debuginfo] target(s) in 0.24s
00:00:12     Starting 6 tests across 52 binaries
00:01:12         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests on_chain_peg_in_and_peg_out_happy_case
00:01:12         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:01:12         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_out_fail_refund
00:01:12         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_must_wait_for_available_utxos
00:01:12         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_support_rbf
00:01:12         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests sanity_check_bitcoin_blocks
00:01:23         PASS [  71.741s] fedimint-wallet-tests::fedimint_wallet_tests peg_out_fail_refund
00:01:37         PASS [  85.270s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_must_wait_for_available_utxos
00:01:45         PASS [  93.520s] fedimint-wallet-tests::fedimint_wallet_tests on_chain_peg_in_and_peg_out_happy_case
00:01:49         PASS [  97.084s] fedimint-wallet-tests::fedimint_wallet_tests sanity_check_bitcoin_blocks
00:01:59         PASS [ 107.483s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_support_rbf
00:02:12         SLOW [>120.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:03:12         SLOW [>180.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:04:12         SLOW [>240.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:05:12         SLOW [>300.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:06:12         SLOW [>360.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:06:42         PASS [ 390.440s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:06:42 ------------
00:06:42      Summary [ 390.440s] 6 tests run: 6 passed (6 slow), 0 skipped
00:06:42 ### Testing against electrs - complete
00:06:42 fm success: rust-tests
00:06:42 Auto-killing external-daemons(PID: 39097) and waiting it to finish...
00:06:42 2023-09-24T05:43:10.591435Z  INFO task: signal received, starting graceful shutdown
00:06:42 2023-09-24T05:43:10.595011Z  INFO devimint: sending SIGTERM to lightningd and waiting for it to exit
00:06:42 2023-09-24T05:43:10.596308Z  INFO devimint: sending SIGKILL to lnd and waiting for it to exit
00:06:42 2023-09-24T05:43:10.599410Z  INFO devimint: sending SIGKILL to electrs and waiting for it to exit
00:06:42 2023-09-24T05:43:10.601029Z  INFO devimint: sending SIGKILL to esplora and waiting for it to exit
00:06:42 2023-09-24T05:43:10.602518Z  INFO devimint: sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: backend_test_electrs
## START: backend_test_esplora
00:00:00 Setting up env variables in /tmp/nix-shell.mCrVBQ/nix-shell.bWG9jl/fm-4mjc
00:00:00     Finished dev [unoptimized + debuginfo] target(s) in 0.22s
00:00:00 ### Setting up tests
00:00:00 2023-09-24T05:36:33.607542Z  INFO devimint: Test setup in "/tmp/nix-shell.mCrVBQ/nix-shell.bWG9jl/fm-4mjc/cfg"
00:00:00 2023-09-24T05:36:33.608600Z  WARN devimint: Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:03 2023-09-24T05:36:36.018320Z  INFO devimint: electrs started
00:00:03 2023-09-24T05:36:36.019347Z  INFO devimint: esplora started
00:00:06 2023-09-24T05:36:39.277426Z  INFO devimint: block sync done
00:00:06 2023-09-24T05:36:39.280595Z  INFO devimint: Sending funds from bitcoind amount=100000000 addr="bcrt1qwz42uv6asws34ush0sljzcmm3wfvrmj2vjmyv9"
00:00:06 2023-09-24T05:36:39.290997Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:06 2023-09-24T05:36:39.868135Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:08 2023-09-24T05:36:41.175413Z  WARN devimint::external: Empty chan info edge=ChannelEdge { channel_id: 123145302376448, chan_point: "80b6c3c255c67f93e9d37193ea4e1d167a1bceb20344c23705dd00dc18affdad:0", last_update: 1695533801, node1_pub: "02c02aa524919dfdcb827e6c76228fde59b6e9a9d81a59359473a84b1e326a1c47", node2_pub: "03bd3c96d5bdebb1ed9c816694ec8cb5f6c7bef64ebe95184e75faa16665819e37", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1695533801 }) }
00:00:09 2023-09-24T05:36:42.420375Z  WARN devimint::external: Empty chan info edge=ChannelEdge { channel_id: 123145302376448, chan_point: "80b6c3c255c67f93e9d37193ea4e1d167a1bceb20344c23705dd00dc18affdad:0", last_update: 1695533801, node1_pub: "02c02aa524919dfdcb827e6c76228fde59b6e9a9d81a59359473a84b1e326a1c47", node2_pub: "03bd3c96d5bdebb1ed9c816694ec8cb5f6c7bef64ebe95184e75faa16665819e37", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1695533801 }) }
00:00:11 2023-09-24T05:36:44.027725Z  INFO devimint: starting base daemons took 10.420050486s
00:00:11 ### Setting up tests - complete
00:00:11 ### Testing against esplora
00:00:12     Finished test [unoptimized + debuginfo] target(s) in 0.27s
00:00:12     Starting 6 tests across 52 binaries
00:01:12         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests on_chain_peg_in_and_peg_out_happy_case
00:01:12         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:01:12         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_out_fail_refund
00:01:12         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_must_wait_for_available_utxos
00:01:12         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_support_rbf
00:01:12         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests sanity_check_bitcoin_blocks
00:02:12         SLOW [>120.000s] fedimint-wallet-tests::fedimint_wallet_tests on_chain_peg_in_and_peg_out_happy_case
00:02:12         SLOW [>120.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:02:12         SLOW [>120.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_out_fail_refund
00:02:12         SLOW [>120.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_must_wait_for_available_utxos
00:02:12         SLOW [>120.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_support_rbf
00:02:12         SLOW [>120.000s] fedimint-wallet-tests::fedimint_wallet_tests sanity_check_bitcoin_blocks
00:03:12         SLOW [>180.000s] fedimint-wallet-tests::fedimint_wallet_tests on_chain_peg_in_and_peg_out_happy_case
00:03:12         SLOW [>180.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:03:12         SLOW [>180.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_out_fail_refund
00:03:12         SLOW [>180.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_must_wait_for_available_utxos
00:03:12         SLOW [>180.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_support_rbf
00:03:12         SLOW [>180.000s] fedimint-wallet-tests::fedimint_wallet_tests sanity_check_bitcoin_blocks
00:03:15         PASS [ 183.548s] fedimint-wallet-tests::fedimint_wallet_tests peg_out_fail_refund
00:03:38         PASS [ 206.414s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_support_rbf
00:04:12         SLOW [>240.000s] fedimint-wallet-tests::fedimint_wallet_tests on_chain_peg_in_and_peg_out_happy_case
00:04:12         SLOW [>240.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:04:12         SLOW [>240.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_must_wait_for_available_utxos
00:04:12         SLOW [>240.000s] fedimint-wallet-tests::fedimint_wallet_tests sanity_check_bitcoin_blocks
00:04:13         PASS [ 241.599s] fedimint-wallet-tests::fedimint_wallet_tests on_chain_peg_in_and_peg_out_happy_case
00:04:23         PASS [ 251.701s] fedimint-wallet-tests::fedimint_wallet_tests sanity_check_bitcoin_blocks
00:05:00         PASS [ 288.668s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_must_wait_for_available_utxos
00:05:12         SLOW [>300.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:06:12         SLOW [>360.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:06:44         PASS [ 391.861s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:06:44 ------------
00:06:44      Summary [ 391.861s] 6 tests run: 6 passed (6 slow), 0 skipped
00:06:44 ### Testing against esplora - complete
00:06:44 fm success: rust-tests
00:06:44 Auto-killing external-daemons(PID: 39743) and waiting it to finish...
00:06:44 2023-09-24T05:43:17.053107Z  INFO task: signal received, starting graceful shutdown
00:06:44 2023-09-24T05:43:17.056356Z  INFO devimint: sending SIGTERM to lightningd and waiting for it to exit
00:06:44 2023-09-24T05:43:17.057198Z  INFO devimint: sending SIGKILL to lnd and waiting for it to exit
00:06:44 2023-09-24T05:43:17.060156Z  INFO devimint: sending SIGKILL to electrs and waiting for it to exit
00:06:44 2023-09-24T05:43:17.061044Z  INFO devimint: sending SIGKILL to esplora and waiting for it to exit
00:06:44 2023-09-24T05:43:17.062441Z  INFO devimint: sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: backend_test_esplora
## START: backend_test_bitcoind
00:00:00 Setting up env variables in /tmp/nix-shell.mCrVBQ/nix-shell.bWG9jl/fm-SSc1
00:00:00     Finished dev [unoptimized + debuginfo] target(s) in 0.26s
00:00:00 ### Setting up tests
00:00:00 2023-09-24T05:36:23.609270Z  INFO devimint: Test setup in "/tmp/nix-shell.mCrVBQ/nix-shell.bWG9jl/fm-SSc1/cfg"
00:00:00 2023-09-24T05:36:23.610429Z  WARN devimint: Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:02 2023-09-24T05:36:25.949863Z  INFO devimint: electrs started
00:00:02 2023-09-24T05:36:25.950826Z  INFO devimint: esplora started
00:00:06 2023-09-24T05:36:29.215584Z  INFO devimint: block sync done
00:00:06 2023-09-24T05:36:29.218891Z  INFO devimint: Sending funds from bitcoind amount=100000000 addr="bcrt1q9znd0fqw6vatgyzwr4jnlrepyj5lshffkqu2fs"
00:00:06 2023-09-24T05:36:29.230590Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:06 2023-09-24T05:36:29.816803Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:08 2023-09-24T05:36:31.112724Z  INFO devimint: starting base daemons took 7.503240635s
00:00:09 ### Setting up tests - complete
00:00:09 ### Testing against bitcoind
00:00:09     Finished test [unoptimized + debuginfo] target(s) in 0.25s
00:00:09     Starting 5 tests across 52 binaries
00:00:09         PASS [   0.055s] fedimint-dummy-tests::fedimint_dummy_tests unbalanced_transactions_get_rejected
00:00:09         PASS [   0.059s] fedimint-dummy-tests::fedimint_dummy_tests client_ignores_unknown_module
00:00:11         PASS [   2.507s] fedimint-dummy-tests::fedimint_dummy_tests can_threshold_sign_message
00:00:13         PASS [   3.866s] fedimint-dummy-tests::fedimint_dummy_tests can_print_and_send_money
00:00:51         PASS [  42.054s] fedimint-dummy-tests::fedimint_dummy_tests federation_should_abort_if_balance_sheet_is_negative
00:00:51 ------------
00:00:51      Summary [  42.059s] 5 tests run: 5 passed, 0 skipped
00:00:51     Finished test [unoptimized + debuginfo] target(s) in 0.49s
00:00:52     Starting 1 test across 52 binaries
00:01:06         PASS [  14.903s] fedimint-mint-tests::fedimint_mint_tests sends_ecash_out_of_band
00:01:06 ------------
00:01:06      Summary [  14.903s] 1 test run: 1 passed, 0 skipped
00:01:07     Finished test [unoptimized + debuginfo] target(s) in 0.36s
00:01:07     Starting 6 tests across 52 binaries
00:02:07         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests on_chain_peg_in_and_peg_out_happy_case
00:02:07         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:02:07         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_out_fail_refund
00:02:07         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_must_wait_for_available_utxos
00:02:07         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_support_rbf
00:02:07         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests sanity_check_bitcoin_blocks
00:03:07         SLOW [>120.000s] fedimint-wallet-tests::fedimint_wallet_tests on_chain_peg_in_and_peg_out_happy_case
00:03:07         SLOW [>120.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:03:07         SLOW [>120.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_out_fail_refund
00:03:07         SLOW [>120.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_must_wait_for_available_utxos
00:03:07         SLOW [>120.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_support_rbf
00:03:07         SLOW [>120.000s] fedimint-wallet-tests::fedimint_wallet_tests sanity_check_bitcoin_blocks
00:04:07         SLOW [>180.000s] fedimint-wallet-tests::fedimint_wallet_tests on_chain_peg_in_and_peg_out_happy_case
00:04:07         SLOW [>180.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:04:07         SLOW [>180.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_out_fail_refund
00:04:07         SLOW [>180.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_must_wait_for_available_utxos
00:04:07         SLOW [>180.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_support_rbf
00:04:07         SLOW [>180.000s] fedimint-wallet-tests::fedimint_wallet_tests sanity_check_bitcoin_blocks
00:05:07         SLOW [>240.000s] fedimint-wallet-tests::fedimint_wallet_tests on_chain_peg_in_and_peg_out_happy_case
00:05:07         SLOW [>240.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:05:07         SLOW [>240.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_out_fail_refund
00:05:07         SLOW [>240.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_must_wait_for_available_utxos
00:05:07         SLOW [>240.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_support_rbf
00:05:07         SLOW [>240.000s] fedimint-wallet-tests::fedimint_wallet_tests sanity_check_bitcoin_blocks
00:06:07         SLOW [>300.000s] fedimint-wallet-tests::fedimint_wallet_tests on_chain_peg_in_and_peg_out_happy_case
00:06:07         SLOW [>300.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:06:07         SLOW [>300.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_out_fail_refund
00:06:07         SLOW [>300.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_must_wait_for_available_utxos
00:06:07         SLOW [>300.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_support_rbf
00:06:07         SLOW [>300.000s] fedimint-wallet-tests::fedimint_wallet_tests sanity_check_bitcoin_blocks
00:06:17         PASS [ 309.901s] fedimint-wallet-tests::fedimint_wallet_tests peg_out_fail_refund
00:06:18         PASS [ 311.045s] fedimint-wallet-tests::fedimint_wallet_tests sanity_check_bitcoin_blocks
00:06:32         PASS [ 324.717s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_support_rbf
00:06:41         PASS [ 333.841s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_must_wait_for_available_utxos
00:06:47         PASS [ 339.878s] fedimint-wallet-tests::fedimint_wallet_tests on_chain_peg_in_and_peg_out_happy_case
00:06:54         PASS [ 346.729s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:06:54 ------------
00:06:54      Summary [ 346.730s] 6 tests run: 6 passed (6 slow), 0 skipped
00:06:54     Finished test [unoptimized + debuginfo] target(s) in 0.23s
00:06:54     Starting 4 tests across 52 binaries
00:06:57         PASS [   2.753s] fedimint-ln-tests::fedimint_ln_tests can_switch_active_gateway
00:07:00         PASS [   6.190s] fedimint-ln-tests::fedimint_ln_tests rejects_wrong_network_invoice
00:07:06         PASS [  11.955s] fedimint-ln-tests::fedimint_ln_tests makes_internal_payments_within_federation
00:07:27         PASS [  33.011s] fedimint-ln-tests::fedimint_ln_tests test_can_attach_extra_meta_to_receive_operation
00:07:27 ------------
00:07:27      Summary [  33.012s] 4 tests run: 4 passed, 0 skipped
00:07:27     Finished test [unoptimized + debuginfo] target(s) in 0.23s
00:07:27     Starting 17 tests across 52 binaries
00:07:27         PASS [   0.006s] ln-gateway utils::tests::retry_fail_with_three_attempts
00:07:27         PASS [   0.003s] ln-gateway utils::tests::retry_succeed_with_one_attempt
00:08:27         SLOW [> 60.000s] ln-gateway::gatewayd-integration-tests test_gateway_can_pay_ldk_node
00:08:41         PASS [  73.300s] ln-gateway::gatewayd-integration-tests test_gateway_can_pay_ldk_node
00:09:13         PASS [  32.443s] ln-gateway::gatewayd-integration-tests test_gateway_cannot_claim_invalid_preimage
00:09:43         PASS [  29.670s] ln-gateway::gatewayd-integration-tests test_gateway_cannot_pay_expired_invoice
00:10:09         PASS [  26.481s] ln-gateway::gatewayd-integration-tests test_gateway_client_intercept_htlc_invalid_offer
00:10:20         PASS [  11.256s] ln-gateway::gatewayd-integration-tests test_gateway_client_intercept_htlc_no_funds
00:10:40         PASS [  19.799s] ln-gateway::gatewayd-integration-tests test_gateway_client_intercept_offer_does_not_exist
00:11:04         PASS [  23.770s] ln-gateway::gatewayd-integration-tests test_gateway_client_intercept_valid_htlc
00:11:30         PASS [  25.663s] ln-gateway::gatewayd-integration-tests test_gateway_client_pay_unpayable_invoice
00:12:18         PASS [  48.817s] ln-gateway::gatewayd-integration-tests test_gateway_client_pay_valid_invoice
00:12:22         PASS [   3.630s] ln-gateway::gatewayd-integration-tests test_gateway_configuration
00:12:36         PASS [  14.255s] ln-gateway::gatewayd-integration-tests test_gateway_filters_route_hints_by_inbound
00:12:39         PASS [   2.631s] ln-gateway::gatewayd-integration-tests test_gateway_register_with_federation
00:12:49         PASS [   9.987s] ln-gateway::gatewayd-integration-tests test_gateway_shows_balance_for_any_connected_federation
00:12:52         PASS [   2.792s] ln-gateway::gatewayd-integration-tests test_gateway_shows_info_about_all_connected_federations
00:12:55         PASS [   2.805s] ln-gateway::gatewayd-integration-tests test_gateway_supports_connecting_multiple_federations
00:12:55 ------------
00:12:55      Summary [ 327.306s] 17 tests run: 17 passed (1 slow), 0 skipped
00:12:55 ### Testing against bitcoind - complete
00:12:55 fm success: rust-tests
00:12:55 Auto-killing external-daemons(PID: 38680) and waiting it to finish...
00:12:55 2023-09-24T05:49:18.061741Z  INFO task: signal received, starting graceful shutdown
00:12:55 2023-09-24T05:49:18.065812Z  INFO devimint: sending SIGTERM to lightningd and waiting for it to exit
00:12:55 2023-09-24T05:49:18.066742Z  INFO devimint: sending SIGKILL to lnd and waiting for it to exit
00:12:55 2023-09-24T05:49:18.071273Z  INFO devimint: sending SIGKILL to electrs and waiting for it to exit
00:12:55 2023-09-24T05:49:18.072335Z  INFO devimint: sending SIGKILL to esplora and waiting for it to exit
00:12:55 2023-09-24T05:49:18.073863Z  INFO devimint: sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: backend_test_bitcoind
All tests successful
test run 2
./scripts/tests/test-ci-all.sh
Pre-building workspace...
    Finished dev [unoptimized + debuginfo] target(s) in 0.21s
Pre-building tests...
    Finished test [unoptimized + debuginfo] target(s) in 0.22s
## Starting all tests in parallel...
## START: always_success_test
## COMPLETE: always_success_test
## START: lightning_reconnect_test
00:00:00 Setting up env variables in /tmp/nix-shell.mCrVBQ/nix-shell.sMipC1/fm-P1uY
00:00:00     Finished dev [unoptimized + debuginfo] target(s) in 0.30s
00:00:00 2023-09-24T05:49:50.604252Z  INFO devimint: Test setup in "/tmp/nix-shell.mCrVBQ/nix-shell.sMipC1/fm-P1uY/cfg"
00:00:00 2023-09-24T05:49:50.605454Z  WARN devimint: Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:03 2023-09-24T05:49:53.237565Z  INFO devimint: electrs started
00:00:03 2023-09-24T05:49:53.238414Z  INFO devimint: esplora started
00:00:03 2023-09-24T05:49:53.238457Z  INFO devimint::federation: fedimintd-3 started
00:00:03 2023-09-24T05:49:53.240873Z  INFO devimint::federation: fedimintd-1 started
00:00:03 2023-09-24T05:49:53.249204Z  INFO devimint::federation: fedimintd-0 started
00:00:03 2023-09-24T05:49:53.250381Z  INFO devimint::federation: fedimintd-2 started
00:00:03 2023-09-24T05:49:53.251376Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:04 2023-09-24T05:49:54.254646Z  INFO devimint::federation: Connected to 0
00:00:04 2023-09-24T05:49:54.260309Z  INFO devimint::federation: Connected to 1
00:00:04 2023-09-24T05:49:54.262861Z  INFO devimint::federation: Connected to 2
00:00:04 2023-09-24T05:49:54.264543Z  INFO devimint::federation: Connected to 3
00:00:04 2023-09-24T05:49:54.275753Z  INFO devimint::federation: calling set_config_gen_connections for 1 random-nl2Jn1
00:00:04 2023-09-24T05:49:54.286436Z  INFO devimint::federation: calling set_config_gen_connections for 2 random-yRCld2
00:00:04 2023-09-24T05:49:54.295859Z  INFO devimint::federation: calling set_config_gen_connections for 3 random-ww7x43
00:00:04 2023-09-24T05:49:54.329588Z  INFO devimint::federation: Running DKG...
00:00:07 2023-09-24T05:49:57.380319Z  INFO devimint::federation: DKG successfully complete. Starting consensus...
00:00:07 2023-09-24T05:49:57.389516Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:07 2023-09-24T05:49:57.714969Z  INFO devimint: lightning started
00:00:08 2023-09-24T05:49:58.417908Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:08 2023-09-24T05:49:58.418308Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:08 2023-09-24T05:49:58.422725Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:08 2023-09-24T05:49:58.957578Z  INFO devimint: block sync done
00:00:08 2023-09-24T05:49:58.967598Z  INFO devimint: Sending funds from bitcoind amount=100000000 addr="bcrt1qha02tc4ktckahg77rc353urtn7m4aqwpxegexr"
00:00:09 2023-09-24T05:49:59.021530Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:09 2023-09-24T05:49:59.439672Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:09 2023-09-24T05:49:59.440149Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:09 2023-09-24T05:49:59.440406Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:09 2023-09-24T05:49:59.961776Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:10 2023-09-24T05:50:00.455583Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:10 2023-09-24T05:50:00.456163Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:10 2023-09-24T05:50:00.620632Z  WARN devimint::external: Getting chan info failed e=status: Unknown, message: "edge not found", details: [], metadata: MetadataMap { headers: {"content-type": "application/grpc"} }
00:00:11 2023-09-24T05:50:01.434767Z  WARN devimint::external: Empty chan info edge=ChannelEdge { channel_id: 123145302376449, chan_point: "0d3ea189dbd7a62ca08b0bcc768bd7b023c7226846f5cc96e990a993c00f8bd8:1", last_update: 1695534601, node1_pub: "02698bc019eea77a2b166b330310ee4dc2e830c2396bfcc46bf5ffdd84e5cc2647", node2_pub: "0353e9677415ace1af0aeaf0904c65a7783e5492cc84b78577be63adf18a4dad2c", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1695534601 }) }
00:00:11 2023-09-24T05:50:01.473200Z  INFO devimint::federation: Consensus is running
00:00:11 2023-09-24T05:50:01.480160Z  INFO devimint::federation: copied client configs
00:00:12 2023-09-24T05:50:02.646039Z  WARN devimint::external: Empty chan info edge=ChannelEdge { channel_id: 123145302376449, chan_point: "0d3ea189dbd7a62ca08b0bcc768bd7b023c7226846f5cc96e990a993c00f8bd8:1", last_update: 1695534601, node1_pub: "02698bc019eea77a2b166b330310ee4dc2e830c2396bfcc46bf5ffdd84e5cc2647", node2_pub: "0353e9677415ace1af0aeaf0904c65a7783e5492cc84b78577be63adf18a4dad2c", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1695534601 }) }
00:00:14 2023-09-24T05:50:04.251820Z  INFO devimint: gateways started
00:00:14 2023-09-24T05:50:04.251863Z  INFO devimint: federation and gateways started
00:00:14 2023-09-24T05:50:04.252808Z  INFO devimint: Joining federation with the main client
00:00:14 2023-09-24T05:50:04.505322Z  INFO devimint: Generating first epoch
00:00:14 2023-09-24T05:50:04.523602Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:14 2023-09-24T05:50:04.886473Z  INFO devimint: await gateways registered
00:00:15 2023-09-24T05:50:05.078189Z  INFO devimint: gateways registered
00:00:15 2023-09-24T05:50:05.340437Z  INFO devimint::federation: Using cln gateway
00:00:15 2023-09-24T05:50:05.340505Z  INFO devimint: starting dev federation took 14.73613464s
00:00:15 2023-09-24T05:50:05.340541Z  INFO devimint: Pegging-in both gateways
00:00:15 2023-09-24T05:50:05.340559Z  INFO devimint::federation: Pegging-in gateway funds amount=99999
00:00:15 2023-09-24T05:50:05.405693Z  INFO devimint: Sending funds from bitcoind amount=99999 addr="bcrt1qd55pdp5f33rr5nznkuhft9pyvn7e5c69agqk3yaw88ulrt82ac7qm7x69y"
00:00:15 2023-09-24T05:50:05.422352Z  INFO devimint: Mining bitcoin blocks block_num=21
00:00:24 2023-09-24T05:50:14.653372Z  INFO devimint::federation: Pegging-in gateway funds amount=99999
00:00:24 2023-09-24T05:50:14.704185Z  INFO devimint: Sending funds from bitcoind amount=99999 addr="bcrt1qaag699ekdf4t2wtp7esp64w2tdp08s2pnxzrl97kphdnqzam9zaqdd4gkr"
00:00:24 2023-09-24T05:50:14.720073Z  INFO devimint: Mining bitcoin blocks block_num=21
00:00:33 2023-09-24T05:50:23.653586Z  INFO devimint: Stopping all lightning nodes
00:00:33 2023-09-24T05:50:23.705639Z  INFO devimint: Stopping lightning node
00:00:33 2023-09-24T05:50:23.713985Z  INFO devimint: sending SIGTERM to lightningd and waiting for it to exit
00:00:33 2023-09-24T05:50:23.796720Z  INFO devimint: Stopping lightning node
00:00:33 2023-09-24T05:50:23.796789Z  INFO devimint: sending SIGTERM to lnd and waiting for it to exit
00:00:33 2023-09-24T05:50:23.845507Z  INFO devimint: Restarting both lightning nodes...
00:00:34 2023-09-24T05:50:24.262748Z  INFO devimint::external: lnd_connect failed: ConnectError { internal: Connect { address: "http://localhost:11009", error: tonic::transport::Error(Transport, hyper::Error(Connect, ConnectError("tcp connect error", Os { code: 111, kind: ConnectionRefused, message: "Connection refused" }))) } }
00:00:34 2023-09-24T05:50:24.274441Z  INFO devimint::external: lnd_connect failed: ConnectError { internal: Connect { address: "http://localhost:11009", error: tonic::transport::Error(Transport, hyper::Error(Connect, ConnectError("tcp connect error", Os { code: 111, kind: ConnectionRefused, message: "Connection refused" }))) } }
00:00:35 2023-09-24T05:50:25.900211Z  INFO devimint: Retrying info...
00:00:40 2023-09-24T05:50:30.418350Z  INFO devimint::federation: Using cln gateway
00:00:40 2023-09-24T05:50:30.418533Z  INFO devimint: Creating invoice....
00:00:44 2023-09-24T05:50:34.156892Z  INFO devimint: sending SIGKILL to gatewayd-cln and waiting for it to exit
00:00:44 2023-09-24T05:50:34.398900Z  INFO devimint::federation: Using lnd gateway
00:00:44 2023-09-24T05:50:34.398960Z  INFO devimint: Creating invoice....
00:00:48 2023-09-24T05:50:38.375470Z  INFO devimint: sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:00:48 2023-09-24T05:50:38.383268Z  INFO devimint: lightning_reconnect_test: success
00:00:48 2023-09-24T05:50:38.383351Z  INFO devimint: sending SIGKILL to lnd and waiting for it to exit
00:00:48 2023-09-24T05:50:38.390246Z  INFO devimint: sending SIGTERM to lightningd and waiting for it to exit
00:00:48 2023-09-24T05:50:38.390777Z  INFO devimint: sending SIGKILL to faucet and waiting for it to exit
00:00:48 2023-09-24T05:50:38.391826Z  INFO devimint: sending SIGKILL to esplora and waiting for it to exit
00:00:48 2023-09-24T05:50:38.395075Z  INFO devimint: sending SIGKILL to electrs and waiting for it to exit
00:00:48 2023-09-24T05:50:38.396056Z  INFO devimint: sending SIGKILL to fedimintd-0 and waiting for it to exit
00:00:48 2023-09-24T05:50:38.401658Z  INFO devimint: sending SIGKILL to fedimintd-1 and waiting for it to exit
00:00:48 2023-09-24T05:50:38.407058Z  INFO devimint: sending SIGKILL to fedimintd-2 and waiting for it to exit
00:00:48 2023-09-24T05:50:38.413300Z  INFO devimint: sending SIGKILL to fedimintd-3 and waiting for it to exit
00:00:48 2023-09-24T05:50:38.418215Z  INFO devimint: sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: lightning_reconnect_test
## START: gateway_reboot_test
00:00:00 Setting up env variables in /tmp/nix-shell.mCrVBQ/nix-shell.sMipC1/fm-DYiS
00:00:01     Finished dev [unoptimized + debuginfo] target(s) in 0.69s
00:00:01 2023-09-24T05:49:56.342018Z  INFO devimint: Test setup in "/tmp/nix-shell.mCrVBQ/nix-shell.sMipC1/fm-DYiS/cfg"
00:00:01 2023-09-24T05:49:56.343445Z  WARN devimint: Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:04 2023-09-24T05:49:59.760142Z  INFO devimint: electrs started
00:00:04 2023-09-24T05:49:59.764244Z  INFO devimint: esplora started
00:00:04 2023-09-24T05:49:59.764322Z  INFO devimint::federation: fedimintd-3 started
00:00:04 2023-09-24T05:49:59.788341Z  INFO devimint::federation: fedimintd-0 started
00:00:04 2023-09-24T05:49:59.796629Z  INFO devimint::federation: fedimintd-2 started
00:00:04 2023-09-24T05:49:59.805347Z  INFO devimint::federation: fedimintd-1 started
00:00:04 2023-09-24T05:49:59.816234Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:05 2023-09-24T05:50:00.828262Z  INFO devimint::federation: Connected to 0
00:00:05 2023-09-24T05:50:00.831146Z  INFO devimint::federation: Connected to 1
00:00:05 2023-09-24T05:50:00.834107Z  INFO devimint::federation: Connected to 2
00:00:05 2023-09-24T05:50:00.840038Z  INFO devimint::federation: Connected to 3
00:00:05 2023-09-24T05:50:00.861567Z  INFO devimint::federation: calling set_config_gen_connections for 1 random-jYj711
00:00:05 2023-09-24T05:50:00.872272Z  INFO devimint::federation: calling set_config_gen_connections for 2 random-zmHzp2
00:00:05 2023-09-24T05:50:00.882842Z  INFO devimint::federation: calling set_config_gen_connections for 3 random-dgWLL3
00:00:05 2023-09-24T05:50:00.945463Z  INFO devimint::federation: Running DKG...
00:00:09 2023-09-24T05:50:04.261005Z  INFO devimint::federation: DKG successfully complete. Starting consensus...
00:00:09 2023-09-24T05:50:04.271613Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:09 2023-09-24T05:50:04.271894Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:09 2023-09-24T05:50:04.272227Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:10 2023-09-24T05:50:05.300822Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:10 2023-09-24T05:50:05.302738Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:10 2023-09-24T05:50:05.306086Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:11 2023-09-24T05:50:06.301396Z  INFO devimint: lightning started
00:00:11 2023-09-24T05:50:06.331084Z  INFO devimint: block sync done
00:00:11 2023-09-24T05:50:06.346868Z  INFO devimint: Sending funds from bitcoind amount=100000000 addr="bcrt1qamm0rpj09fa0hgs3savwjd9c6juhp5u9vcvy44"
00:00:11 2023-09-24T05:50:06.352822Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:11 2023-09-24T05:50:06.424179Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:12 2023-09-24T05:50:07.188613Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:13 2023-09-24T05:50:08.020509Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:13 2023-09-24T05:50:08.216315Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:13 2023-09-24T05:50:08.216743Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:13 2023-09-24T05:50:08.217123Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:14 2023-09-24T05:50:09.221984Z  INFO devimint::federation: Consensus is running
00:00:14 2023-09-24T05:50:09.224183Z  INFO devimint::federation: copied client configs
00:00:14 2023-09-24T05:50:09.427049Z  INFO devimint: gateways started
00:00:14 2023-09-24T05:50:09.427097Z  INFO devimint: federation and gateways started
00:00:14 2023-09-24T05:50:09.432774Z  INFO devimint: Joining federation with the main client
00:00:15 2023-09-24T05:50:10.688284Z  INFO devimint: Generating first epoch
00:00:15 2023-09-24T05:50:10.715126Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:17 2023-09-24T05:50:12.352152Z  INFO devimint: await gateways registered
00:00:18 2023-09-24T05:50:13.020497Z  INFO devimint: gateways registered
00:00:18 2023-09-24T05:50:13.520256Z  INFO devimint::federation: Using cln gateway
00:00:18 2023-09-24T05:50:13.520306Z  INFO devimint: starting dev federation took 17.178129798s
00:00:18 2023-09-24T05:50:13.609875Z  INFO devimint: sending SIGKILL to gatewayd-cln and waiting for it to exit
00:00:18 2023-09-24T05:50:13.628221Z  INFO devimint: sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:00:44 2023-09-24T05:50:39.170247Z  INFO devimint: CLN Gateway restarted, with auto-rejoin to federation
00:00:44 2023-09-24T05:50:39.214077Z  INFO devimint: LND Gateway restarted, with auto-rejoin to federation
00:00:44 2023-09-24T05:50:39.214196Z  INFO devimint: gateway_reboot_test: success LOG_DEVIMINT="devimint"
00:00:44 2023-09-24T05:50:39.214260Z  INFO devimint: sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:00:44 2023-09-24T05:50:39.226200Z  INFO devimint: sending SIGKILL to gatewayd-cln and waiting for it to exit
00:00:44 2023-09-24T05:50:39.234786Z  INFO devimint: sending SIGKILL to faucet and waiting for it to exit
00:00:44 2023-09-24T05:50:39.235910Z  INFO devimint: sending SIGKILL to esplora and waiting for it to exit
00:00:44 2023-09-24T05:50:39.241436Z  INFO devimint: sending SIGKILL to electrs and waiting for it to exit
00:00:44 2023-09-24T05:50:39.242560Z  INFO devimint: sending SIGKILL to fedimintd-0 and waiting for it to exit
00:00:44 2023-09-24T05:50:39.248796Z  INFO devimint: sending SIGKILL to fedimintd-1 and waiting for it to exit
00:00:44 2023-09-24T05:50:39.257581Z  INFO devimint: sending SIGKILL to fedimintd-2 and waiting for it to exit
00:00:44 2023-09-24T05:50:39.267345Z  INFO devimint: sending SIGKILL to fedimintd-3 and waiting for it to exit
00:00:44 2023-09-24T05:50:39.274501Z  INFO devimint: sending SIGKILL to lnd and waiting for it to exit
00:00:44 2023-09-24T05:50:39.286161Z  INFO devimint: sending SIGTERM to lightningd and waiting for it to exit
00:00:44 2023-09-24T05:50:39.287120Z  INFO devimint: sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: gateway_reboot_test
## START: load_test_tool_test
00:00:00 Setting up env variables in /tmp/nix-shell.mCrVBQ/nix-shell.sMipC1/fm-3Uwi
00:00:01     Finished dev [unoptimized + debuginfo] target(s) in 0.41s
00:00:01 2023-09-24T05:50:06.155989Z  INFO devimint: Test setup in "/tmp/nix-shell.mCrVBQ/nix-shell.sMipC1/fm-3Uwi/cfg"
00:00:01 2023-09-24T05:50:06.176493Z  WARN devimint: Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:04 2023-09-24T05:50:09.735128Z  INFO devimint: electrs started
00:00:04 2023-09-24T05:50:09.736089Z  INFO devimint: esplora started
00:00:04 2023-09-24T05:50:09.736145Z  INFO devimint::federation: fedimintd-3 started
00:00:04 2023-09-24T05:50:09.738574Z  INFO devimint::federation: fedimintd-2 started
00:00:04 2023-09-24T05:50:09.740313Z  INFO devimint::federation: fedimintd-1 started
00:00:04 2023-09-24T05:50:09.743445Z  INFO devimint::federation: fedimintd-0 started
00:00:04 2023-09-24T05:50:09.747593Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:05 2023-09-24T05:50:10.762584Z  INFO devimint::federation: Connected to 0
00:00:05 2023-09-24T05:50:10.774051Z  INFO devimint::federation: Connected to 1
00:00:05 2023-09-24T05:50:10.777261Z  INFO devimint::federation: Connected to 2
00:00:05 2023-09-24T05:50:10.780474Z  INFO devimint::federation: Connected to 3
00:00:05 2023-09-24T05:50:10.805722Z  INFO devimint::federation: calling set_config_gen_connections for 1 random-EG4YT1
00:00:05 2023-09-24T05:50:10.823253Z  INFO devimint::federation: calling set_config_gen_connections for 2 random-p2DfS2
00:00:05 2023-09-24T05:50:10.835293Z  INFO devimint::federation: calling set_config_gen_connections for 3 random-zs5dj3
00:00:05 2023-09-24T05:50:10.907968Z  INFO devimint::federation: Running DKG...
00:00:10 2023-09-24T05:50:15.101216Z  INFO devimint::federation: DKG successfully complete. Starting consensus...
00:00:10 2023-09-24T05:50:15.112170Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:10 2023-09-24T05:50:15.112562Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:10 2023-09-24T05:50:15.113402Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:11 2023-09-24T05:50:16.127846Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:11 2023-09-24T05:50:16.128111Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:11 2023-09-24T05:50:16.128390Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:11 2023-09-24T05:50:16.226978Z  INFO devimint: lightning started
00:00:11 2023-09-24T05:50:16.233855Z  INFO devimint: block sync done
00:00:11 2023-09-24T05:50:16.237644Z  INFO devimint: Sending funds from bitcoind amount=100000000 addr="bcrt1q8xvj9t89qf9lxc42fyzzrrtrdhn6el8083q0gp"
00:00:11 2023-09-24T05:50:16.249774Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:12 2023-09-24T05:50:17.142716Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:12 2023-09-24T05:50:17.143153Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:12 2023-09-24T05:50:17.143465Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:12 2023-09-24T05:50:17.717361Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:13 2023-09-24T05:50:18.156124Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:13 2023-09-24T05:50:18.156386Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:13 2023-09-24T05:50:18.156618Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:14 2023-09-24T05:50:19.033245Z  WARN devimint::external: Empty chan info edge=ChannelEdge { channel_id: 123145302376449, chan_point: "a3de451698196fd07a61e1081dcd1b019d4619d5f86a4155158f4e541191ade2:1", last_update: 1695534618, node1_pub: "021c944537ba3660ddf0eb347278faf1ab073d0699a2fb86b37d78bec0071718dd", node2_pub: "034b552dc6143e921ebcc5201c73d1a2d9c86d5ff9ce4c7d6022b6746152e50398", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1695534618 }) }
00:00:14 2023-09-24T05:50:19.160700Z  INFO devimint::federation: Consensus is running
00:00:14 2023-09-24T05:50:19.160995Z  INFO devimint::federation: copied client configs
00:00:15 2023-09-24T05:50:20.236261Z  WARN devimint::external: Empty chan info edge=ChannelEdge { channel_id: 123145302376449, chan_point: "a3de451698196fd07a61e1081dcd1b019d4619d5f86a4155158f4e541191ade2:1", last_update: 1695534618, node1_pub: "021c944537ba3660ddf0eb347278faf1ab073d0699a2fb86b37d78bec0071718dd", node2_pub: "034b552dc6143e921ebcc5201c73d1a2d9c86d5ff9ce4c7d6022b6746152e50398", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1695534618 }) }
00:00:16 2023-09-24T05:50:21.904162Z  INFO devimint: gateways started
00:00:16 2023-09-24T05:50:21.904208Z  INFO devimint: federation and gateways started
00:00:16 2023-09-24T05:50:21.940169Z  INFO devimint: Joining federation with the main client
00:00:17 2023-09-24T05:50:22.291334Z  INFO devimint: Generating first epoch
00:00:17 2023-09-24T05:50:22.312887Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:17 2023-09-24T05:50:22.721790Z  INFO devimint: await gateways registered
00:00:17 2023-09-24T05:50:22.949921Z  INFO devimint: gateways registered
00:00:18 2023-09-24T05:50:23.190422Z  INFO devimint::federation: Using cln gateway
00:00:18 2023-09-24T05:50:23.190464Z  INFO devimint: starting dev federation took 17.034293303s
00:00:18 2023-09-24T05:50:23.190491Z  INFO devimint::federation: Peg-in amount=10000
00:00:18 2023-09-24T05:50:23.388108Z  INFO devimint: Sending funds from bitcoind amount=10000 addr="bcrt1q4l2cyy5hwezff7k6lw0qnktq0s5f5jtmavkg8apwpy9kzx0gtmjsg4dq2n"
00:00:18 2023-09-24T05:50:23.403293Z  INFO devimint: Mining bitcoin blocks block_num=21
00:00:35 2 reissue_notes: avg 2.503956274s, median 3.622990264s, max 3.622990264s, min 1.384922285s
00:00:35 1 gateway_pay_invoice: avg 3.767806179s, median 3.767806179s, max 3.767806179s, min 3.767806179s
00:00:45 2 reissue_notes: avg 2.014399455s, median 2.149560926s, max 2.149560926s, min 1.879237985s (compared to previous: avg: -19.54%, median: -40.67%, max: -40.67%, min: +35.77%)
00:00:45 1 gateway_pay_invoice: avg 3.380959401s, median 3.380959401s, max 3.380959401s, min 3.380959401s (compared to previous: avg: -10.27%, median: -10.27%, max: -10.27%, min: -10.27%)
00:00:45 2023-09-24T05:50:50.224811Z  INFO devimint: sending SIGKILL to fedimintd-0 and waiting for it to exit
00:00:45 2023-09-24T05:50:50.235235Z  INFO devimint: sending SIGKILL to fedimintd-1 and waiting for it to exit
00:00:45 2023-09-24T05:50:50.246920Z  INFO devimint: sending SIGKILL to fedimintd-2 and waiting for it to exit
00:00:45 2023-09-24T05:50:50.259286Z  INFO devimint: sending SIGKILL to fedimintd-3 and waiting for it to exit
00:00:45 2023-09-24T05:50:50.269884Z  INFO devimint: sending SIGKILL to gatewayd-cln and waiting for it to exit
00:00:45 2023-09-24T05:50:50.286409Z  INFO devimint: sending SIGTERM to lightningd and waiting for it to exit
00:00:45 2023-09-24T05:50:50.287845Z  INFO devimint: sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:00:45 2023-09-24T05:50:50.302339Z  INFO devimint: sending SIGKILL to lnd and waiting for it to exit
00:00:45 2023-09-24T05:50:50.307189Z  INFO devimint: sending SIGKILL to electrs and waiting for it to exit
00:00:45 2023-09-24T05:50:50.309095Z  INFO devimint: sending SIGKILL to esplora and waiting for it to exit
00:00:45 2023-09-24T05:50:50.313697Z  INFO devimint: sending SIGKILL to bitcoind and waiting for it to exit
00:00:45 2023-09-24T05:50:50.318856Z  INFO devimint: sending SIGKILL to faucet and waiting for it to exit
## COMPLETE: load_test_tool_test
## START: devimint_cli_test
00:00:00 Setting up env variables in /tmp/nix-shell.mCrVBQ/nix-shell.sMipC1/fm-8s8H
00:00:00     Finished dev [unoptimized + debuginfo] target(s) in 0.36s
00:00:00 2023-09-24T05:50:00.975670Z  INFO devimint: Test setup in "/tmp/nix-shell.mCrVBQ/nix-shell.sMipC1/fm-8s8H/cfg"
00:00:00 2023-09-24T05:50:00.977006Z  WARN devimint: Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:05 2023-09-24T05:50:05.110684Z  INFO devimint: electrs started
00:00:05 2023-09-24T05:50:05.111607Z  INFO devimint: esplora started
00:00:05 2023-09-24T05:50:05.111641Z  INFO devimint::federation: fedimintd-0 started
00:00:05 2023-09-24T05:50:05.114352Z  INFO devimint::federation: fedimintd-3 started
00:00:05 2023-09-24T05:50:05.117619Z  INFO devimint::federation: fedimintd-2 started
00:00:05 2023-09-24T05:50:05.120565Z  INFO devimint::federation: fedimintd-1 started
00:00:05 2023-09-24T05:50:05.123251Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:06 2023-09-24T05:50:06.133394Z  INFO devimint::federation: Connected to 0
00:00:06 2023-09-24T05:50:06.143728Z  INFO devimint::federation: Connected to 1
00:00:06 2023-09-24T05:50:06.153408Z  INFO devimint::federation: Connected to 2
00:00:06 2023-09-24T05:50:06.158896Z  INFO devimint::federation: Connected to 3
00:00:06 2023-09-24T05:50:06.184368Z  INFO devimint::federation: calling set_config_gen_connections for 1 random-z5UAQ1
00:00:06 2023-09-24T05:50:06.194017Z  INFO devimint::federation: calling set_config_gen_connections for 2 random-YryiY2
00:00:06 2023-09-24T05:50:06.202524Z  INFO devimint::federation: calling set_config_gen_connections for 3 random-5W50B3
00:00:06 2023-09-24T05:50:06.251789Z  INFO devimint::federation: Running DKG...
00:00:09 2023-09-24T05:50:09.461436Z  INFO devimint::federation: DKG successfully complete. Starting consensus...
00:00:09 2023-09-24T05:50:09.472668Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:09 2023-09-24T05:50:09.473114Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:09 2023-09-24T05:50:09.473582Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:10 2023-09-24T05:50:10.502110Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:11 2023-09-24T05:50:11.508496Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:11 2023-09-24T05:50:11.609481Z  INFO devimint: lightning started
00:00:11 2023-09-24T05:50:11.628803Z  INFO devimint: block sync done
00:00:11 2023-09-24T05:50:11.646624Z  INFO devimint: Sending funds from bitcoind amount=100000000 addr="bcrt1qaurp5az5zp5ggc0ssnfduzg6l9xrs6vc96vtsp"
00:00:11 2023-09-24T05:50:11.746793Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:12 2023-09-24T05:50:12.574181Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:12 2023-09-24T05:50:12.574579Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:12 2023-09-24T05:50:12.576135Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:12 2023-09-24T05:50:12.769676Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:13 2023-09-24T05:50:13.580562Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:13 2023-09-24T05:50:13.674587Z  WARN devimint::external: Getting chan info failed e=status: Unknown, message: "edge not found", details: [], metadata: MetadataMap { headers: {"content-type": "application/grpc"} }
00:00:14 2023-09-24T05:50:14.479716Z  WARN devimint::external: Empty chan info edge=ChannelEdge { channel_id: 123145302376448, chan_point: "eb9ced61d3668e6804f4ee25eb089cafd8b3828e23b301f635f1b45da042aada:0", last_update: 1695534614, node1_pub: "02533bc195b8fec8628849849558bf3b8b89a88ad1ea60cb42c1b1407a4efe92bb", node2_pub: "031ee11c8e8f9e583b1bc3e42cc9fc09442dccee68e1f9f7533508be0d3236e277", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1695534614 }) }
00:00:14 2023-09-24T05:50:14.599906Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:14 2023-09-24T05:50:14.600329Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:14 2023-09-24T05:50:14.600678Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:15 2023-09-24T05:50:15.604799Z  INFO devimint::federation: Consensus is running
00:00:15 2023-09-24T05:50:15.605518Z  INFO devimint::federation: copied client configs
00:00:15 2023-09-24T05:50:15.683917Z  WARN devimint::external: Empty chan info edge=ChannelEdge { channel_id: 123145302376448, chan_point: "eb9ced61d3668e6804f4ee25eb089cafd8b3828e23b301f635f1b45da042aada:0", last_update: 1695534614, node1_pub: "02533bc195b8fec8628849849558bf3b8b89a88ad1ea60cb42c1b1407a4efe92bb", node2_pub: "031ee11c8e8f9e583b1bc3e42cc9fc09442dccee68e1f9f7533508be0d3236e277", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1695534614 }) }
00:00:17 2023-09-24T05:50:17.300519Z  INFO devimint: gateways started
00:00:17 2023-09-24T05:50:17.300566Z  INFO devimint: federation and gateways started
00:00:17 2023-09-24T05:50:17.301325Z  INFO devimint: Joining federation with the main client
00:00:17 2023-09-24T05:50:17.559764Z  INFO devimint: Generating first epoch
00:00:17 2023-09-24T05:50:17.581582Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:17 2023-09-24T05:50:17.945784Z  INFO devimint: await gateways registered
00:00:18 2023-09-24T05:50:18.098159Z  INFO devimint: gateways registered
00:00:18 2023-09-24T05:50:18.296276Z  INFO devimint::federation: Using cln gateway
00:00:18 2023-09-24T05:50:18.296325Z  INFO devimint: starting dev federation took 17.320493224s
00:00:18 2023-09-24T05:50:18.352357Z  INFO devimint: Testing load last epoch with admin client
00:00:18 2023-09-24T05:50:18.816845Z  INFO devimint::federation: Pegging-in gateway funds amount=99999
00:00:18 2023-09-24T05:50:18.881780Z  INFO devimint: Sending funds from bitcoind amount=99999 addr="bcrt1q56m50ja4rn8daseyzxgju78rtmtxlph43uraqnuqm2eksr8mhx8sfnrny2"
00:00:18 2023-09-24T05:50:18.904842Z  INFO devimint: Mining bitcoin blocks block_num=21
00:00:25 2023-09-24T05:50:25.529474Z  INFO devimint: Testing LND can pay CLN directly
00:00:25 2023-09-24T05:50:25.876139Z  INFO devimint: Testing CLN can pay LND directly
00:00:26 2023-09-24T05:50:26.416617Z  INFO devimint: Testing Client
00:00:26 2023-09-24T05:50:26.416655Z  INFO devimint: Testing reissuing e-cash
00:00:26 2023-09-24T05:50:26.635181Z  INFO devimint::federation: Peg-in amount=420
00:00:26 2023-09-24T05:50:26.842073Z  INFO devimint: Sending funds from bitcoind amount=420 addr="bcrt1qmqljsdjed0pzzvxrne4vk6nvqx0w8danffew20nupnfv4yqa54pq3xwhpv"
00:00:26 2023-09-24T05:50:26.865857Z  INFO devimint: Mining bitcoin blocks block_num=21
00:00:32 2023-09-24T05:50:32.422299Z  INFO devimint: Testing backup&restore
00:00:39 2023-09-24T05:50:39.288065Z  INFO devimint: Testing spending from client
00:00:42 2023-09-24T05:50:42.355289Z  INFO devimint: Testing reissuing e-cash after spending
00:00:45 2023-09-24T05:50:45.053841Z  INFO devimint: Testing reissuing e-cash via module commands
00:00:47 2023-09-24T05:50:47.521618Z  INFO devimint: Testing fedimint-cli pays LND via CLN gateway
00:00:47 2023-09-24T05:50:47.685189Z  INFO devimint::federation: Using cln gateway
00:00:54 2023-09-24T05:50:54.593575Z  INFO devimint: Testing receiving e-cash notes
00:00:57 2023-09-24T05:50:57.173464Z  INFO devimint: Testing LND gateway
00:00:57 2023-09-24T05:50:57.339678Z  INFO devimint::federation: Using lnd gateway
00:00:57 2023-09-24T05:50:57.339741Z  INFO devimint: Testing outgoing payment from client to CLN via LND gateway
00:01:01 2023-09-24T05:51:01.543303Z  INFO devimint: Testing incoming payment from CLN to client via LND gateway
00:01:05 2023-09-24T05:51:05.601782Z  INFO devimint: Testing receiving ecash notes
00:01:08 2023-09-24T05:51:08.152736Z  INFO devimint: Testing client deposit
00:01:08 2023-09-24T05:51:08.288608Z  INFO devimint::federation: Peg-in amount=100000
00:01:08 2023-09-24T05:51:08.424861Z  INFO devimint: Sending funds from bitcoind amount=100000 addr="bcrt1qmy5r5fny8frkur72tt0n2pdk8dltwyjepsmfxvx8vmy47v00jxyqagcpns"
00:01:08 2023-09-24T05:51:08.440564Z  INFO devimint: Mining bitcoin blocks block_num=21
00:01:13 2023-09-24T05:51:13.371210Z  INFO devimint: Testing client withdraw
00:01:15 2023-09-24T05:51:15.526812Z  INFO devimint: sending SIGKILL to faucet and waiting for it to exit
00:01:15 2023-09-24T05:51:15.528265Z  INFO devimint: sending SIGKILL to esplora and waiting for it to exit
00:01:15 2023-09-24T05:51:15.529476Z  INFO devimint: sending SIGKILL to electrs and waiting for it to exit
00:01:15 2023-09-24T05:51:15.530854Z  INFO devimint: sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:01:15 2023-09-24T05:51:15.537038Z  INFO devimint: sending SIGKILL to gatewayd-cln and waiting for it to exit
00:01:15 2023-09-24T05:51:15.542279Z  INFO devimint: sending SIGKILL to fedimintd-0 and waiting for it to exit
00:01:15 2023-09-24T05:51:15.546873Z  INFO devimint: sending SIGKILL to fedimintd-1 and waiting for it to exit
00:01:15 2023-09-24T05:51:15.551355Z  INFO devimint: sending SIGKILL to fedimintd-2 and waiting for it to exit
00:01:15 2023-09-24T05:51:15.555404Z  INFO devimint: sending SIGKILL to fedimintd-3 and waiting for it to exit
00:01:15 2023-09-24T05:51:15.560273Z  INFO devimint: sending SIGKILL to lnd and waiting for it to exit
00:01:15 2023-09-24T05:51:15.565776Z  INFO devimint: sending SIGTERM to lightningd and waiting for it to exit
00:01:15 2023-09-24T05:51:15.566498Z  INFO devimint: sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: devimint_cli_test
## START: latency_test
00:00:00 Setting up env variables in /tmp/nix-shell.mCrVBQ/nix-shell.sMipC1/fm-twgP
00:00:00     Finished dev [unoptimized + debuginfo] target(s) in 0.22s
00:00:00 2023-09-24T05:49:39.711555Z  INFO devimint: Test setup in "/tmp/nix-shell.mCrVBQ/nix-shell.sMipC1/fm-twgP/cfg"
00:00:00 2023-09-24T05:49:39.712650Z  WARN devimint: Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:03 2023-09-24T05:49:42.318704Z  INFO devimint: electrs started
00:00:03 2023-09-24T05:49:42.319736Z  INFO devimint: esplora started
00:00:03 2023-09-24T05:49:42.319787Z  INFO devimint::federation: fedimintd-2 started
00:00:03 2023-09-24T05:49:42.322299Z  INFO devimint::federation: fedimintd-3 started
00:00:03 2023-09-24T05:49:42.322981Z  INFO devimint::federation: fedimintd-1 started
00:00:03 2023-09-24T05:49:42.324071Z  INFO devimint::federation: fedimintd-0 started
00:00:03 2023-09-24T05:49:42.324922Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:04 2023-09-24T05:49:43.328793Z  INFO devimint::federation: Connected to 0
00:00:04 2023-09-24T05:49:43.330673Z  INFO devimint::federation: Connected to 1
00:00:04 2023-09-24T05:49:43.332553Z  INFO devimint::federation: Connected to 2
00:00:04 2023-09-24T05:49:43.334200Z  INFO devimint::federation: Connected to 3
00:00:04 2023-09-24T05:49:43.343133Z  INFO devimint::federation: calling set_config_gen_connections for 1 random-6uXtU1
00:00:04 2023-09-24T05:49:43.351126Z  INFO devimint::federation: calling set_config_gen_connections for 2 random-Hf68y2
00:00:04 2023-09-24T05:49:43.359198Z  INFO devimint::federation: calling set_config_gen_connections for 3 random-5E5bQ3
00:00:04 2023-09-24T05:49:43.387996Z  INFO devimint::federation: Running DKG...
00:00:06 2023-09-24T05:49:45.554337Z  INFO devimint::federation: DKG successfully complete. Starting consensus...
00:00:06 2023-09-24T05:49:45.561384Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:06 2023-09-24T05:49:45.561586Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:06 2023-09-24T05:49:45.561797Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:07 2023-09-24T05:49:46.575565Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:07 2023-09-24T05:49:46.575829Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:07 2023-09-24T05:49:46.576104Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:07 2023-09-24T05:49:46.766506Z  INFO devimint: lightning started
00:00:08 2023-09-24T05:49:47.186582Z  INFO devimint: block sync done
00:00:08 2023-09-24T05:49:47.193693Z  INFO devimint: Sending funds from bitcoind amount=100000000 addr="bcrt1q5d9639r0aqylqlhlwe3s8wmy4pqw2xpltx40cn"
00:00:08 2023-09-24T05:49:47.211957Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:08 2023-09-24T05:49:47.586629Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:08 2023-09-24T05:49:47.586852Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:08 2023-09-24T05:49:47.587087Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:09 2023-09-24T05:49:48.598951Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:09 2023-09-24T05:49:48.599225Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:09 2023-09-24T05:49:48.599526Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:09 2023-09-24T05:49:48.661450Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:10 2023-09-24T05:49:49.601643Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:11 2023-09-24T05:49:50.091774Z  WARN devimint::external: Empty chan info edge=ChannelEdge { channel_id: 123145302376449, chan_point: "320556a575dc6b1ac4834c45ad5b902dc32e57c0b43c1ec8b410051bd86315d6:1", last_update: 1695534589, node1_pub: "023e671e1e16b3724dbb4591625612a9498c21277fb80919d34daf9042dd2357a7", node2_pub: "032d6cf39933dfb442a8ba7a45d4d705bd88612fb9d6e3109116ce90a27e19f442", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1695534589 }) }
00:00:11 2023-09-24T05:49:50.605850Z  INFO devimint::federation: Consensus is running
00:00:11 2023-09-24T05:49:50.606214Z  INFO devimint::federation: copied client configs
00:00:12 2023-09-24T05:49:51.295284Z  WARN devimint::external: Empty chan info edge=ChannelEdge { channel_id: 123145302376449, chan_point: "320556a575dc6b1ac4834c45ad5b902dc32e57c0test run 3
test run 4
test run 5
test run 6
test run 7
test run 8
test run 9
test run 10
test run 1
./scripts/tests/test-ci-all.sh
Pre-building workspace...
 Downloading crates ...
  Downloaded fs-lock v0.1.0
  Downloaded deranged v0.3.8
  Downloaded aleph-bft-rmc v0.6.1
  Downloaded tracing-chrome v0.7.1
  Downloaded tracing-test-macro v0.2.4
  Downloaded byte-slice-cast v1.2.2
  Downloaded lightning-persister v0.0.115
  Downloaded convert_case v0.4.0
  Downloaded bdk-macros v0.6.0
  Downloaded aleph-bft-types v0.8.1
  Downloaded dirs v5.0.1
  Downloaded wasm-bindgen-test v0.3.34
  Downloaded impl-trait-for-tuples v0.2.2
  Downloaded assert_matches v1.5.0
  Downloaded colorchoice v1.0.0
  Downloaded synom v0.11.3
  Downloaded lightning-transaction-sync v0.0.115
  Downloaded anstream v0.5.0
  Downloaded unicode-xid v0.0.4
  Downloaded bit-vec v0.6.3
  Downloaded anstyle-parse v0.2.1
  Downloaded console-api v0.5.0
  Downloaded clap_complete v4.4.1
  Downloaded opentelemetry v0.20.0
  Downloaded aleph-bft v0.20.5
  Downloaded bitcoin_hashes v0.12.0
  Downloaded parity-scale-codec-derive v3.6.5
  Downloaded bitcoin-private v0.1.0
  Downloaded bstr v1.6.2
  Downloaded tracing-test v0.2.4
  Downloaded option-ext v0.2.0
  Downloaded urlencoding v2.1.3
  Downloaded jsonrpsee-types v0.16.3
  Downloaded time-core v0.1.1
  Downloaded test-log v0.2.12
  Downloaded scoped-tls v1.0.1
  Downloaded memoffset v0.7.1
  Downloaded bitcoin v0.30.1
  Downloaded esplora-client v0.4.0
  Downloaded quote v0.3.15
  Downloaded utf8parse v0.2.1
  Downloaded threadpool v1.8.1
  Downloaded instant v0.1.12
  Downloaded init_with v1.1.0
  Downloaded fallible-streaming-iterator v0.1.9
  Downloaded integer-encoding v3.0.4
  Downloaded lightning-rapid-gossip-sync v0.0.115
  Downloaded hex_lit v0.1.1
  Downloaded rand_derive v0.5.0
  Downloaded pem v1.1.1
  Downloaded jsonrpsee v0.16.3
  Downloaded async-channel v1.9.0
  Downloaded wasm-bindgen-test-macro v0.3.34
  Downloaded dirs-sys v0.4.1
  Downloaded crossbeam-deque v0.8.3
  Downloaded fallible-iterator v0.2.0
  Downloaded fs4 v0.6.6
  Downloaded proc-macro-crate v1.3.1
  Downloaded opentelemetry-semantic-conventions v0.12.0
  Downloaded memoffset v0.9.0
  Downloaded concurrent-queue v2.2.0
  Downloaded time-macros v0.2.14
  Downloaded rustc_version v0.4.0
  Downloaded semver v1.0.18
  Downloaded lightning-net-tokio v0.0.115
  Downloaded aleph-bft-crypto v0.6.0
  Downloaded ordered-float v2.10.0
  Downloaded lightning-background-processor v0.0.115
  Downloaded arrayvec v0.7.4
  Downloaded ordered-float v3.9.1
  Downloaded globset v0.4.13
  Downloaded crc32fast v1.3.2
  Downloaded rcgen v0.10.0
  Downloaded fs2 v0.4.3
  Downloaded toml_datetime v0.6.3
  Downloaded parking_lot_core v0.8.6
  Downloaded yasna v0.5.2
  Downloaded hashlink v0.8.4
  Downloaded thrift v0.17.0
  Downloaded derivative v2.2.0
  Downloaded iana-time-zone v0.1.57
  Downloaded parking_lot v0.11.2
  Downloaded crossbeam-utils v0.8.16
  Downloaded reed-solomon-erasure v5.0.3
  Downloaded spin v0.9.8
  Downloaded ahash v0.7.6
  Downloaded anstyle-query v1.0.0
  Downloaded jsonrpsee-core v0.16.3
  Downloaded derive_more v0.99.17
  Downloaded jsonrpsee-server v0.16.3
  Downloaded syn v0.11.11
  Downloaded flate2 v1.0.27
  Downloaded crossbeam-epoch v0.9.15
  Downloaded console-subscriber v0.1.10
  Downloaded secp256k1 v0.27.0
  Downloaded opentelemetry_api v0.20.0
  Downloaded parity-scale-codec v3.6.5
  Downloaded prometheus v0.13.3
  Downloaded rayon-core v1.11.0
  Downloaded crossbeam-channel v0.5.8
  Downloaded opentelemetry_sdk v0.20.0
  Downloaded lightning-invoice v0.23.0
  Downloaded toml_edit v0.19.15
  Downloaded bip39 v2.0.0
  Downloaded time v0.3.28
  Downloaded libm v0.2.7
  Downloaded rusqlite v0.28.0
  Downloaded tracing-opentelemetry v0.20.0
  Downloaded opentelemetry-jaeger v0.19.0
  Downloaded protobuf v2.28.0
  Downloaded rayon v1.7.0
  Downloaded winnow v0.5.15
  Downloaded chrono v0.4.30
  Downloaded bdk v0.28.2
  Downloaded nix v0.26.4
  Downloaded fedimint-hbbft v0.1.0
  Downloaded hdrhistogram v7.5.2
  Downloaded console_error_panic_hook v0.1.7
  Downloaded lightning v0.0.115
  Downloaded secp256k1-sys v0.8.1
  Downloaded libsqlite3-sys v0.25.2
   Compiling ln-gateway v0.1.0 (/home/nix/fedimint/gateway/ln-gateway)
   Compiling fedimint-testing v0.1.0 (/home/nix/fedimint/fedimint-testing)
   Compiling gateway-cli v0.1.0 (/home/nix/fedimint/gateway/cli)
   Compiling fedimint-dbtool v0.1.0 (/home/nix/fedimint/fedimint-dbtool)
   Compiling devimint v0.1.0 (/home/nix/fedimint/devimint)
   Compiling fedimint-server v0.1.0 (/home/nix/fedimint/fedimint-server)
   Compiling fedimint-dummy-tests v0.1.0 (/home/nix/fedimint/modules/fedimint-dummy-tests)
   Compiling fedimint-wallet-tests v0.1.0 (/home/nix/fedimint/modules/fedimint-wallet-tests)
   Compiling fedimint-wallet-server v0.1.0 (/home/nix/fedimint/modules/fedimint-wallet-server)
   Compiling fedimint-mint-server v0.1.0 (/home/nix/fedimint/modules/fedimint-mint-server)
   Compiling fedimint-load-test-tool v0.1.0 (/home/nix/fedimint/fedimint-load-test-tool)
   Compiling fedimint-mint-tests v0.1.0 (/home/nix/fedimint/modules/fedimint-mint-tests)
   Compiling fedimint-ln-server v0.1.0 (/home/nix/fedimint/modules/fedimint-ln-server)
   Compiling fedimint-ln-tests v0.1.0 (/home/nix/fedimint/modules/fedimint-ln-tests)
    Finished dev [unoptimized + debuginfo] target(s) in 36.82s
Pre-building tests...
    Finished test [unoptimized + debuginfo] target(s) in 0.22s
## Starting all tests in parallel...
## START: always_success_test
## COMPLETE: always_success_test
## START: lightning_reconnect_test
00:00:00 Setting up env variables in /tmp/nix-shell.15Fnaw/nix-shell.HRaYzL/fm-0g23
00:00:01     Finished dev [unoptimized + debuginfo] target(s) in 0.39s
00:00:01 2023-09-24T05:56:14.408103Z  INFO devimint: Test setup in "/tmp/nix-shell.15Fnaw/nix-shell.HRaYzL/fm-0g23/cfg"
00:00:01 2023-09-24T05:56:14.409662Z  WARN devimint: Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:04 2023-09-24T05:56:17.422521Z  INFO devimint: electrs started
00:00:04 2023-09-24T05:56:17.423878Z  INFO devimint: esplora started
00:00:04 2023-09-24T05:56:17.423950Z  INFO devimint::federation: fedimintd-0 started
00:00:04 2023-09-24T05:56:17.428600Z  INFO devimint::federation: fedimintd-1 started
00:00:04 2023-09-24T05:56:17.432631Z  INFO devimint::federation: fedimintd-2 started
00:00:04 2023-09-24T05:56:17.444616Z  INFO devimint::federation: fedimintd-3 started
00:00:04 2023-09-24T05:56:17.447453Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:05 2023-09-24T05:56:18.451109Z  INFO devimint::federation: Connected to 0
00:00:05 2023-09-24T05:56:18.452919Z  INFO devimint::federation: Connected to 1
00:00:05 2023-09-24T05:56:18.454631Z  INFO devimint::federation: Connected to 2
00:00:05 2023-09-24T05:56:18.456343Z  INFO devimint::federation: Connected to 3
00:00:05 2023-09-24T05:56:18.464780Z  INFO devimint::federation: calling set_config_gen_connections for 1 random-swzif1
00:00:05 2023-09-24T05:56:18.472036Z  INFO devimint::federation: calling set_config_gen_connections for 2 random-TVvdh2
00:00:05 2023-09-24T05:56:18.479878Z  INFO devimint::federation: calling set_config_gen_connections for 3 random-1yXIj3
00:00:05 2023-09-24T05:56:18.507233Z  INFO devimint::federation: Running DKG...
00:00:07 2023-09-24T05:56:20.588999Z  INFO devimint::federation: DKG successfully complete. Starting consensus...
00:00:07 2023-09-24T05:56:20.596835Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:07 2023-09-24T05:56:20.597070Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:07 2023-09-24T05:56:20.597326Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:08 2023-09-24T05:56:21.608443Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:08 2023-09-24T05:56:21.608691Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:08 2023-09-24T05:56:21.608954Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:08 2023-09-24T05:56:21.890281Z  INFO devimint: lightning started
00:00:09 2023-09-24T05:56:22.326832Z  INFO devimint: block sync done
00:00:09 2023-09-24T05:56:22.343940Z  INFO devimint: Sending funds from bitcoind amount=100000000 addr="bcrt1qesqenzypjfsg30tfm49gvzpypeehuuku9zed5p"
00:00:09 2023-09-24T05:56:22.407140Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:09 2023-09-24T05:56:22.648606Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:10 2023-09-24T05:56:23.666489Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:11 2023-09-24T05:56:24.044219Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:11 2023-09-24T05:56:24.669162Z  INFO devimint::federation: Consensus is running
00:00:11 2023-09-24T05:56:24.672092Z  INFO devimint::federation: copied client configs
00:00:11 2023-09-24T05:56:24.690412Z  WARN devimint::external: Getting chan info failed e=status: Unknown, message: "edge not found", details: [], metadata: MetadataMap { headers: {"content-type": "application/grpc"} }
00:00:12 2023-09-24T05:56:25.498985Z  WARN devimint::external: Empty chan info edge=ChannelEdge { channel_id: 123145302376449, chan_point: "0f2f5b426d824d9c67947425eb2388570f1590f3b2ef168bbf2c529cc66bafe3:1", last_update: 1695534985, node1_pub: "02a06fcb42cef190cfc230731ae1bae954bbe1f58fec30d57f7ce57ac2f14d68fd", node2_pub: "037199ba3b06cf6d308c9d8dbac22071f505a4339465be5d9145ea3d65e29af454", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1695534985 }) }
00:00:13 2023-09-24T05:56:26.711123Z  WARN devimint::external: Empty chan info edge=ChannelEdge { channel_id: 123145302376449, chan_point: "0f2f5b426d824d9c67947425eb2388570f1590f3b2ef168bbf2c529cc66bafe3:1", last_update: 1695534985, node1_pub: "02a06fcb42cef190cfc230731ae1bae954bbe1f58fec30d57f7ce57ac2f14d68fd", node2_pub: "037199ba3b06cf6d308c9d8dbac22071f505a4339465be5d9145ea3d65e29af454", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1695534985 }) }
00:00:15 2023-09-24T05:56:28.320341Z  INFO devimint: gateways started
00:00:15 2023-09-24T05:56:28.320387Z  INFO devimint: federation and gateways started
00:00:15 2023-09-24T05:56:28.321189Z  INFO devimint: Joining federation with the main client
00:00:15 2023-09-24T05:56:28.573935Z  INFO devimint: Generating first epoch
00:00:15 2023-09-24T05:56:28.595516Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:15 2023-09-24T05:56:28.969916Z  INFO devimint: await gateways registered
00:00:16 2023-09-24T05:56:29.152530Z  INFO devimint: gateways registered
00:00:16 2023-09-24T05:56:29.355561Z  INFO devimint::federation: Using cln gateway
00:00:16 2023-09-24T05:56:29.355608Z  INFO devimint: starting dev federation took 14.947352902s
00:00:16 2023-09-24T05:56:29.355633Z  INFO devimint: Pegging-in both gateways
00:00:16 2023-09-24T05:56:29.355653Z  INFO devimint::federation: Pegging-in gateway funds amount=99999
00:00:16 2023-09-24T05:56:29.412189Z  INFO devimint: Sending funds from bitcoind amount=99999 addr="bcrt1qq7mq2974p35flhj8fuk0gv2fhm7m8pg5s8w49trgdv7kutj4z09sgjwv87"
00:00:16 2023-09-24T05:56:29.436172Z  INFO devimint: Mining bitcoin blocks block_num=21
00:00:25 2023-09-24T05:56:38.620194Z  INFO devimint::federation: Pegging-in gateway funds amount=99999
00:00:25 2023-09-24T05:56:38.693587Z  INFO devimint: Sending funds from bitcoind amount=99999 addr="bcrt1q93vtpcum027kgtel6gje3smxu0m2uc58gglprlt8w8a0xkdqd9tqeu49r5"
00:00:25 2023-09-24T05:56:38.768187Z  INFO devimint: Mining bitcoin blocks block_num=21
00:00:35 2023-09-24T05:56:48.932911Z  INFO devimint: Stopping all lightning nodes
00:00:35 2023-09-24T05:56:48.973606Z  INFO devimint: Stopping lightning node
00:00:35 2023-09-24T05:56:48.977798Z  INFO devimint: sending SIGTERM to lightningd and waiting for it to exit
00:00:36 2023-09-24T05:56:49.049162Z  INFO devimint: Stopping lightning node
00:00:36 2023-09-24T05:56:49.049234Z  INFO devimint: sending SIGTERM to lnd and waiting for it to exit
00:00:36 2023-09-24T05:56:49.103713Z  INFO devimint: Restarting both lightning nodes...
00:00:36 2023-09-24T05:56:49.519980Z  INFO devimint::external: lnd_connect failed: ConnectError { internal: Connect { address: "http://localhost:11009", error: tonic::transport::Error(Transport, hyper::Error(Connect, ConnectError("tcp connect error", Os { code: 111, kind: ConnectionRefused, message: "Connection refused" }))) } }
00:00:36 2023-09-24T05:56:49.531895Z  INFO devimint::external: lnd_connect failed: ConnectError { internal: Connect { address: "http://localhost:11009", error: tonic::transport::Error(Transport, hyper::Error(Connect, ConnectError("tcp connect error", Os { code: 111, kind: ConnectionRefused, message: "Connection refused" }))) } }
00:00:38 2023-09-24T05:56:51.168484Z  INFO devimint: Retrying info...
00:00:42 2023-09-24T05:56:55.526487Z  INFO devimint::federation: Using cln gateway
00:00:42 2023-09-24T05:56:55.526543Z  INFO devimint: Creating invoice....
00:00:46 2023-09-24T05:56:59.485191Z  INFO devimint: sending SIGKILL to gatewayd-cln and waiting for it to exit
00:00:46 2023-09-24T05:56:59.853946Z  INFO devimint::federation: Using lnd gateway
00:00:46 2023-09-24T05:56:59.853992Z  INFO devimint: Creating invoice....
00:00:50 2023-09-24T05:57:03.553845Z  INFO devimint: sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:00:50 2023-09-24T05:57:03.562720Z  INFO devimint: lightning_reconnect_test: success
00:00:50 2023-09-24T05:57:03.562814Z  INFO devimint: sending SIGKILL to lnd and waiting for it to exit
00:00:50 2023-09-24T05:57:03.569463Z  INFO devimint: sending SIGTERM to lightningd and waiting for it to exit
00:00:50 2023-09-24T05:57:03.570306Z  INFO devimint: sending SIGKILL to faucet and waiting for it to exit
00:00:50 2023-09-24T05:57:03.571706Z  INFO devimint: sending SIGKILL to esplora and waiting for it to exit
00:00:50 2023-09-24T05:57:03.573431Z  INFO devimint: sending SIGKILL to electrs and waiting for it to exit
00:00:50 2023-09-24T05:57:03.574283Z  INFO devimint: sending SIGKILL to fedimintd-0 and waiting for it to exit
00:00:50 2023-09-24T05:57:03.580730Z  INFO devimint: sending SIGKILL to fedimintd-1 and waiting for it to exit
00:00:50 2023-09-24T05:57:03.586652Z  INFO devimint: sending SIGKILL to fedimintd-2 and waiting for it to exit
00:00:50 2023-09-24T05:57:03.596251Z  INFO devimint: sending SIGKILL to fedimintd-3 and waiting for it to exit
00:00:50 2023-09-24T05:57:03.602936Z  INFO devimint: sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: lightning_reconnect_test
## START: gateway_reboot_test
00:00:00 Setting up env variables in /tmp/nix-shell.15Fnaw/nix-shell.HRaYzL/fm-5ChZ
00:00:00     Finished dev [unoptimized + debuginfo] target(s) in 0.58s
00:00:00 2023-09-24T05:56:19.963506Z  INFO devimint: Test setup in "/tmp/nix-shell.15Fnaw/nix-shell.HRaYzL/fm-5ChZ/cfg"
00:00:00 2023-09-24T05:56:19.964560Z  WARN devimint: Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:04 2023-09-24T05:56:23.274374Z  INFO devimint: electrs started
00:00:04 2023-09-24T05:56:23.276115Z  INFO devimint: esplora started
00:00:04 2023-09-24T05:56:23.276545Z  INFO devimint::federation: fedimintd-0 started
00:00:04 2023-09-24T05:56:23.282074Z  INFO devimint::federation: fedimintd-1 started
00:00:04 2023-09-24T05:56:23.290506Z  INFO devimint::federation: fedimintd-3 started
00:00:04 2023-09-24T05:56:23.294628Z  INFO devimint::federation: fedimintd-2 started
00:00:04 2023-09-24T05:56:23.309092Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:05 2023-09-24T05:56:24.319425Z  INFO devimint::federation: Connected to 0
00:00:05 2023-09-24T05:56:24.336625Z  INFO devimint::federation: Connected to 1
00:00:05 2023-09-24T05:56:24.353438Z  INFO devimint::federation: Connected to 2
00:00:05 2023-09-24T05:56:24.364387Z  INFO devimint::federation: Connected to 3
00:00:05 2023-09-24T05:56:24.412271Z  INFO devimint::federation: calling set_config_gen_connections for 1 random-NUDeA1
00:00:05 2023-09-24T05:56:24.429309Z  INFO devimint::federation: calling set_config_gen_connections for 2 random-sH8cB2
00:00:05 2023-09-24T05:56:24.450860Z  INFO devimint::federation: calling set_config_gen_connections for 3 random-UCsVo3
00:00:05 2023-09-24T05:56:24.525458Z  INFO devimint::federation: Running DKG...
00:00:08 2023-09-24T05:56:27.671268Z  INFO devimint::federation: DKG successfully complete. Starting consensus...
00:00:08 2023-09-24T05:56:27.681451Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:08 2023-09-24T05:56:27.681898Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:08 2023-09-24T05:56:27.682347Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:09 2023-09-24T05:56:28.695519Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:09 2023-09-24T05:56:28.695787Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:09 2023-09-24T05:56:28.696108Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:10 2023-09-24T05:56:29.706460Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:10 2023-09-24T05:56:29.706712Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:10 2023-09-24T05:56:29.706974Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:10 2023-09-24T05:56:29.812925Z  INFO devimint: lightning started
00:00:10 2023-09-24T05:56:29.815839Z  INFO devimint: block sync done
00:00:10 2023-09-24T05:56:29.823129Z  INFO devimint: Sending funds from bitcoind amount=100000000 addr="bcrt1qn0u8cwp46ejzrkxcawp9cgml4ulnvh3j4xc36u"
00:00:10 2023-09-24T05:56:29.850031Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:11 2023-09-24T05:56:30.723037Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:11 2023-09-24T05:56:30.723281Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:11 2023-09-24T05:56:30.723552Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:12 2023-09-24T05:56:31.269756Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:12 2023-09-24T05:56:31.733578Z  INFO devimint::federation: Consensus is running
00:00:12 2023-09-24T05:56:31.736357Z  INFO devimint::federation: copied client configs
00:00:13 2023-09-24T05:56:32.589517Z  WARN devimint::external: Getting chan info failed e=status: Unknown, message: "edge not found", details: [], metadata: MetadataMap { headers: {"content-type": "application/grpc"} }
00:00:14 2023-09-24T05:56:33.831492Z  INFO devimint: gateways started
00:00:14 2023-09-24T05:56:33.831535Z  INFO devimint: federation and gateways started
00:00:14 2023-09-24T05:56:33.864184Z  INFO devimint: Joining federation with the main client
00:00:15 2023-09-24T05:56:34.522495Z  INFO devimint: Generating first epoch
00:00:15 2023-09-24T05:56:34.549912Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:16 2023-09-24T05:56:35.322115Z  INFO devimint: await gateways registered
00:00:16 2023-09-24T05:56:35.524634Z  INFO devimint: gateways registered
00:00:16 2023-09-24T05:56:35.800483Z  INFO devimint::federation: Using cln gateway
00:00:16 2023-09-24T05:56:35.800530Z  INFO devimint: starting dev federation took 15.836911328s
00:00:16 2023-09-24T05:56:35.853755Z  INFO devimint: sending SIGKILL to gatewayd-cln and waiting for it to exit
00:00:16 2023-09-24T05:56:35.869422Z  INFO devimint: sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:00:44 2023-09-24T05:57:03.755282Z  INFO devimint: CLN Gateway restarted, with auto-rejoin to federation
00:00:44 2023-09-24T05:57:03.787933Z  INFO devimint: LND Gateway restarted, with auto-rejoin to federation
00:00:44 2023-09-24T05:57:03.788023Z  INFO devimint: gateway_reboot_test: success LOG_DEVIMINT="devimint"
00:00:44 2023-09-24T05:57:03.788065Z  INFO devimint: sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:00:44 2023-09-24T05:57:03.795370Z  INFO devimint: sending SIGKILL to gatewayd-cln and waiting for it to exit
00:00:44 2023-09-24T05:57:03.801735Z  INFO devimint: sending SIGKILL to faucet and waiting for it to exit
00:00:44 2023-09-24T05:57:03.802623Z  INFO devimint: sending SIGKILL to esplora and waiting for it to exit
00:00:44 2023-09-24T05:57:03.803813Z  INFO devimint: sending SIGKILL to electrs and waiting for it to exit
00:00:44 2023-09-24T05:57:03.804698Z  INFO devimint: sending SIGKILL to fedimintd-0 and waiting for it to exit
00:00:44 2023-09-24T05:57:03.810373Z  INFO devimint: sending SIGKILL to fedimintd-1 and waiting for it to exit
00:00:44 2023-09-24T05:57:03.816273Z  INFO devimint: sending SIGKILL to fedimintd-2 and waiting for it to exit
00:00:44 2023-09-24T05:57:03.823607Z  INFO devimint: sending SIGKILL to fedimintd-3 and waiting for it to exit
00:00:44 2023-09-24T05:57:03.828201Z  INFO devimint: sending SIGKILL to lnd and waiting for it to exit
00:00:44 2023-09-24T05:57:03.834231Z  INFO devimint: sending SIGTERM to lightningd and waiting for it to exit
00:00:44 2023-09-24T05:57:03.835139Z  INFO devimint: sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: gateway_reboot_test
## START: load_test_tool_test
00:00:00 Setting up env variables in /tmp/nix-shell.15Fnaw/nix-shell.HRaYzL/fm-N7yo
00:00:00     Finished dev [unoptimized + debuginfo] target(s) in 0.36s
00:00:00 2023-09-24T05:56:33.796325Z  INFO devimint: Test setup in "/tmp/nix-shell.15Fnaw/nix-shell.HRaYzL/fm-N7yo/cfg"
00:00:00 2023-09-24T05:56:33.816464Z  WARN devimint: Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:04 2023-09-24T05:56:37.179406Z  INFO devimint: electrs started
00:00:04 2023-09-24T05:56:37.180566Z  INFO devimint: esplora started
00:00:04 2023-09-24T05:56:37.180617Z  INFO devimint::federation: fedimintd-0 started
00:00:04 2023-09-24T05:56:37.185074Z  INFO devimint::federation: fedimintd-3 started
00:00:04 2023-09-24T05:56:37.191346Z  INFO devimint::federation: fedimintd-1 started
00:00:04 2023-09-24T05:56:37.193197Z  INFO devimint::federation: fedimintd-2 started
00:00:04 2023-09-24T05:56:37.195388Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:05 2023-09-24T05:56:38.199141Z  INFO devimint::federation: Connected to 0
00:00:05 2023-09-24T05:56:38.200697Z  INFO devimint::federation: Connected to 1
00:00:05 2023-09-24T05:56:38.202247Z  INFO devimint::federation: Connected to 2
00:00:05 2023-09-24T05:56:38.203966Z  INFO devimint::federation: Connected to 3
00:00:05 2023-09-24T05:56:38.212579Z  INFO devimint::federation: calling set_config_gen_connections for 1 random-Qbzcr1
00:00:05 2023-09-24T05:56:38.220440Z  INFO devimint::federation: calling set_config_gen_connections for 2 random-C16Jd2
00:00:05 2023-09-24T05:56:38.228521Z  INFO devimint::federation: calling set_config_gen_connections for 3 random-cmkPL3
00:00:05 2023-09-24T05:56:38.256522Z  INFO devimint::federation: Running DKG...
00:00:08 2023-09-24T05:56:41.342282Z  INFO devimint::federation: DKG successfully complete. Starting consensus...
00:00:08 2023-09-24T05:56:41.358578Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:08 2023-09-24T05:56:41.358986Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:08 2023-09-24T05:56:41.364159Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:08 2023-09-24T05:56:41.641448Z  INFO devimint: lightning started
00:00:09 2023-09-24T05:56:42.391339Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:09 2023-09-24T05:56:42.391730Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:09 2023-09-24T05:56:42.392006Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:09 2023-09-24T05:56:42.875034Z  INFO devimint: block sync done
00:00:09 2023-09-24T05:56:42.879204Z  INFO devimint: Sending funds from bitcoind amount=100000000 addr="bcrt1q2khxmt8l4mnw9qka37q022fdwueyvj6lp5d5xl"
00:00:09 2023-09-24T05:56:42.892993Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:10 2023-09-24T05:56:43.213714Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:10 2023-09-24T05:56:43.405676Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:10 2023-09-24T05:56:43.405920Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:10 2023-09-24T05:56:43.406203Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:11 2023-09-24T05:56:44.439805Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:12 2023-09-24T05:56:45.445973Z  INFO devimint::federation: Consensus is running
00:00:12 2023-09-24T05:56:45.450435Z  INFO devimint::federation: copied client configs
00:00:12 2023-09-24T05:56:45.736617Z  WARN devimint::external: Empty chan info edge=ChannelEdge { channel_id: 123145302376449, chan_point: "c81e184a2f88671896517fb6a5f06dadb7c535c5b35f523462927ab9d07b6833:1", last_update: 1695535005, node1_pub: "02878fc52a63496eaba3846ac9402d92b4e9006f6d5271f8633d98f3a240b29637", node2_pub: "03d660a34665dc11fe4f65f8c08ec193243f28dabc64e2aba71ec7dff7adb226c2", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1695535005 }) }
00:00:14 2023-09-24T05:56:47.348503Z  INFO devimint: gateways started
00:00:14 2023-09-24T05:56:47.348552Z  INFO devimint: federation and gateways started
00:00:14 2023-09-24T05:56:47.355771Z  INFO devimint: Joining federation with the main client
00:00:14 2023-09-24T05:56:47.836368Z  INFO devimint: Generating first epoch
00:00:14 2023-09-24T05:56:47.877099Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:15 2023-09-24T05:56:48.391108Z  INFO devimint: await gateways registered
00:00:15 2023-09-24T05:56:48.580243Z  INFO devimint: gateways registered
00:00:15 2023-09-24T05:56:48.823995Z  INFO devimint::federation: Using cln gateway
00:00:15 2023-09-24T05:56:48.824044Z  INFO devimint: starting dev federation took 15.027571991s
00:00:15 2023-09-24T05:56:48.824073Z  INFO devimint::federation: Peg-in amount=10000
00:00:16 2023-09-24T05:56:49.021725Z  INFO devimint: Sending funds from bitcoind amount=10000 addr="bcrt1qm7j4ef3d3emgptlwuzdjwxlf9r2f4g6eqfdq9eez8lmd0lhfnnrshzc44t"
00:00:16 2023-09-24T05:56:49.037156Z  INFO devimint: Mining bitcoin blocks block_num=21
00:00:34 2 reissue_notes: avg 3.006181985s, median 3.847521474s, max 3.847521474s, min 2.164842496s
00:00:34 1 gateway_pay_invoice: avg 3.797140689s, median 3.797140689s, max 3.797140689s, min 3.797140689s
00:00:44 1 gateway_pay_invoice: avg 3.352489292s, median 3.352489292s, max 3.352489292s, min 3.352489292s (compared to previous: avg: -11.72%, median: -11.72%, max: -11.72%, min: -11.72%)
00:00:44 2 reissue_notes: avg 2.070011603s, median 2.231549713s, max 2.231549713s, min 1.908473494s (compared to previous: avg: -31.14%, median: -42.01%, max: -42.01%, min: -11.83%)
00:00:44 2023-09-24T05:57:17.984122Z  INFO devimint: sending SIGKILL to fedimintd-0 and waiting for it to exit
00:00:44 2023-09-24T05:57:17.995181Z  INFO devimint: sending SIGKILL to fedimintd-1 and waiting for it to exit
00:00:44 2023-09-24T05:57:18.002801Z  INFO devimint: sending SIGKILL to fedimintd-2 and waiting for it to exit
00:00:45 2023-09-24T05:57:18.015747Z  INFO devimint: sending SIGKILL to fedimintd-3 and waiting for it to exit
00:00:45 2023-09-24T05:57:18.032089Z  INFO devimint: sending SIGKILL to gatewayd-cln and waiting for it to exit
00:00:45 2023-09-24T05:57:18.060281Z  INFO devimint: sending SIGTERM to lightningd and waiting for it to exit
00:00:45 2023-09-24T05:57:18.061987Z  INFO devimint: sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:00:45 2023-09-24T05:57:18.068285Z  INFO devimint: sending SIGKILL to lnd and waiting for it to exit
00:00:45 2023-09-24T05:57:18.071202Z  INFO devimint: sending SIGKILL to electrs and waiting for it to exit
00:00:45 2023-09-24T05:57:18.072871Z  INFO devimint: sending SIGKILL to esplora and waiting for it to exit
00:00:45 2023-09-24T05:57:18.076146Z  INFO devimint: sending SIGKILL to bitcoind and waiting for it to exit
00:00:45 2023-09-24T05:57:18.079821Z  INFO devimint: sending SIGKILL to faucet and waiting for it to exit
## COMPLETE: load_test_tool_test
## START: devimint_cli_test
00:00:00 Setting up env variables in /tmp/nix-shell.15Fnaw/nix-shell.HRaYzL/fm-1ZQy
00:00:01     Finished dev [unoptimized + debuginfo] target(s) in 0.48s
00:00:01 2023-09-24T05:56:27.281109Z  INFO devimint: Test setup in "/tmp/nix-shell.15Fnaw/nix-shell.HRaYzL/fm-1ZQy/cfg"
00:00:01 2023-09-24T05:56:27.293201Z  WARN devimint: Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:04 2023-09-24T05:56:30.302978Z  INFO devimint: electrs started
00:00:04 2023-09-24T05:56:30.303956Z  INFO devimint: esplora started
00:00:04 2023-09-24T05:56:30.304032Z  INFO devimint::federation: fedimintd-1 started
00:00:04 2023-09-24T05:56:30.306948Z  INFO devimint::federation: fedimintd-2 started
00:00:04 2023-09-24T05:56:30.307590Z  INFO devimint::federation: fedimintd-3 started
00:00:04 2023-09-24T05:56:30.308106Z  INFO devimint::federation: fedimintd-0 started
00:00:04 2023-09-24T05:56:30.311367Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:05 2023-09-24T05:56:31.314652Z  INFO devimint::federation: Connected to 0
00:00:05 2023-09-24T05:56:31.316340Z  INFO devimint::federation: Connected to 1
00:00:05 2023-09-24T05:56:31.319133Z  INFO devimint::federation: Connected to 2
00:00:05 2023-09-24T05:56:31.322305Z  INFO devimint::federation: Connected to 3
00:00:05 2023-09-24T05:56:31.331180Z  INFO devimint::federation: calling set_config_gen_connections for 1 random-vXPEk1
00:00:05 2023-09-24T05:56:31.338961Z  INFO devimint::federation: calling set_config_gen_connections for 2 random-Gxm122
00:00:05 2023-09-24T05:56:31.347424Z  INFO devimint::federation: calling set_config_gen_connections for 3 random-p1Dfk3
00:00:05 2023-09-24T05:56:31.376616Z  INFO devimint::federation: Running DKG...
00:00:08 2023-09-24T05:56:34.553058Z  INFO devimint::federation: DKG successfully complete. Starting consensus...
00:00:08 2023-09-24T05:56:34.569339Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:08 2023-09-24T05:56:34.784746Z  INFO devimint: lightning started
00:00:09 2023-09-24T05:56:35.588968Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:09 2023-09-24T05:56:35.589373Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:09 2023-09-24T05:56:35.589713Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:10 2023-09-24T05:56:36.128710Z  INFO devimint: block sync done
00:00:10 2023-09-24T05:56:36.146411Z  INFO devimint: Sending funds from bitcoind amount=100000000 addr="bcrt1q3wvrzx6skd0v8m9x83hfd0lf9dfnnyt5hg9ynu"
00:00:10 2023-09-24T05:56:36.169485Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:10 2023-09-24T05:56:36.605008Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:10 2023-09-24T05:56:36.605591Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:11 2023-09-24T05:56:37.619531Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:11 2023-09-24T05:56:37.619957Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:11 2023-09-24T05:56:37.620295Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:11 2023-09-24T05:56:37.626746Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:12 2023-09-24T05:56:38.640249Z  INFO devimint::federation: Consensus is running
00:00:12 2023-09-24T05:56:38.640691Z  INFO devimint::federation: copied client configs
00:00:12 2023-09-24T05:56:38.967092Z  WARN devimint::external: Empty chan info edge=ChannelEdge { channel_id: 123145302376449, chan_point: "a070f183397eda618bac2f2089d6dac5d6509c6018bd083222cd856aceab3640:1", last_update: 1695534998, node1_pub: "032dba4b9a3a6d1bb0257c0e2443173ef5fcdf9461a83b7b0148546bcdfc6c7095", node2_pub: "039ea3adf6e70c5888cc1312665f7f75200db56591d00d5a61781f6d9dbea86776", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1695534998 }) }
00:00:14 2023-09-24T05:56:40.174693Z  WARN devimint::external: Empty chan info edge=ChannelEdge { channel_id: 123145302376449, chan_point: "a070f183397eda618bac2f2089d6dac5d6509c6018bd083222cd856aceab3640:1", last_update: 1695534998, node1_pub: "032dba4b9a3a6d1bb0257c0e2443173ef5fcdf9461a83b7b0148546bcdfc6c7095", node2_pub: "039ea3adf6e70c5888cc1312665f7f75200db56591d00d5a61781f6d9dbea86776", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1695534998 }) }
00:00:15 2023-09-24T05:56:41.788249Z  INFO devimint: gateways started
00:00:15 2023-09-24T05:56:41.788294Z  INFO devimint: federation and gateways started
00:00:15 2023-09-24T05:56:41.789018Z  INFO devimint: Joining federation with the main client
00:00:16 2023-09-24T05:56:42.013698Z  INFO devimint: Generating first epoch
00:00:16 2023-09-24T05:56:42.037218Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:16 2023-09-24T05:56:42.448735Z  INFO devimint: await gateways registered
00:00:16 2023-09-24T05:56:42.652314Z  INFO devimint: gateways registered
00:00:16 2023-09-24T05:56:42.905166Z  INFO devimint::federation: Using cln gateway
00:00:16 2023-09-24T05:56:42.905213Z  INFO devimint: starting dev federation took 15.623950855s
00:00:16 2023-09-24T05:56:42.965304Z  INFO devimint: Testing load last epoch with admin client
00:00:17 2023-09-24T05:56:43.340812Z  INFO devimint::federation: Pegging-in gateway funds amount=99999
00:00:17 2023-09-24T05:56:43.384394Z  INFO devimint: Sending funds from bitcoind amount=99999 addr="bcrt1qxcm92n3klm956sfn3hsnhrcuyvtldmmwc7pgaskc72g0qg9zcpxqq2yhcn"
00:00:17 2023-09-24T05:56:43.402733Z  INFO devimint: Mining bitcoin blocks block_num=21
00:00:24 2023-09-24T05:56:50.026582Z  INFO devimint: Testing LND can pay CLN directly
00:00:24 2023-09-24T05:56:50.422670Z  INFO devimint: Testing CLN can pay LND directly
00:00:24 2023-09-24T05:56:50.966200Z  INFO devimint: Testing Client
00:00:24 2023-09-24T05:56:50.966240Z  INFO devimint: Testing reissuing e-cash
00:00:25 2023-09-24T05:56:51.117075Z  INFO devimint::federation: Peg-in amount=420
00:00:25 2023-09-24T05:56:51.276812Z  INFO devimint: Sending funds from bitcoind amount=420 addr="bcrt1q0g32pm5dl2r4hs5yu4rta4lzkds0f2fh50rkmywga49qkgpqenssqtp0m8"
00:00:25 2023-09-24T05:56:51.293931Z  INFO devimint: Mining bitcoin blocks block_num=21
00:00:31 2023-09-24T05:56:57.525136Z  INFO devimint: Testing backup&restore
00:00:37 2023-09-24T05:57:03.306575Z  INFO devimint: Testing spending from client
00:00:40 2023-09-24T05:57:06.377924Z  INFO devimint: Testing reissuing e-cash after spending
00:00:43 2023-09-24T05:57:09.110490Z  INFO devimint: Testing reissuing e-cash via module commands
00:00:45 2023-09-24T05:57:11.656702Z  INFO devimint: Testing fedimint-cli pays LND via CLN gateway
00:00:45 2023-09-24T05:57:11.826417Z  INFO devimint::federation: Using cln gateway
00:00:53 2023-09-24T05:57:19.123277Z  INFO devimint: Testing receiving e-cash notes
00:00:55 2023-09-24T05:57:21.740405Z  INFO devimint: Testing LND gateway
00:00:55 2023-09-24T05:57:21.920794Z  INFO devimint::federation: Using lnd gateway
00:00:55 2023-09-24T05:57:21.920853Z  INFO devimint: Testing outgoing payment from client to CLN via LND gateway
00:00:59 2023-09-24T05:57:25.998752Z  INFO devimint: Testing incoming payment from CLN to client via LND gateway
00:01:04 2023-09-24T05:57:30.118920Z  INFO devimint: Testing receiving ecash notes
00:01:06 2023-09-24T05:57:32.723110Z  INFO devimint: Testing client deposit
00:01:06 2023-09-24T05:57:32.875124Z  INFO devimint::federation: Peg-in amount=100000
00:01:07 2023-09-24T05:57:33.019767Z  INFO devimint: Sending funds from bitcoind amount=100000 addr="bcrt1qc3c3fnkp5vlj0y7qrfx7ylgyhzle92xk2yz7a8x5rmr7v9scwxms99s2hr"
00:01:07 2023-09-24T05:57:33.034333Z  INFO devimint: Mining bitcoin blocks block_num=21
00:01:12 2023-09-24T05:57:38.957452Z  INFO devimint: Testing client withdraw
00:01:15 2023-09-24T05:57:41.995098Z  INFO devimint: sending SIGKILL to faucet and waiting for it to exit
00:01:15 2023-09-24T05:57:41.996349Z  INFO devimint: sending SIGKILL to esplora and waiting for it to exit
00:01:15 2023-09-24T05:57:41.998365Z  INFO devimint: sending SIGKILL to electrs and waiting for it to exit
00:01:15 2023-09-24T05:57:42.001042Z  INFO devimint: sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:01:16 2023-09-24T05:57:42.011222Z  INFO devimint: sending SIGKILL to gatewayd-cln and waiting for it to exit
00:01:16 2023-09-24T05:57:42.019735Z  INFO devimint: sending SIGKILL to fedimintd-0 and waiting for it to exit
00:01:16 2023-09-24T05:57:42.025766Z  INFO devimint: sending SIGKILL to fedimintd-1 and waiting for it to exit
00:01:16 2023-09-24T05:57:42.032455Z  INFO devimint: sending SIGKILL to fedimintd-2 and waiting for it to exit
00:01:16 2023-09-24T05:57:42.037403Z  INFO devimint: sending SIGKILL to fedimintd-3 and waiting for it to exit
00:01:16 2023-09-24T05:57:42.042873Z  INFO devimint: sending SIGKILL to lnd and waiting for it to exit
00:01:16 2023-09-24T05:57:42.049575Z  INFO devimint: sending SIGTERM to lightningd and waiting for it to exit
00:01:16 2023-09-24T05:57:42.050539Z  INFO devimint: sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: devimint_cli_test
## START: latency_test
00:00:00 Setting up env variables in /tmp/nix-shell.15Fnaw/nix-shell.HRaYzL/fm-vnar
00:00:00     Finished dev [unoptimized + debuginfo] target(s) in 0.23s
00:00:00 2023-09-24T05:56:03.617086Z  INFO devimint: Test setup in "/tmp/nix-shell.15Fnaw/nix-shell.HRaYzL/fm-vnar/cfg"
00:00:00 2023-09-24T05:56:03.618071Z  WARN devimint: Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:03 2023-09-24T05:56:06.044642Z  INFO devimint: electrs started
00:00:03 2023-09-24T05:56:06.045432Z  INFO devimint: esplora started
00:00:03 2023-09-24T05:56:06.045463Z  INFO devimint::federation: fedimintd-0 started
00:00:03 2023-09-24T05:56:06.047341Z  INFO devimint::federation: fedimintd-2 started
00:00:03 2023-09-24T05:56:06.047838Z  INFO devimint::federation: fedimintd-1 started
00:00:03 2023-09-24T05:56:06.048420Z  INFO devimint::federation: fedimintd-3 started
00:00:03 2023-09-24T05:56:06.049319Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:04 2023-09-24T05:56:07.053003Z  INFO devimint::federation: Connected to 0
00:00:04 2023-09-24T05:56:07.054591Z  INFO devimint::federation: Connected to 1
00:00:04 2023-09-24T05:56:07.056259Z  INFO devimint::federation: Connected to 2
00:00:04 2023-09-24T05:56:07.057796Z  INFO devimint::federation: Connected to 3
00:00:04 2023-09-24T05:56:07.066678Z  INFO devimint::federation: calling set_config_gen_connections for 1 random-vs4TE1
00:00:04 2023-09-24T05:56:07.074436Z  INFO devimint::federation: calling set_config_gen_connections for 2 random-ymX772
00:00:04 2023-09-24T05:56:07.082580Z  INFO devimint::federation: calling set_config_gen_connections for 3 random-fnkeP3
00:00:04 2023-09-24T05:56:07.111249Z  INFO devimint::federation: Running DKG...
00:00:06 2023-09-24T05:56:09.312339Z  INFO devimint::federation: DKG successfully complete. Starting consensus...
00:00:06 2023-09-24T05:56:09.319553Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:06 2023-09-24T05:56:09.319874Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:06 2023-09-24T05:56:09.320164Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:07 2023-09-24T05:56:10.330481Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:07 2023-09-24T05:56:10.330716Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:07 2023-09-24T05:56:10.330997Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:07 2023-09-24T05:56:10.507480Z  INFO devimint: lightning started
00:00:07 2023-09-24T05:56:10.510454Z  INFO devimint: block sync done
00:00:07 2023-09-24T05:56:10.516182Z  INFO devimint: Sending funds from bitcoind amount=100000000 addr="bcrt1qnu78ddrnlktqngtpvl6tvej963pqy8sj5qz5jm"
00:00:07 2023-09-24T05:56:10.537445Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:07 2023-09-24T05:56:10.849129Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:08 2023-09-24T05:56:11.344451Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: i/o error: Transport endpoint is not connected (os error 107)
00:00:08 2023-09-24T05:56:11.347664Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:09 2023-09-24T05:56:12.172748Z  WARN devimint::external: Empty chan info edge=ChannelEdge { channel_id: 123145302376449, chan_point: "a2738fc5455261a66634463ffd3d85aedd381a07598ff3c3e41fee2c9d78b4fc:1", last_update: 1695534971, node1_pub: "02b3d55b54bb59bd9f76541cd36e8e3e4fa2819da783a8376e98011caf845878fc", node2_pub: "030f08a95d6b149c04cc5eac3c415607083dbb2bd589b18c492f34b00f15e227bd", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1695534971 }) }
00:00:09 2023-09-24T05:56:12.362819Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:09 2023-09-24T05:56:12.363033Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:09 2023-09-24T05:56:12.363278Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:10 2023-09-24T05:56:13.380094Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:10 2023-09-24T05:56:13.392354Z  WARN devimint::external: Empty chan info edge=ChannelEdge { channel_id: 123145302376449, chan_point: "a2738fc5455261a66634463ffd3d85aedd381a07598ff3c3e41fee2c9d78b4fc:1", last_update: 1695534971, node1_pub: "02b3d55b54bb59bd9f76541cd36e8e3e4fa2819da783a8376e98011caf845878fc", node2_pub: "030f08a95d6b149c04cc5eac3c415607083dbb2bd589b18c492f34b00f15e227bd", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1695534971 }) }
00:00:11 2023-09-24T05:56:14.392140Z  INFO devimint::federation: Consensus is running
00:00:11 2023-09-24T05:56:14.396111Z  INFO devimint::federation: copied client configs
00:00:11 2023-09-24T05:56:14.999323Z  INFO devimint: gateways started
00:00:11 2023-09-24T05:56:14.999374Z  INFO devimint: federation and gateways started
00:00:11 2023-09-24T05:56:15.000052Z  INFO devimint: Joining federation with the main client
00:00:12 2023-09-24T05:56:15.524956Z  INFO devimint: Generating first epoch
00:00:12 2023-09-24T05:56:15.548681Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:12 2023-09-24T05:56:15.901993Z  INFO devimint: await gateways registered
00:00:13 2023-09-24T05:56:16.110747Z  INFO devimint: gateways registered
00:00:13 2023-09-24T05:56:16.312857Z  INFO devimint::federation: Using cln gateway
00:00:13 2023-09-24T05:56:16.312893Z  INFO devimint: starting dev federation took 12.695698154s
00:00:13 2023-09-24T05:56:16.312907Z  INFO devimint::federation: Peg-in amount=10000000
00:00:13 2023-09-24T05:56:16.490475Z  INFO devimint: Sending funds from bitcoind amount=10000000 addr="bcrt1q80cplja573q8pnhetqz272h0fqha7kstht0g2dzyjk96fqxkh3cqct2dh5"
00:00:13 2023-09-24T05:56:16.514438Z  INFO devimint: Mining bitcoin blocks block_num=21
00:02:05 ================= RESULTS ==================
00:02:05 AVG REISSUE TIME: 3.064
00:02:05 AVG LN SEND TIME: 3.769
00:02:05 AVG LN RECV TIME: 3.456
00:02:05 2023-09-24T05:58:08.419484Z  INFO devimint: sending SIGKILL to faucet and waiting for it to exit
00:02:05 2023-09-24T05:58:08.421030Z  INFO devimint: sending SIGKILL to esplora and waiting for it to exit
00:02:05 2023-09-24T05:58:08.423242Z  INFO devimint: sending SIGKILL to electrs and waiting for it to exit
00:02:05 2023-09-24T05:58:08.424793Z  INFO devimint: sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:02:05 2023-09-24T05:58:08.440310Z  INFO devimint: sending SIGKILL to gatewayd-cln and waiting for it to exit
00:02:05 2023-09-24T05:58:08.455917Z  INFO devimint: sending SIGKILL to fedimintd-0 and waiting for it to exit
00:02:05 2023-09-24T05:58:08.464485Z  INFO devimint: sending SIGKILL to fedimintd-1 and waiting for it to exit
00:02:05 2023-09-24T05:58:08.472505Z  INFO devimint: sending SIGKILL to fedimintd-2 and waiting for it to exit
00:02:05 2023-09-24T05:58:08.479839Z  INFO devimint: sending SIGKILL to fedimintd-3 and waiting for it to exit
00:02:05 2023-09-24T05:58:08.486760Z  INFO devimint: sending SIGKILL to lnd and waiting for it to exit
00:02:05 2023-09-24T05:58:08.493937Z  INFO devimint: sending SIGTERM to lightningd and waiting for it to exit
00:02:05 2023-09-24T05:58:08.494814Z  INFO devimint: sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: latency_test
## START: reconnect_test
00:00:00 Setting up env variables in /tmp/nix-shell.15Fnaw/nix-shell.HRaYzL/fm-yeca
00:00:00     Finished dev [unoptimized + debuginfo] target(s) in 0.25s
00:00:00 2023-09-24T05:56:08.758628Z  INFO devimint: Test setup in "/tmp/nix-shell.15Fnaw/nix-shell.HRaYzL/fm-yeca/cfg"
00:00:00 2023-09-24T05:56:08.759776Z  WARN devimint: Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:03 2023-09-24T05:56:11.336691Z  INFO devimint: electrs started
00:00:03 2023-09-24T05:56:11.337614Z  INFO devimint: esplora started
00:00:03 2023-09-24T05:56:11.337667Z  INFO devimint::federation: fedimintd-2 started
00:00:03 2023-09-24T05:56:11.339952Z  INFO devimint::federation: fedimintd-1 started
00:00:03 2023-09-24T05:56:11.340612Z  INFO devimint::federation: fedimintd-0 started
00:00:03 2023-09-24T05:56:11.341277Z  INFO devimint::federation: fedimintd-3 started
00:00:03 2023-09-24T05:56:11.347530Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:04 2023-09-24T05:56:12.350910Z  INFO devimint::federation: Connected to 0
00:00:04 2023-09-24T05:56:12.352712Z  INFO devimint::federation: Connected to 1
00:00:04 2023-09-24T05:56:12.354365Z  INFO devimint::federation: Connected to 2
00:00:04 2023-09-24T05:56:12.356005Z  INFO devimint::federation: Connected to 3
00:00:04 2023-09-24T05:56:12.364866Z  INFO devimint::federation: calling set_config_gen_connections for 1 random-gziUf1
00:00:04 2023-09-24T05:56:12.373209Z  INFO devimint::federation: calling set_config_gen_connections for 2 random-fYxKh2
00:00:04 2023-09-24T05:56:12.382224Z  INFO devimint::federation: calling set_config_gen_connections for 3 random-W8WMQ3
00:00:04 2023-09-24T05:56:12.410873Z  INFO devimint::federation: Running DKG...
00:00:06 2023-09-24T05:56:14.675738Z  INFO devimint::federation: DKG successfully complete. Starting consensus...
00:00:06 2023-09-24T05:56:14.683706Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:06 2023-09-24T05:56:14.683982Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:06 2023-09-24T05:56:14.684285Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:07 2023-09-24T05:56:15.701835Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:07 2023-09-24T05:56:15.702295Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:07 2023-09-24T05:56:15.702636Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:07 2023-09-24T05:56:15.788719Z  INFO devimint: lightning started
00:00:08 2023-09-24T05:56:16.220329Z  INFO devimint: block sync done
00:00:08 2023-09-24T05:56:16.227716Z  INFO devimint: Sending funds from bitcoind amount=100000000 addr="bcrt1qvqrd970204uz4qeletu0rug7s4hg70cdgpvq9w"
00:00:08 2023-09-24T05:56:16.244883Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:08 2023-09-24T05:56:16.714731Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:08 2023-09-24T05:56:16.715027Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:08 2023-09-24T05:56:16.715347Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:09 2023-09-24T05:56:17.697039Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:09 2023-09-24T05:56:17.798433Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:09 2023-09-24T05:56:17.798734Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:09 2023-09-24T05:56:17.798985Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:10 2023-09-24T05:56:18.829337Z  INFO devimint::federation: Consensus is running
00:00:10 2023-09-24T05:56:18.830824Z  INFO devimint::federation: copied client configs
00:00:11 2023-09-24T05:56:19.014959Z  WARN devimint::external: Empty chan info edge=ChannelEdge { channel_id: 123145302376448, chan_point: "7136d9cedcd66835a1abbde6a72e769dff7cb0c8834ae33e78e7ffaf26424635:0", last_update: 1695534978, node1_pub: "0267361bf3d99692c4dc0527921ca134a7dc6bee53cbcb4cac7eeaeee3fb2c6a89", node2_pub: "03533dd60765c610d19ad73718f6cee0a0f449227b5820576c837dc7dcd86454aa", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1695534978 }) }
00:00:12 2023-09-24T05:56:20.218061Z  WARN devimint::external: Empty chan info edge=ChannelEdge { channel_id: 123145302376448, chan_point: "7136d9cedcd66835a1abbde6a72e769dff7cb0c8834ae33e78e7ffaf26424635:0", last_update: 1695534978, node1_pub: "0267361bf3d99692c4dc0527921ca134a7dc6bee53cbcb4cac7eeaeee3fb2c6a89", node2_pub: "03533dd60765c610d19ad73718f6cee0a0f449227b5820576c837dc7dcd86454aa", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1695534978 }) }
00:00:13 2023-09-24T05:56:21.824473Z  INFO devimint: gateways started
00:00:13 2023-09-24T05:56:21.824521Z  INFO devimint: federation and gateways started
00:00:13 2023-09-24T05:56:21.825225Z  INFO devimint: Joining federation with the main client
00:00:14 2023-09-24T05:56:22.055376Z  INFO devimint: Generating first epoch
00:00:14 2023-09-24T05:56:22.078602Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:14 2023-09-24T05:56:22.637958Z  INFO devimint: await gateways registered
00:00:14 2023-09-24T05:56:22.923680Z  INFO devimint: gateways registered
00:00:15 2023-09-24T05:56:23.157172Z  INFO devimint::federation: Using cln gateway
00:00:15 2023-09-24T05:56:23.157219Z  INFO devimint: starting dev federation took 14.398464991s
00:00:15 2023-09-24T05:56:23.157242Z  INFO devimint: Mining bitcoin blocks block_num=110
00:00:19 2023-09-24T05:56:27.644300Z  INFO devimint: sending SIGTERM to fedimintd-0 and waiting for it to exit
00:00:53 2023-09-24T05:57:01.476798Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:53 2023-09-24T05:57:01.926939Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:55 2023-09-24T05:57:03.119425Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:56 2023-09-24T05:57:04.410253Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:57 2023-09-24T05:57:05.485122Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:58 2023-09-24T05:57:06.596697Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:59 2023-09-24T05:57:07.698256Z  INFO devimint: Mining bitcoin blocks block_num=10
00:01:00 2023-09-24T05:57:08.867773Z  INFO devimint: Mining bitcoin blocks block_num=10
00:01:01 2023-09-24T05:57:09.996052Z  INFO devimint: Mining bitcoin blocks block_num=10
00:01:03 2023-09-24T05:57:11.089275Z  INFO devimint: Mining bitcoin blocks block_num=10
00:01:04 2023-09-24T05:57:12.275473Z  INFO devimint::federation: fedimintd-0 started
00:01:04 2023-09-24T05:57:12.290476Z  INFO devimint: Mining bitcoin blocks block_num=10
00:01:05 2023-09-24T05:57:13.090107Z  INFO devimint: Mining bitcoin blocks block_num=10
00:01:05 2023-09-24T05:57:13.610594Z  INFO devimint: Mining bitcoin blocks block_num=10
00:01:06 2023-09-24T05:57:14.120718Z  INFO devimint: Mining bitcoin blocks block_num=10
00:01:06 2023-09-24T05:57:14.496158Z  INFO devimint: Mining bitcoin blocks block_num=10
00:01:06 2023-09-24T05:57:14.842470Z  INFO devimint: Mining bitcoin blocks block_num=10
00:01:07 2023-09-24T05:57:15.149979Z  INFO devimint: Mining bitcoin blocks block_num=10
00:01:07 2023-09-24T05:57:15.463792Z  INFO devimint: Mining bitcoin blocks block_num=10
00:01:07 2023-09-24T05:57:15.884084Z  INFO devimint: Mining bitcoin blocks block_num=10
00:01:08 2023-09-24T05:57:16.170908Z  INFO devimint: Mining bitcoin blocks block_num=10
00:01:08 2023-09-24T05:57:16.780464Z  INFO devimint: Server 0 successfully rejoined!
00:01:08 2023-09-24T05:57:16.780506Z  INFO devimint: Mining bitcoin blocks block_num=100
00:01:10 2023-09-24T05:57:18.310846Z  INFO devimint: sending SIGTERM to fedimintd-1 and waiting for it to exit
00:01:11 2023-09-24T05:57:19.286988Z  INFO devimint: Mining bitcoin blocks block_num=100
00:01:12 2023-09-24T05:57:20.984642Z  INFO devimint: sending SIGTERM to fedimintd-2 and waiting for it to exit
00:01:35 2023-09-24T05:57:43.468401Z  INFO devimint: sending SIGTERM to fedimintd-3 and waiting for it to exit
00:01:57 2023-09-24T05:58:05.216084Z  INFO devimint::federation: fedimintd-1 started
00:01:57 2023-09-24T05:58:05.216593Z  INFO devimint::federation: fedimintd-2 started
00:01:57 2023-09-24T05:58:05.216935Z  INFO devimint::federation: fedimintd-3 started
00:02:09 2023-09-24T05:58:17.811363Z  INFO devimint: fm success: reconnect-test
00:02:09 2023-09-24T05:58:17.811417Z  INFO devimint: sending SIGKILL to faucet and waiting for it to exit
00:02:09 2023-09-24T05:58:17.812389Z  INFO devimint: sending SIGKILL to esplora and waiting for it to exit
00:02:09 2023-09-24T05:58:17.814515Z  INFO devimint: sending SIGKILL to electrs and waiting for it to exit
00:02:09 2023-09-24T05:58:17.815373Z  INFO devimint: sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:02:09 2023-09-24T05:58:17.823416Z  INFO devimint: sending SIGKILL to gatewayd-cln and waiting for it to exit
00:02:09 2023-09-24T05:58:17.833117Z  INFO devimint: sending SIGKILL to fedimintd-0 and waiting for it to exit
00:02:09 2023-09-24T05:58:17.840177Z  INFO devimint: sending SIGKILL to fedimintd-1 and waiting for it to exit
00:02:09 2023-09-24T05:58:17.846209Z  INFO devimint: sending SIGKILL to fedimintd-2 and waiting for it to exit
00:02:09 2023-09-24T05:58:17.852702Z  INFO devimint: sending SIGKILL to fedimintd-3 and waiting for it to exit
00:02:09 2023-09-24T05:58:17.857911Z  INFO devimint: sending SIGKILL to lnd and waiting for it to exit
00:02:09 2023-09-24T05:58:17.864728Z  INFO devimint: sending SIGTERM to lightningd and waiting for it to exit
00:02:09 2023-09-24T05:58:17.865585Z  INFO devimint: sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: reconnect_test
## START: backend_test_esplora
00:00:00 Setting up env variables in /tmp/nix-shell.15Fnaw/nix-shell.HRaYzL/fm-CZ47
00:00:00     Finished dev [unoptimized + debuginfo] target(s) in 0.26s
00:00:00 ### Setting up tests
00:00:00 2023-09-24T05:55:58.609232Z  INFO devimint: Test setup in "/tmp/nix-shell.15Fnaw/nix-shell.HRaYzL/fm-CZ47/cfg"
00:00:00 2023-09-24T05:55:58.610286Z  WARN devimint: Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:03 2023-09-24T05:56:01.182040Z  INFO devimint: electrs started
00:00:03 2023-09-24T05:56:01.183547Z  INFO devimint: esplora started
00:00:06 2023-09-24T05:56:04.444629Z  INFO devimint: block sync done
00:00:06 2023-09-24T05:56:04.449287Z  INFO devimint: Sending funds from bitcoind amount=100000000 addr="bcrt1qzzgkqpq66umvmt8tzuekld7qgnjnnnmnatppl0"
00:00:06 2023-09-24T05:56:04.465757Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:07 2023-09-24T05:56:05.069443Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:08 2023-09-24T05:56:06.380477Z  INFO devimint: starting base daemons took 7.771131617s
00:00:09 ### Setting up tests - complete
00:00:09 ### Testing against esplora
00:00:09     Finished test [unoptimized + debuginfo] target(s) in 0.70s
00:00:09     Starting 6 tests across 52 binaries
00:00:33         PASS [  23.864s] fedimint-wallet-tests::fedimint_wallet_tests on_chain_peg_in_and_peg_out_happy_case
00:01:09         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:01:09         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_out_fail_refund
00:01:09         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_must_wait_for_available_utxos
00:01:10         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_support_rbf
00:01:10         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests sanity_check_bitcoin_blocks
00:01:51         PASS [ 101.618s] fedimint-wallet-tests::fedimint_wallet_tests peg_out_fail_refund
00:02:09         SLOW [>120.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:02:09         SLOW [>120.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_must_wait_for_available_utxos
00:02:10         SLOW [>120.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_support_rbf
00:02:10         SLOW [>120.000s] fedimint-wallet-tests::fedimint_wallet_tests sanity_check_bitcoin_blocks
00:02:13         PASS [ 123.989s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_support_rbf
00:02:24         PASS [ 134.034s] fedimint-wallet-tests::fedimint_wallet_tests sanity_check_bitcoin_blocks
00:02:46         PASS [ 156.613s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_must_wait_for_available_utxos
00:03:09         SLOW [>180.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:04:09         SLOW [>240.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:05:09         SLOW [>300.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:06:04         PASS [ 354.289s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:06:04 ------------
00:06:04      Summary [ 354.309s] 6 tests run: 6 passed (5 slow), 0 skipped
00:06:04 ### Testing against esplora - complete
00:06:04 fm success: rust-tests
00:06:04 Auto-killing external-daemons(PID: 6970) and waiting it to finish...
00:06:04 2023-09-24T06:02:02.222273Z  INFO task: signal received, starting graceful shutdown
00:06:04 2023-09-24T06:02:02.225277Z  INFO devimint: sending SIGTERM to lightningd and waiting for it to exit
00:06:04 2023-09-24T06:02:02.226251Z  INFO devimint: sending SIGKILL to lnd and waiting for it to exit
00:06:04 2023-09-24T06:02:02.229869Z  INFO devimint: sending SIGKILL to electrs and waiting for it to exit
00:06:04 2023-09-24T06:02:02.231139Z  INFO devimint: sending SIGKILL to esplora and waiting for it to exit
00:06:04 2023-09-24T06:02:02.232658Z  INFO devimint: sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: backend_test_esplora
## START: backend_test_electrs
00:00:00 Setting up env variables in /tmp/nix-shell.15Fnaw/nix-shell.HRaYzL/fm-iuOe
00:00:01     Finished dev [unoptimized + debuginfo] target(s) in 0.28s
00:00:01 ### Setting up tests
00:00:01 2023-09-24T05:55:53.134285Z  INFO devimint: Test setup in "/tmp/nix-shell.15Fnaw/nix-shell.HRaYzL/fm-iuOe/cfg"
00:00:01 2023-09-24T05:55:53.135358Z  WARN devimint: Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:07 2023-09-24T05:55:59.922778Z  INFO devimint: electrs started
00:00:07 2023-09-24T05:55:59.923700Z  INFO devimint: esplora started
00:00:11 2023-09-24T05:56:03.180359Z  INFO devimint: block sync done
00:00:11 2023-09-24T05:56:03.189410Z  INFO devimint: Sending funds from bitcoind amount=100000000 addr="bcrt1qtp8avjwpu7q60k2l2spm3ca29cz8ser440pjzf"
00:00:11 2023-09-24T05:56:03.206562Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:11 2023-09-24T05:56:03.908695Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:12 2023-09-24T05:56:04.356320Z  WARN devimint: Value not ready name="ready file" attempt=8 duration_secs=11
00:00:13 2023-09-24T05:56:05.205337Z  WARN devimint::external: Empty chan info edge=ChannelEdge { channel_id: 123145302376449, chan_point: "e961ce8a4b48871818fb36f5226ee664162d8a46fbb25258fee4e7d67e4cd4b8:1", last_update: 1695534965, node1_pub: "03279d68530fd30b4e895bcbaa9dc74aaebb3ef0be2f23fae432a202353c980f20", node2_pub: "03c697e1c72f9da94793d596d88a424ebae658b5563ea80d25a602d6c52d99bad9", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1695534965 }) }
00:00:14 2023-09-24T05:56:06.408092Z  WARN devimint::external: Empty chan info edge=ChannelEdge { channel_id: 123145302376449, chan_point: "e961ce8a4b48871818fb36f5226ee664162d8a46fbb25258fee4e7d67e4cd4b8:1", last_update: 1695534965, node1_pub: "03279d68530fd30b4e895bcbaa9dc74aaebb3ef0be2f23fae432a202353c980f20", node2_pub: "03c697e1c72f9da94793d596d88a424ebae658b5563ea80d25a602d6c52d99bad9", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1695534965 }) }
00:00:15 2023-09-24T05:56:07.563937Z  WARN devimint: Value not ready name="ready file" attempt=9 duration_secs=14
00:00:16 2023-09-24T05:56:08.030279Z  INFO devimint: starting base daemons took 14.895859702s
00:00:19 ### Setting up tests - complete
00:00:19 ### Testing against electrs
00:00:19     Finished test [unoptimized + debuginfo] target(s) in 0.36s
00:00:19     Starting 6 tests across 52 binaries
00:01:19         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests on_chain_peg_in_and_peg_out_happy_case
00:01:19         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:01:19         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_out_fail_refund
00:01:19         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_must_wait_for_available_utxos
00:01:19         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_support_rbf
00:01:19         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests sanity_check_bitcoin_blocks
00:02:19         SLOW [>120.000s] fedimint-wallet-tests::fedimint_wallet_tests on_chain_peg_in_and_peg_out_happy_case
00:02:19         SLOW [>120.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:02:19         SLOW [>120.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_out_fail_refund
00:02:19         SLOW [>120.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_must_wait_for_available_utxos
00:02:19         SLOW [>120.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_support_rbf
00:02:19         SLOW [>120.000s] fedimint-wallet-tests::fedimint_wallet_tests sanity_check_bitcoin_blocks
00:03:05         PASS [ 165.438s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_must_wait_for_available_utxos
00:03:06         PASS [ 167.004s] fedimint-wallet-tests::fedimint_wallet_tests sanity_check_bitcoin_blocks
00:03:19         SLOW [>180.000s] fedimint-wallet-tests::fedimint_wallet_tests on_chain_peg_in_and_peg_out_happy_case
00:03:19         SLOW [>180.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:03:19         SLOW [>180.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_out_fail_refund
00:03:19         SLOW [>180.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_support_rbf
00:04:11         PASS [ 231.701s] fedimint-wallet-tests::fedimint_wallet_tests peg_out_fail_refund
00:04:19         SLOW [>240.000s] fedimint-wallet-tests::fedimint_wallet_tests on_chain_peg_in_and_peg_out_happy_case
00:04:19         SLOW [>240.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:04:19         SLOW [>240.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_support_rbf
00:04:27         PASS [ 247.812s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_support_rbf
00:04:43         PASS [ 264.225s] fedimint-wallet-tests::fedimint_wallet_tests on_chain_peg_in_and_peg_out_happy_case
00:05:19         SLOW [>300.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:06:10         PASS [ 351.170s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:06:10 ------------
00:06:10      Summary [ 351.170s] 6 tests run: 6 passed (6 slow), 0 skipped
00:06:10 ### Testing against electrs - complete
00:06:10 fm success: rust-tests
00:06:10 Auto-killing external-daemons(PID: 6873) and waiting it to finish...
00:06:10 2023-09-24T06:02:02.786483Z  INFO task: signal received, starting graceful shutdown
00:06:10 2023-09-24T06:02:02.789682Z  INFO devimint: sending SIGTERM to lightningd and waiting for it to exit
00:06:10 2023-09-24T06:02:02.790455Z  INFO devimint: sending SIGKILL to lnd and waiting for it to exit
00:06:10 2023-09-24T06:02:02.794117Z  INFO devimint: sending SIGKILL to electrs and waiting for it to exit
00:06:10 2023-09-24T06:02:02.795429Z  INFO devimint: sending SIGKILL to esplora and waiting for it to exit
00:06:10 2023-09-24T06:02:02.796852Z  INFO devimint: sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: backend_test_electrs
## START: backend_test_bitcoind
00:00:00 Setting up env variables in /tmp/nix-shell.15Fnaw/nix-shell.HRaYzL/fm-0HiW
00:00:01     Finished dev [unoptimized + debuginfo] target(s) in 0.24s
00:00:01 ### Setting up tests
00:00:01 2023-09-24T05:55:48.072681Z  INFO devimint: Test setup in "/tmp/nix-shell.15Fnaw/nix-shell.HRaYzL/fm-0HiW/cfg"
00:00:01 2023-09-24T05:55:48.073757Z  WARN devimint: Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:12 2023-09-24T05:55:59.294372Z  WARN devimint: Value not ready name="ready file" attempt=8 duration_secs=11
00:00:12 2023-09-24T05:55:59.400543Z  INFO devimint: electrs started
00:00:12 2023-09-24T05:55:59.401533Z  INFO devimint: esplora started
00:00:15 2023-09-24T05:56:02.496084Z  WARN devimint: Value not ready name="ready file" attempt=9 duration_secs=14
00:00:15 2023-09-24T05:56:02.657975Z  INFO devimint: block sync done
00:00:15 2023-09-24T05:56:02.662164Z  INFO devimint: Sending funds from bitcoind amount=100000000 addr="bcrt1q9n4t77q74h9v9ma78f9m4e0ty3dd2k5e5hltqg"
00:00:15 2023-09-24T05:56:02.674582Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:16 2023-09-24T05:56:03.288753Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:17 2023-09-24T05:56:04.648705Z  INFO devimint: starting base daemons took 16.575876693s
00:00:19 ### Setting up tests - complete
00:00:19 ### Testing against bitcoind
00:00:19     Finished test [unoptimized + debuginfo] target(s) in 0.28s
00:00:19     Starting 5 tests across 52 binaries
00:00:19         PASS [   0.049s] fedimint-dummy-tests::fedimint_dummy_tests unbalanced_transactions_get_rejected
00:00:19         PASS [   0.049s] fedimint-dummy-tests::fedimint_dummy_tests client_ignores_unknown_module
00:00:21         PASS [   2.469s] fedimint-dummy-tests::fedimint_dummy_tests can_threshold_sign_message
00:00:23         PASS [   3.801s] fedimint-dummy-tests::fedimint_dummy_tests can_print_and_send_money
00:01:05         PASS [  45.912s] fedimint-dummy-tests::fedimint_dummy_tests federation_should_abort_if_balance_sheet_is_negative
00:01:05 ------------
00:01:05      Summary [  45.913s] 5 tests run: 5 passed, 0 skipped
00:01:05     Finished test [unoptimized + debuginfo] target(s) in 0.37s
00:01:05     Starting 1 test across 52 binaries
00:01:20         PASS [  14.273s] fedimint-mint-tests::fedimint_mint_tests sends_ecash_out_of_band
00:01:20 ------------
00:01:20      Summary [  14.273s] 1 test run: 1 passed, 0 skipped
00:01:20     Finished test [unoptimized + debuginfo] target(s) in 0.26s
00:01:20     Starting 6 tests across 52 binaries
00:02:20         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests on_chain_peg_in_and_peg_out_happy_case
00:02:20         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:02:20         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_out_fail_refund
00:02:20         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_must_wait_for_available_utxos
00:02:20         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_support_rbf
00:02:20         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests sanity_check_bitcoin_blocks
00:03:20         SLOW [>120.000s] fedimint-wallet-tests::fedimint_wallet_tests on_chain_peg_in_and_peg_out_happy_case
00:03:20         SLOW [>120.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:03:20         SLOW [>120.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_out_fail_refund
00:03:20         SLOW [>120.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_must_wait_for_available_utxos
00:03:20         SLOW [>120.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_support_rbf
00:03:20         SLOW [>120.000s] fedimint-wallet-tests::fedimint_wallet_tests sanity_check_bitcoin_blocks
00:04:20         SLOW [>180.000s] fedimint-wallet-tests::fedimint_wallet_tests on_chain_peg_in_and_peg_out_happy_case
00:04:20         SLOW [>180.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:04:20         SLOW [>180.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_out_fail_refund
00:04:20         SLOW [>180.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_must_wait_for_available_utxos
00:04:20         SLOW [>180.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_support_rbf
00:04:20         SLOW [>180.000s] fedimint-wallet-tests::fedimint_wallet_tests sanity_check_bitcoin_blocks
00:05:20         SLOW [>240.000s] fedimint-wallet-tests::fedimint_wallet_tests on_chain_peg_in_and_peg_out_happy_case
00:05:20         SLOW [>240.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:05:20         SLOW [>240.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_out_fail_refund
00:05:20         SLOW [>240.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_must_wait_for_available_utxos
00:05:20         SLOW [>240.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_support_rbf
00:05:20         SLOW [>240.000s] fedimint-wallet-tests::fedimint_wallet_tests sanity_check_bitcoin_blocks
00:05:36         PASS [ 255.635s] fedimint-wallet-tests::fedimint_wallet_tests peg_out_fail_refund
00:05:47         PASS [ 266.603s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_support_rbf
00:05:57         PASS [ 277.544s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_must_wait_for_available_utxos
00:06:12         PASS [ 291.672s] fedimint-wallet-tests::fedimint_wallet_tests on_chain_peg_in_and_peg_out_happy_case
00:06:13         PASS [ 292.819s] fedimint-wallet-tests::fedimint_wallet_tests sanity_check_bitcoin_blocks
00:06:15         PASS [ 295.412s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:06:15 ------------
00:06:15      Summary [ 295.413s] 6 tests run: 6 passed (6 slow), 0 skipped
00:06:16     Finished test [unoptimized + debuginfo] target(s) in 0.24s
00:06:16     Starting 4 tests across 52 binaries
00:06:18         PASS [   2.644s] fedimint-ln-tests::fedimint_ln_tests rejects_wrong_network_invoice
00:06:21         PASS [   5.626s] fedimint-ln-tests::fedimint_ln_tests test_can_attach_extra_meta_to_receive_operation
00:06:25         PASS [   9.442s] fedimint-ln-tests::fedimint_ln_tests can_switch_active_gateway
00:06:35         PASS [  18.949s] fedimint-ln-tests::fedimint_ln_tests makes_internal_payments_within_federation
00:06:35 ------------
00:06:35      Summary [  18.950s] 4 tests run: 4 passed, 0 skipped
00:06:35     Finished test [unoptimized + debuginfo] target(s) in 0.25s
00:06:35     Starting 17 tests across 52 binaries
00:06:35         PASS [   0.005s] ln-gateway utils::tests::retry_fail_with_three_attempts
00:06:35         PASS [   0.002s] ln-gateway utils::tests::retry_succeed_with_one_attempt
00:07:35         SLOW [> 60.000s] ln-gateway::gatewayd-integration-tests test_gateway_can_pay_ldk_node
00:07:50         PASS [  74.678s] ln-gateway::gatewayd-integration-tests test_gateway_can_pay_ldk_node
00:08:22         PASS [  32.712s] ln-gateway::gatewayd-integration-tests test_gateway_cannot_claim_invalid_preimage
00:08:57         PASS [  34.967s] ln-gateway::gatewayd-integration-tests test_gateway_cannot_pay_expired_invoice
00:09:31         PASS [  33.676s] ln-gateway::gatewayd-integration-tests test_gateway_client_intercept_htlc_invalid_offer
00:09:41         PASS [   9.669s] ln-gateway::gatewayd-integration-tests test_gateway_client_intercept_htlc_no_funds
00:10:00         PASS [  19.672s] ln-gateway::gatewayd-integration-tests test_gateway_client_intercept_offer_does_not_exist
00:10:24         PASS [  23.434s] ln-gateway::gatewayd-integration-tests test_gateway_client_intercept_valid_htlc
00:10:47         PASS [  23.408s] ln-gateway::gatewayd-integration-tests test_gateway_client_pay_unpayable_invoice
00:11:34         PASS [  46.524s] ln-gateway::gatewayd-integration-tests test_gateway_client_pay_valid_invoice
00:11:37         PASS [   3.684s] ln-gateway::gatewayd-integration-tests test_gateway_configuration
00:11:52         PASS [  14.575s] ln-gateway::gatewayd-integration-tests test_gateway_filters_route_hints_by_inbound
00:11:55         PASS [   2.757s] ln-gateway::gatewayd-integration-tests test_gateway_register_with_federation
00:12:01         PASS [   5.939s] ln-gateway::gatewayd-integration-tests test_gateway_shows_balance_for_any_connected_federation
00:12:03         PASS [   2.652s] ln-gateway::gatewayd-integration-tests test_gateway_shows_info_about_all_connected_federations
00:12:06         PASS [   2.897s] ln-gateway::gatewayd-integration-tests test_gateway_supports_connecting_multiple_federations
00:12:06 ------------
00:12:06      Summary [ 331.250s] 17 tests run: 17 passed (1 slow), 0 skipped
00:12:06 ### Testing against bitcoind - complete
00:12:06 fm success: rust-tests
00:12:06 Auto-killing external-daemons(PID: 6775) and waiting it to finish...
00:12:06 2023-09-24T06:07:53.740865Z  INFO task: signal received, starting graceful shutdown
00:12:06 2023-09-24T06:07:53.747409Z  INFO devimint: sending SIGTERM to lightningd and waiting for it to exit
00:12:06 2023-09-24T06:07:53.749154Z  INFO devimint: sending SIGKILL to lnd and waiting for it to exit
00:12:06 2023-09-24T06:07:53.756986Z  INFO devimint: sending SIGKILL to electrs and waiting for it to exit
00:12:06 2023-09-24T06:07:53.758896Z  INFO devimint: sending SIGKILL to esplora and waiting for it to exit
00:12:06 2023-09-24T06:07:53.761442Z  INFO devimint: sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: backend_test_bitcoind
All tests successful
test run 2
./scripts/tests/test-ci-all.sh
Pre-building workspace...
    Finished dev [unoptimized + debuginfo] target(s) in 0.24s
Pre-building tests...
    Finished test [unoptimized + debuginfo] target(s) in 0.22s
## Starting all tests in parallel...
## START: always_success_test
## COMPLETE: always_success_test
## START: gateway_reboot_test
00:00:00 Setting up env variables in /tmp/nix-shell.15Fnaw/nix-shell.t4o0QG/fm-Dw0o
00:00:01     Finished dev [unoptimized + debuginfo] target(s) in 0.77s
00:00:01 2023-09-24T06:08:34.084959Z  INFO devimint: Test setup in "/tmp/nix-shell.15Fnaw/nix-shell.t4o0QG/fm-Dw0o/cfg"
00:00:01 2023-09-24T06:08:34.086105Z  WARN devimint: Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:04 2023-09-24T06:08:37.676389Z  INFO devimint: electrs started
00:00:04 2023-09-24T06:08:37.677374Z  INFO devimint: esplora started
00:00:04 2023-09-24T06:08:37.677409Z  INFO devimint::federation: fedimintd-2 started
00:00:04 2023-09-24T06:08:37.679553Z  INFO devimint::federation: fedimintd-1 started
00:00:04 2023-09-24T06:08:37.680142Z  INFO devimint::federation: fedimintd-3 started
00:00:04 2023-09-24T06:08:37.680701Z  INFO devimint::federation: fedimintd-0 started
00:00:04 2023-09-24T06:08:37.681707Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:05 2023-09-24T06:08:38.688052Z  INFO devimint::federation: Connected to 0
00:00:05 2023-09-24T06:08:38.690821Z  INFO devimint::federation: Connected to 1
00:00:05 2023-09-24T06:08:38.693120Z  INFO devimint::federation: Connected to 2
00:00:05 2023-09-24T06:08:38.694666Z  INFO devimint::federation: Connected to 3
00:00:05 2023-09-24T06:08:38.702257Z  INFO devimint::federation: calling set_config_gen_connections for 1 random-sUE2c1
00:00:05 2023-09-24T06:08:38.709777Z  INFO devimint::federation: calling set_config_gen_connections for 2 random-dH8zh2
00:00:05 2023-09-24T06:08:38.719147Z  INFO devimint::federation: calling set_config_gen_connections for 3 random-5PDMp3
00:00:05 2023-09-24T06:08:38.746130Z  INFO devimint::federation: Running DKG...
00:00:08 2023-09-24T06:08:41.842670Z  INFO devimint::federation: DKG successfully complete. Starting consensus...
00:00:08 2023-09-24T06:08:41.851531Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:08 2023-09-24T06:08:41.851740Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:08 2023-09-24T06:08:41.851995Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:09 2023-09-24T06:08:42.162046Z  INFO devimint: lightning started
00:00:09 2023-09-24T06:08:42.872826Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:10 2023-09-24T06:08:43.468846Z  INFO devimint: block sync done
00:00:10 2023-09-24T06:08:43.506805Z  INFO devimint: Sending funds from bitcoind amount=100000000 addr="bcrt1q36fhkt26w25qnl0s5a2582lufuqszc63nl3wam"
00:00:10 2023-09-24T06:08:43.616558Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:11 2023-09-24T06:08:44.156781Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:11 2023-09-24T06:08:44.932841Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:12 2023-09-24T06:08:45.170426Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:12 2023-09-24T06:08:45.170660Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:12 2023-09-24T06:08:45.170922Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:13 2023-09-24T06:08:46.184817Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:13 2023-09-24T06:08:46.185120Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:13 2023-09-24T06:08:46.185405Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:13 2023-09-24T06:08:46.259749Z  WARN devimint::external: Empty chan info edge=ChannelEdge { channel_id: 123145302376449, chan_point: "2887a5d43773fb49e0ec73f3185b4f30c714abe32e693242004edd7c9ae10f6b:1", last_update: 1695535726, node1_pub: "02373a6c50c2fe162f8f2d2b0ec46264fbd1c63ed059b7a0ea86e420e3f9eb0741", node2_pub: "02ee638aec66e3efa56f69d897fb8d911a50b62aed8f69e50a08ad8a6bdb81f75b", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1695535726 }) }
00:00:14 2023-09-24T06:08:47.189712Z  INFO devimint::federation: Consensus is running
00:00:14 2023-09-24T06:08:47.190073Z  INFO devimint::federation: copied client configs
00:00:14 2023-09-24T06:08:47.465518Z  WARN devimint::external: Empty chan info edge=ChannelEdge { channel_id: 123145302376449, chan_point: "2887a5d43773fb49e0ec73f3185b4f30c714abe32e693242004edd7c9ae10f6b:1", last_update: 1695535726, node1_pub: "02373a6c50c2fe162f8f2d2b0ec46264fbd1c63ed059b7a0ea86e420e3f9eb0741", node2_pub: "02ee638aec66e3efa56f69d897fb8d911a50b62aed8f69e50a08ad8a6bdb81f75b", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1695535726 }) }
00:00:16 2023-09-24T06:08:49.080804Z  INFO devimint: gateways started
00:00:16 2023-09-24T06:08:49.080854Z  INFO devimint: federation and gateways started
00:00:16 2023-09-24T06:08:49.104174Z  INFO devimint: Joining federation with the main client
00:00:17 2023-09-24T06:08:50.245980Z  INFO devimint: Generating first epoch
00:00:17 2023-09-24T06:08:50.309876Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:18 2023-09-24T06:08:51.401955Z  INFO devimint: await gateways registered
00:00:18 2023-09-24T06:08:51.649942Z  INFO devimint: gateways registered
00:00:18 2023-09-24T06:08:51.903848Z  INFO devimint::federation: Using cln gateway
00:00:18 2023-09-24T06:08:51.903900Z  INFO devimint: starting dev federation took 17.818829008s
00:00:18 2023-09-24T06:08:51.968992Z  INFO devimint: sending SIGKILL to gatewayd-cln and waiting for it to exit
00:00:18 2023-09-24T06:08:51.984227Z  INFO devimint: sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:00:42 2023-09-24T06:09:15.412521Z  INFO devimint: CLN Gateway restarted, with auto-rejoin to federation
00:00:42 2023-09-24T06:09:15.449341Z  INFO devimint: LND Gateway restarted, with auto-rejoin to federation
00:00:42 2023-09-24T06:09:15.449447Z  INFO devimint: gateway_reboot_test: success LOG_DEVIMINT="devimint"
00:00:42 2023-09-24T06:09:15.449495Z  INFO devimint: sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:00:42 2023-09-24T06:09:15.461071Z  INFO devimint: sending SIGKILL to gatewayd-cln and waiting for it to exit
00:00:42 2023-09-24T06:09:15.474780Z  INFO devimint: sending SIGKILL to faucet and waiting for it to exit
00:00:42 2023-09-24T06:09:15.484182Z  INFO devimint: sending SIGKILL to esplora and waiting for it to exit
00:00:42 2023-09-24T06:09:15.490902Z  INFO devimint: sending SIGKILL to electrs and waiting for it to exit
00:00:42 2023-09-24T06:09:15.496699Z  INFO devimint: sending SIGKILL to fedimintd-0 and waiting for it to exit
00:00:42 2023-09-24T06:09:15.508364Z  INFO devimint: sending SIGKILL to fedimintd-1 and waiting for it to exit
00:00:42 2023-09-24T06:09:15.518524Z  INFO devimint: sending SIGKILL to fedimintd-2 and waiting for it to exit
00:00:42 2023-09-24T06:09:15.524865Z  INFO devimint: sending SIGKILL to fedimintd-3 and waiting for it to exit
00:00:42 2023-09-24T06:09:15.530483Z  INFO devimint: sending SIGKILL to lnd and waiting for it to exit
00:00:42 2023-09-24T06:09:15.536395Z  INFO devimint: sending SIGTERM to lightningd and waiting for it to exit
00:00:42 2023-09-24T06:09:15.537163Z  INFO devimint: sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: gateway_reboot_test
## START: lightning_reconnect_test
00:00:00 Setting up env variables in /tmp/nix-shell.15Fnaw/nix-shell.t4o0QG/fm-DuFV
00:00:01     Finished dev [unoptimized + debuginfo] target(s) in 0.34s
00:00:01 2023-09-24T06:08:28.317029Z  INFO devimint: Test setup in "/tmp/nix-shell.15Fnaw/nix-shell.t4o0QG/fm-DuFV/cfg"
00:00:01 2023-09-24T06:08:28.320412Z  WARN devimint: Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:04 2023-09-24T06:08:31.265272Z  INFO devimint: electrs started
00:00:04 2023-09-24T06:08:31.266396Z  INFO devimint: esplora started
00:00:04 2023-09-24T06:08:31.266443Z  INFO devimint::federation: fedimintd-1 started
00:00:04 2023-09-24T06:08:31.271579Z  INFO devimint::federation: fedimintd-0 started
00:00:04 2023-09-24T06:08:31.276888Z  INFO devimint::federation: fedimintd-3 started
00:00:04 2023-09-24T06:08:31.284144Z  INFO devimint::federation: fedimintd-2 started
00:00:04 2023-09-24T06:08:31.288854Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:05 2023-09-24T06:08:32.292473Z  INFO devimint::federation: Connected to 0
00:00:05 2023-09-24T06:08:32.294189Z  INFO devimint::federation: Connected to 1
00:00:05 2023-09-24T06:08:32.301971Z  INFO devimint::federation: Connected to 2
00:00:05 2023-09-24T06:08:32.303676Z  INFO devimint::federation: Connected to 3
00:00:05 2023-09-24T06:08:32.311956Z  INFO devimint::federation: calling set_config_gen_connections for 1 random-HXcx11
00:00:05 2023-09-24T06:08:32.319506Z  INFO devimint::federation: calling set_config_gen_connections for 2 random-pTxgW2
00:00:05 2023-09-24T06:08:32.327167Z  INFO devimint::federation: calling set_config_gen_connections for 3 random-QQPRR3
00:00:05 2023-09-24T06:08:32.355628Z  INFO devimint::federation: Running DKG...
00:00:07 2023-09-24T06:08:34.596155Z  INFO devimint::federation: DKG successfully complete. Starting consensus...
00:00:07 2023-09-24T06:08:34.602842Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:07 2023-09-24T06:08:34.603100Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:07 2023-09-24T06:08:34.603299Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:08 2023-09-24T06:08:35.612688Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:08 2023-09-24T06:08:35.612903Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:08 2023-09-24T06:08:35.613143Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:08 2023-09-24T06:08:35.720250Z  INFO devimint: lightning started
00:00:09 2023-09-24T06:08:36.628234Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:09 2023-09-24T06:08:36.970967Z  INFO devimint: block sync done
00:00:09 2023-09-24T06:08:36.982047Z  INFO devimint: Sending funds from bitcoind amount=100000000 addr="bcrt1q9upfk0fc2ggpvxmvlk4g8pw5puvsfcwl53ag7y"
00:00:10 2023-09-24T06:08:37.016571Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:10 2023-09-24T06:08:37.638490Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:10 2023-09-24T06:08:37.638747Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:10 2023-09-24T06:08:37.639047Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:11 2023-09-24T06:08:38.542868Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:11 2023-09-24T06:08:38.648480Z  INFO devimint::federation: Consensus is running
00:00:11 2023-09-24T06:08:38.648983Z  INFO devimint::federation: copied client configs
00:00:12 2023-09-24T06:08:39.854797Z  WARN devimint::external: Getting chan info failed e=status: Unknown, message: "edge not found", details: [], metadata: MetadataMap { headers: {"content-type": "application/grpc"} }
00:00:14 2023-09-24T06:08:41.066264Z  WARN devimint::external: Empty chan info edge=ChannelEdge { channel_id: 123145302376448, chan_point: "122d220cac9d237fe7a6bdb93c53963ffa2474c8de87a39069e633fd01fb6f0c:0", last_update: 1695535720, node1_pub: "0204ec9a142bdfc1d4c6c10562c89a4062d5f31c9e2e237ede7e89e9d97fd002b9", node2_pub: "03c3a1e96c77bc9c1dde0254083978f32a352bf2d310d0ed53baffa6ef86b59a9b", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1695535720 }) }
00:00:15 2023-09-24T06:08:42.682682Z  INFO devimint: gateways started
00:00:15 2023-09-24T06:08:42.682736Z  INFO devimint: federation and gateways started
00:00:15 2023-09-24T06:08:42.684895Z  INFO devimint: Joining federation with the main client
00:00:15 2023-09-24T06:08:42.964372Z  INFO devimint: Generating first epoch
00:00:15 2023-09-24T06:08:42.988322Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:16 2023-09-24T06:08:43.676216Z  INFO devimint: await gateways registered
00:00:17 2023-09-24T06:08:44.552357Z  INFO devimint: gateways registered
00:00:18 2023-09-24T06:08:45.008171Z  INFO devimint::federation: Using cln gateway
00:00:18 2023-09-24T06:08:45.008217Z  INFO devimint: starting dev federation took 16.691031845s
00:00:18 2023-09-24T06:08:45.008244Z  INFO devimint: Pegging-in both gateways
00:00:18 2023-09-24T06:08:45.008265Z  INFO devimint::federation: Pegging-in gateway funds amount=99999
00:00:18 2023-09-24T06:08:45.054107Z  INFO devimint: Sending funds from bitcoind amount=99999 addr="bcrt1qgrnkpsmex6yfj5kcmtvv52wthdy7ghtk7kvhctnya3uf3axqspnqtefzjx"
00:00:18 2023-09-24T06:08:45.084823Z  INFO devimint: Mining bitcoin blocks block_num=21
00:00:24 2023-09-24T06:08:51.669582Z  INFO devimint::federation: Pegging-in gateway funds amount=99999
00:00:24 2023-09-24T06:08:51.733659Z  INFO devimint: Sending funds from bitcoind amount=99999 addr="bcrt1qzdt78h3rdq5q23gks2hxzn6hkv3d0yqgt6vy6kpy9xtjmmsu9l3qdfey7p"
00:00:24 2023-09-24T06:08:51.765296Z  INFO devimint: Mining bitcoin blocks block_num=21
00:00:34 2023-09-24T06:09:01.057270Z  INFO devimint: Stopping all lightning nodes
00:00:34 2023-09-24T06:09:01.101137Z  INFO devimint: Stopping lightning node
00:00:34 2023-09-24T06:09:01.105341Z  INFO devimint: sending SIGTERM to lightningd and waiting for it to exit
00:00:34 2023-09-24T06:09:01.179952Z  INFO devimint: Stopping lightning node
00:00:34 2023-09-24T06:09:01.180019Z  INFO devimint: sending SIGTERM to lnd and waiting for it to exit
00:00:34 2023-09-24T06:09:01.233224Z  INFO devimint: Restarting both lightning nodes...
00:00:34 2023-09-24T06:09:01.649500Z  INFO devimint::external: lnd_connect failed: ConnectError { internal: Connect { address: "http://localhost:11009", error: tonic::transport::Error(Transport, hyper::Error(Connect, ConnectError("tcp connect error", Os { code: 111, kind: ConnectionRefused, message: "Connection refused" }))) } }
00:00:34 2023-09-24T06:09:01.661053Z  INFO devimint::external: lnd_connect failed: ConnectError { internal: Connect { address: "http://localhost:11009", error: tonic::transport::Error(Transport, hyper::Error(Connect, ConnectError("tcp connect error", Os { code: 111, kind: ConnectionRefused, message: "Connection refused" }))) } }
00:00:36 2023-09-24T06:09:03.288940Z  INFO devimint: Retrying info...
00:00:40 2023-09-24T06:09:07.757324Z  INFO devimint::federation: Using cln gateway
00:00:40 2023-09-24T06:09:07.757384Z  INFO devimint: Creating invoice....
00:00:44 2023-09-24T06:09:11.535882Z  INFO devimint: sending SIGKILL to gatewayd-cln and waiting for it to exit
00:00:44 2023-09-24T06:09:11.750739Z  INFO devimint::federation: Using lnd gateway
00:00:44 2023-09-24T06:09:11.750781Z  INFO devimint: Creating invoice....
00:00:48 2023-09-24T06:09:15.701955Z  INFO devimint: sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:00:48 2023-09-24T06:09:15.710975Z  INFO devimint: lightning_reconnect_test: success
00:00:48 2023-09-24T06:09:15.711062Z  INFO devimint: sending SIGKILL to lnd and waiting for it to exit
00:00:48 2023-09-24T06:09:15.718337Z  INFO devimint: sending SIGTERM to lightningd and waiting for it to exit
00:00:48 2023-09-24T06:09:15.719113Z  INFO devimint: sending SIGKILL to faucet and waiting for it to exit
00:00:48 2023-09-24T06:09:15.720255Z  INFO devimint: sending SIGKILL to esplora and waiting for it to exit
00:00:48 2023-09-24T06:09:15.721500Z  INFO devimint: sending SIGKILL to electrs and waiting for it to exit
00:00:48 2023-09-24T06:09:15.724753Z  INFO devimint: sending SIGKILL to fedimintd-0 and waiting for it to exit
00:00:48 2023-09-24T06:09:15.733493Z  INFO devimint: sending SIGKILL to fedimintd-1 and waiting for it to exit
00:00:48 2023-09-24T06:09:15.739548Z  INFO devimint: sending SIGKILL to fedimintd-2 and waiting for it to exit
00:00:48 2023-09-24T06:09:15.745014Z  INFO devimint: sending SIGKILL to fedimintd-3 and waiting for it to exit
00:00:48 2023-09-24T06:09:15.749858Z  INFO devimint: sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: lightning_reconnect_test
## START: devimint_cli_test
00:00:00 Setting up env variables in /tmp/nix-shell.15Fnaw/nix-shell.t4o0QG/fm-BOvq
00:00:00     Finished dev [unoptimized + debuginfo] target(s) in 0.30s
00:00:00 2023-09-24T06:08:38.548150Z  INFO devimint: Test setup in "/tmp/nix-shell.15Fnaw/nix-shell.t4o0QG/fm-BOvq/cfg"
00:00:00 2023-09-24T06:08:38.549485Z  WARN devimint: Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:04 2023-09-24T06:08:42.080945Z  INFO devimint: electrs started
00:00:04 2023-09-24T06:08:42.082175Z  INFO devimint: esplora started
00:00:04 2023-09-24T06:08:42.082219Z  INFO devimint::federation: fedimintd-3 started
00:00:04 2023-09-24T06:08:42.084409Z  INFO devimint::federation: fedimintd-0 started
00:00:04 2023-09-24T06:08:42.084931Z  INFO devimint::federation: fedimintd-2 started
00:00:04 2023-09-24T06:08:42.085368Z  INFO devimint::federation: fedimintd-1 started
00:00:04 2023-09-24T06:08:42.092383Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:05 2023-09-24T06:08:43.106081Z  INFO devimint::federation: Connected to 0
00:00:05 2023-09-24T06:08:43.108638Z  INFO devimint::federation: Connected to 1
00:00:05 2023-09-24T06:08:43.117332Z  INFO devimint::federation: Connected to 2
00:00:05 2023-09-24T06:08:43.128272Z  INFO devimint::federation: Connected to 3
00:00:05 2023-09-24T06:08:43.193366Z  INFO devimint::federation: calling set_config_gen_connections for 1 random-uZ2L81
00:00:05 2023-09-24T06:08:43.207833Z  INFO devimint::federation: calling set_config_gen_connections for 2 random-GBzVP2
00:00:05 2023-09-24T06:08:43.219559Z  INFO devimint::federation: calling set_config_gen_connections for 3 random-lSXrj3
00:00:05 2023-09-24T06:08:43.260362Z  INFO devimint::federation: Running DKG...
00:00:08 2023-09-24T06:08:46.329433Z  INFO devimint::federation: DKG successfully complete. Starting consensus...
00:00:08 2023-09-24T06:08:46.336095Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:08 2023-09-24T06:08:46.336311Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:08 2023-09-24T06:08:46.336628Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:08 2023-09-24T06:08:46.559376Z  INFO devimint: lightning started
00:00:09 2023-09-24T06:08:47.364779Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:09 2023-09-24T06:08:47.373527Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:09 2023-09-24T06:08:47.785024Z  INFO devimint: block sync done
00:00:09 2023-09-24T06:08:47.791601Z  INFO devimint: Sending funds from bitcoind amount=100000000 addr="bcrt1qwqrfn32g698mkx43fc2dc7nf8p009p4gtalthm"
00:00:09 2023-09-24T06:08:47.807343Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:10 2023-09-24T06:08:48.103691Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:10 2023-09-24T06:08:48.391129Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:10 2023-09-24T06:08:48.391508Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:10 2023-09-24T06:08:48.392017Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:11 2023-09-24T06:08:49.396492Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:12 2023-09-24T06:08:50.444940Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:12 2023-09-24T06:08:50.666174Z  WARN devimint::external: Empty chan info edge=ChannelEdge { channel_id: 123145302376449, chan_point: "61b6e8234c6477aafc559f1bfdf33ea04c811316381a109524b7a6efcc948020:1", last_update: 1695535730, node1_pub: "0292be2777a9cdd57b8c946a85197fb320013a844548389f12c7f4600c7b48907a", node2_pub: "038196167757552e44eef8f7dc51305443d61f7c1fe1767bda1133ddb4ee2cf180", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1695535730 }) }
00:00:13 2023-09-24T06:08:51.448651Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:14 2023-09-24T06:08:52.285766Z  INFO devimint: gateways started
00:00:14 2023-09-24T06:08:52.463425Z  INFO devimint::federation: Consensus is running
00:00:14 2023-09-24T06:08:52.465706Z  INFO devimint::federation: copied client configs
00:00:14 2023-09-24T06:08:52.465752Z  INFO devimint: federation and gateways started
00:00:14 2023-09-24T06:08:52.472189Z  INFO devimint: Joining federation with the main client
00:00:14 2023-09-24T06:08:52.925062Z  INFO devimint: Generating first epoch
00:00:14 2023-09-24T06:08:52.954127Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:15 2023-09-24T06:08:53.379423Z  INFO devimint: await gateways registered
00:00:15 2023-09-24T06:08:53.535602Z  INFO devimint: gateways registered
00:00:15 2023-09-24T06:08:53.729438Z  INFO devimint::federation: Using cln gateway
00:00:15 2023-09-24T06:08:53.729513Z  INFO devimint: starting dev federation took 15.181214054s
00:00:15 2023-09-24T06:08:53.791727Z  INFO devimint: Testing load last epoch with admin client
00:00:16 2023-09-24T06:08:54.205829Z  INFO devimint::federation: Pegging-in gateway funds amount=99999
00:00:16 2023-09-24T06:08:54.263455Z  INFO devimint: Sending funds from bitcoind amount=99999 addr="bcrt1q895wz9uqwfw63z4k39uc2y8a5zw50tpcmwmcgkeq9fnxtnqvamxqetnfmu"
00:00:16 2023-09-24T06:08:54.278196Z  INFO devimint: Mining bitcoin blocks block_num=21
00:00:22 2023-09-24T06:09:00.891642Z  INFO devimint: Testing LND can pay CLN directly
00:00:23 2023-09-24T06:09:01.255718Z  INFO devimint: Testing CLN can pay LND directly
00:00:23 2023-09-24T06:09:01.813532Z  INFO devimint: Testing Client
00:00:23 2023-09-24T06:09:01.813592Z  INFO devimint: Testing reissuing e-cash
00:00:23 2023-09-24T06:09:01.951695Z  INFO devimint::federation: Peg-in amount=420
00:00:24 2023-09-24T06:09:02.087672Z  INFO devimint: Sending funds from bitcoind amount=420 addr="bcrt1qhd4g2gapsjuyu44ex09ruvlc54ep87ngmhz2gglnla0rt73z282qu20azc"
00:00:24 2023-09-24T06:09:02.101639Z  INFO devimint: Mining bitcoin blocks block_num=21
00:00:27 2023-09-24T06:09:05.295084Z  INFO devimint: Testing backup&restore
00:00:32 2023-09-24T06:09:10.884360Z  INFO devimint: Testing spending from client
00:00:35 2023-09-24T06:09:13.851023Z  INFO devimint: Testing reissuing e-cash after spending
00:00:38 2023-09-24T06:09:16.491292Z  INFO devimint: Testing reissuing e-cash via module commands
00:00:40 2023-09-24T06:09:18.960500Z  INFO devimint: Testing fedimint-cli pays LND via CLN gateway
00:00:41 2023-09-24T06:09:19.143918Z  INFO devimint::federation: Using cln gateway
00:00:48 2023-09-24T06:09:26.771912Z  INFO devimint: Testing receiving e-cash notes
00:00:51 2023-09-24T06:09:29.388456Z  INFO devimint: Testing LND gateway
00:00:51 2023-09-24T06:09:29.576927Z  INFO devimint::federation: Using lnd gateway
00:00:51 2023-09-24T06:09:29.576998Z  INFO devimint: Testing outgoing payment from client to CLN via LND gateway
00:00:55 2023-09-24T06:09:33.029078Z  INFO devimint: Testing incoming payment from CLN to client via LND gateway
00:00:59 2023-09-24T06:09:37.072332Z  INFO devimint: Testing receiving ecash notes
00:01:01 2023-09-24T06:09:39.558988Z  INFO devimint: Testing client deposit
00:01:01 2023-09-24T06:09:39.695532Z  INFO devimint::federation: Peg-in amount=100000
00:01:01 2023-09-24T06:09:39.841237Z  INFO devimint: Sending funds from bitcoind amount=100000 addr="bcrt1qcw2y049wsy4fvqv3wc3e7g228juwl6qq3fa5tngkswpetyvq69qqfwa3z2"
00:01:01 2023-09-24T06:09:39.862860Z  INFO devimint: Mining bitcoin blocks block_num=21
00:01:07 2023-09-24T06:09:45.792450Z  INFO devimint: Testing client withdraw
00:01:10 2023-09-24T06:09:48.031804Z  INFO devimint: sending SIGKILL to faucet and waiting for it to exit
00:01:10 2023-09-24T06:09:48.032774Z  INFO devimint: sending SIGKILL to esplora and waiting for it to exit
00:01:10 2023-09-24T06:09:48.034271Z  INFO devimint: sending SIGKILL to electrs and waiting for it to exit
00:01:10 2023-09-24T06:09:48.035130Z  INFO devimint: sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:01:10 2023-09-24T06:09:48.040728Z  INFO devimint: sending SIGKILL to gatewayd-cln and waiting for it to exit
00:01:10 2023-09-24T06:09:48.046610Z  INFO devimint: sending SIGKILL to fedimintd-0 and waiting for it to exit
00:01:10 2023-09-24T06:09:48.052774Z  INFO devimint: sending SIGKILL to fedimintd-1 and waiting for it to exit
00:01:10 2023-09-24T06:09:48.061126Z  INFO devimint: sending SIGKILL to fedimintd-2 and waiting for it to exit
00:01:10 2023-09-24T06:09:48.066945Z  INFO devimint: sending SIGKILL to fedimintd-3 and waiting for it to exit
00:01:10 2023-09-24T06:09:48.072952Z  INFO devimint: sending SIGKILL to lnd and waiting for it to exit
00:01:10 2023-09-24T06:09:48.079119Z  INFO devimint: sending SIGTERM to lightningd and waiting for it to exit
00:01:10 2023-09-24T06:09:48.079876Z  INFO devimint: sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: devimint_cli_test
## START: load_test_tool_test
00:00:00 Setting up env variables in /tmp/nix-shell.15Fnaw/nix-shell.t4o0QG/fm-QGYW
00:00:01     Finished dev [unoptimized + debuginfo] target(s) in 1.06s
00:00:01 2023-09-24T06:08:44.713959Z  INFO devimint: Test setup in "/tmp/nix-shell.15Fnaw/nix-shell.t4o0QG/fm-QGYW/cfg"
00:00:01 2023-09-24T06:08:44.724403Z  WARN devimint: Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:04 2023-09-24T06:08:47.271073Z  INFO devimint: electrs started
00:00:04 2023-09-24T06:08:47.271816Z  INFO devimint: esplora started
00:00:04 2023-09-24T06:08:47.271860Z  INFO devimint::federation: fedimintd-0 started
00:00:04 2023-09-24T06:08:47.278739Z  INFO devimint::federation: fedimintd-1 started
00:00:04 2023-09-24T06:08:47.284405Z  INFO devimint::federation: fedimintd-2 started
00:00:04 2023-09-24T06:08:47.289833Z  INFO devimint::federation: fedimintd-3 started
00:00:04 2023-09-24T06:08:47.299522Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:05 2023-09-24T06:08:48.313419Z  INFO devimint::federation: Connected to 0
00:00:05 2023-09-24T06:08:48.319166Z  INFO devimint::federation: Connected to 1
00:00:05 2023-09-24T06:08:48.322715Z  INFO devimint::federation: Connected to 2
00:00:05 2023-09-24T06:08:48.325781Z  INFO devimint::federation: Connected to 3
00:00:05 2023-09-24T06:08:48.360987Z  INFO devimint::federation: calling set_config_gen_connections for 1 random-kVs1i1
00:00:05 2023-09-24T06:08:48.372179Z  INFO devimint::federation: calling set_config_gen_connections for 2 random-G6KiR2
00:00:05 2023-09-24T06:08:48.386934Z  INFO devimint::federation: calling set_config_gen_connections for 3 random-Viqv03
00:00:05 2023-09-24T06:08:48.437265Z  INFO devimint::federation: Running DKG...
00:00:10 2023-09-24T06:08:53.750555Z  INFO devimint: lightning started
00:00:10 2023-09-24T06:08:53.760438Z  INFO devimint: block sync done
00:00:10 2023-09-24T06:08:53.779657Z  INFO devimint: Sending funds from bitcoind amount=100000000 addr="bcrt1qlg2nhm85ez4pdc4kjc6l2lrmhlj6txfvxgjhdf"
00:00:10 2023-09-24T06:08:53.800392Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:11 2023-09-24T06:08:54.453453Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:12 2023-09-24T06:08:55.825208Z  INFO devimint: gateways started
00:00:38 2023-09-24T06:09:21.864460Z  INFO devimint::federation: DKG successfully complete. Starting consensus...
00:00:38 2023-09-24T06:09:21.870952Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:38 2023-09-24T06:09:21.871154Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:38 2023-09-24T06:09:21.871391Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:39 2023-09-24T06:09:22.885589Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:40 2023-09-24T06:09:23.899626Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:40 2023-09-24T06:09:23.899917Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:40 2023-09-24T06:09:23.900227Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:41 2023-09-24T06:09:24.910124Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:41 2023-09-24T06:09:24.910392Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:41 2023-09-24T06:09:24.910669Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:42 2023-09-24T06:09:25.913787Z  INFO devimint::federation: Consensus is running
00:00:42 2023-09-24T06:09:25.914171Z  INFO devimint::federation: copied client configs
00:00:42 2023-09-24T06:09:25.914198Z  INFO devimint: federation and gateways started
00:00:42 2023-09-24T06:09:25.914867Z  INFO devimint: Joining federation with the main client
00:00:45 2023-09-24T06:09:28.202682Z  INFO devimint: Generating first epoch
00:00:45 2023-09-24T06:09:28.219784Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:45 2023-09-24T06:09:28.512256Z  INFO devimint: await gateways registered
00:00:45 2023-09-24T06:09:28.696267Z  INFO devimint: gateways registered
00:00:45 2023-09-24T06:09:28.950643Z  INFO devimint::federation: Using cln gateway
00:00:45 2023-09-24T06:09:28.950679Z  INFO devimint: starting dev federation took 44.236466568s
00:00:45 2023-09-24T06:09:28.950708Z  INFO devimint::federation: Peg-in amount=10000
00:00:46 2023-09-24T06:09:29.144325Z  INFO devimint: Sending funds from bitcoind amount=10000 addr="bcrt1quzvtuh7jtxmdpqvrvm0z4rlf2e9ypt65438m0mywdphfc3p56vnsayraqj"
00:00:46 2023-09-24T06:09:29.176837Z  INFO devimint: Mining bitcoin blocks block_num=21
00:01:02 2 reissue_notes: avg 1.989579323s, median 2.633621401s, max 2.633621401s, min 1.345537245s
00:01:02 1 gateway_pay_invoice: avg 3.821174564s, median 3.821174564s, max 3.821174564s, min 3.821174564s
00:01:12 1 gateway_pay_invoice: avg 3.357333383s, median 3.357333383s, max 3.357333383s, min 3.357333383s (compared to previous: avg: -12.14%, median: -12.14%, max: -12.14%, min: -12.14%)
00:01:12 2 reissue_notes: avg 2.022698687s, median 2.200037941s, max 2.200037941s, min 1.845359433s (compared to previous: avg: +1.66%, median: -16.45%, max: -16.45%, min: +37.17%)
00:01:12 2023-09-24T06:09:55.196675Z  INFO devimint: sending SIGKILL to fedimintd-0 and waiting for it to exit
00:01:12 2023-09-24T06:09:55.205864Z  INFO devimint: sending SIGKILL to fedimintd-1 and waiting for it to exit
00:01:12 2023-09-24T06:09:55.215577Z  INFO devimint: sending SIGKILL to fedimintd-2 and waiting for it to exit
00:01:12 2023-09-24T06:09:55.222656Z  INFO devimint: sending SIGKILL to fedimintd-3 and waiting for it to exit
00:01:12 2023-09-24T06:09:55.230777Z  INFO devimint: sending SIGKILL to gatewayd-cln and waiting for it to exit
00:01:12 2023-09-24T06:09:55.245211Z  INFO devimint: sending SIGTERM to lightningd and waiting for it to exit
00:01:12 2023-09-24T06:09:55.246759Z  INFO devimint: sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:01:12 2023-09-24T06:09:55.259807Z  INFO devimint: sending SIGKILL to lnd and waiting for it to exit
00:01:12 2023-09-24T06:09:55.263031Z  INFO devimint: sending SIGKILL to electrs and waiting for it to exit
00:01:12 2023-09-24T06:09:55.264922Z  INFO devimint: sending SIGKILL to esplora and waiting for it to exit
00:01:12 2023-09-24T06:09:55.269487Z  INFO devimint: sending SIGKILL to bitcoind and waiting for it to exit
00:01:12 2023-09-24T06:09:55.272596Z  INFO devimint: sending SIGKILL to faucet and waiting for it to exit
## COMPLETE: load_test_tool_test
## START: latency_test
00:00:00 Setting up env variables in /tmp/nix-shell.15Fnaw/nix-shell.t4o0QG/fm-0Nbl
00:00:00     Finished dev [unoptimized + debuginfo] target(s) in 0.24s
00:00:00 2023-09-24T06:08:17.533579Z  INFO devimint: Test setup in "/tmp/nix-shell.15Fnaw/nix-shell.t4o0QG/fm-0Nbl/cfg"
00:00:00 2023-09-24T06:08:17.534696Z  WARN devimint: Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:02 2023-09-24T06:08:19.999318Z  INFO devimint: electrs started
00:00:02 2023-09-24T06:08:20.000129Z  INFO devimint: esplora started
00:00:02 2023-09-24T06:08:20.000174Z  INFO devimint::federation: fedimintd-1 started
00:00:02 2023-09-24T06:08:20.002294Z  INFO devimint::federation: fedimintd-0 started
00:00:02 2023-09-24T06:08:20.002825Z  INFO devimint::federation: fedimintd-2 started
00:00:02 2023-09-24T06:08:20.003371Z  INFO devimint::federation: fedimintd-3 started
00:00:03 2023-09-24T06:08:20.004213Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:04 2023-09-24T06:08:21.007660Z  INFO devimint::federation: Connected to 0
00:00:04 2023-09-24T06:08:21.009614Z  INFO devimint::federation: Connected to 1
00:00:04 2023-09-24T06:08:21.011225Z  INFO devimint::federation: Connected to 2
00:00:04 2023-09-24T06:08:21.012770Z  INFO devimint::federation: Connected to 3
00:00:04 2023-09-24T06:08:21.021512Z  INFO devimint::federation: calling set_config_gen_connections for 1 random-q2CS61
00:00:04 2023-09-24T06:08:21.029338Z  INFO devimint::federation: calling set_config_gen_connections for 2 random-bXNNF2
00:00:04 2023-09-24T06:08:21.037123Z  INFO devimint::federation: calling set_config_gen_connections for 3 random-yPMWk3
00:00:04 2023-09-24T06:08:21.062925Z  INFO devimint::federation: Running DKG...
00:00:06 2023-09-24T06:08:23.151917Z  INFO devimint::federation: DKG successfully complete. Starting consensus...
00:00:06 2023-09-24T06:08:23.160380Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:06 2023-09-24T06:08:23.160618Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:06 2023-09-24T06:08:23.160902Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:07 2023-09-24T06:08:24.173270Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:07 2023-09-24T06:08:24.173521Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:07 2023-09-24T06:08:24.173762Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:07 2023-09-24T06:08:24.454743Z  INFO devimint: lightning started
00:00:07 2023-09-24T06:08:24.874757Z  INFO devimint: block sync done
00:00:07 2023-09-24T06:08:24.882565Z  INFO devimint: Sending funds from bitcoind amount=100000000 addr="bcrt1qfcsjaqrn74kta8k6dj0anwlncn4vmdlhga57pn"
00:00:07 2023-09-24T06:08:24.901720Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:08 2023-09-24T06:08:25.184624Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:08 2023-09-24T06:08:25.184946Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:08 2023-09-24T06:08:25.185226Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:09 2023-09-24T06:08:26.195688Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:09 2023-09-24T06:08:26.195936Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:09 2023-09-24T06:08:26.196212Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:09 2023-09-24T06:08:26.297626Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:10 2023-09-24T06:08:27.204445Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:10 2023-09-24T06:08:27.629214Z  WARN devimint::external: Getting chan info failed e=status: Unknown, message: "edge not found", details: [], metadata: MetadataMap { headers: {"content-type": "application/grpc"} }
00:00:11 2023-09-24T06:08:28.211457Z  INFO devimint::federation: Consensus is running
00:00:11 2023-09-24T06:08:28.211915Z  INFO devimint::federation: copied client configs
00:00:11 2023-09-24T06:08:28.835570Z  INFO devimint: gateways started
00:00:11 2023-09-24T06:08:28.835611Z  INFO devimint: federation and gateways started
00:00:11 2023-09-24T06:08:28.836351Z  INFO devimint: Joining federation with the main client
00:00:12 2023-09-24T06:08:29.274282Z  INFO devimint: Generating first epoch
00:00:12 2023-09-24T06:08:29.309483Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:12 2023-09-24T06:08:29.626735Z  INFO devimint: await gateways registered
00:00:12 2023-09-24T06:08:29.824606Z  INFO devimint: gateways registered
00:00:13 2023-09-24T06:08:30.028167Z  INFO devimint::federation: Using cln gateway
00:00:13 2023-09-24T06:08:30.028211Z  INFO devimint: starting dev federation took 12.49449774s
00:00:13 2023-09-24T06:08:30.028227Z  INFO devimint::federation: Peg-in amount=10000000
00:00:13 2023-09-24T06:08:30.180168Z  INFO devimint: Sending funds from bitcoind amount=10000000 addr="bcrt1qpc7yn9vsgd7uagjph6gq3vt3n5p8matd8lp7pg8kldzps4z8jyvs224wcu"
00:00:13 2023-09-24T06:08:30.197775Z  INFO devimint: Mining bitcoin blocks block_num=21
00:02:02 ================= RESULTS ==================
00:02:02 AVG REISSUE TIME: 3.017
00:02:02 AVG LN SEND TIME: 3.769
00:02:02 AVG LN RECV TIME: 3.648
00:02:02 2023-09-24T06:10:19.186732Z  INFO devimint: sending SIGKILL to faucet and waiting for it to exit
00:02:02 2023-09-24T06:10:19.187920Z  INFO devimint: sending SIGKILL to esplora and waiting for it to exit
00:02:02 2023-09-24T06:10:19.189658Z  INFO devimint: sending SIGKILL to electrs and waiting for it to exit
00:02:02 2023-09-24T06:10:19.190660Z  INFO devimint: sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:02:02 2023-09-24T06:10:19.201082Z  INFO devimint: sending SIGKILL to gatewayd-cln and waiting for it to exit
00:02:02 2023-09-24T06:10:19.210213Z  INFO devimint: sending SIGKILL to fedimintd-0 and waiting for it to exit
00:02:02 2023-09-24T06:10:19.217624Z  INFO devimint: sending SIGKILL to fedimintd-1 and waiting for it to exit
00:02:02 2023-09-24T06:10:19.224290Z  INFO devimint: sending SIGKILL to fedimintd-2 and waiting for it to exit
00:02:02 2023-09-24T06:10:19.232497Z  INFO devimint: sending SIGKILL to fedimintd-3 and waiting for it to exit
00:02:02 2023-09-24T06:10:19.239356Z  INFO devimint: sending SIGKILL to lnd and waiting for it to exit
00:02:02 2023-09-24T06:10:19.246436Z  INFO devimint: sending SIGTERM to lightningd and waiting for it to exit
00:02:02 2023-09-24T06:10:19.247504Z  INFO devimint: sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: latency_test
## START: reconnect_test
00:00:00 Setting up env variables in /tmp/nix-shell.15Fnaw/nix-shell.t4o0QG/fm-QfOz
00:00:00     Finished dev [unoptimized + debuginfo] target(s) in 0.26s
00:00:00 2023-09-24T06:08:22.782236Z  INFO devimint: Test setup in "/tmp/nix-shell.15Fnaw/nix-shell.t4o0QG/fm-QfOz/cfg"
00:00:00 2023-09-24T06:08:22.783488Z  WARN devimint: Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:03 2023-09-24T06:08:25.274451Z  INFO devimint: electrs started
00:00:03 2023-09-24T06:08:25.275180Z  INFO devimint: esplora started
00:00:03 2023-09-24T06:08:25.275210Z  INFO devimint::federation: fedimintd-3 started
00:00:03 2023-09-24T06:08:25.277766Z  INFO devimint::federation: fedimintd-0 started
00:00:03 2023-09-24T06:08:25.278435Z  INFO devimint::federation: fedimintd-1 started
00:00:03 2023-09-24T06:08:25.278932Z  INFO devimint::federation: fedimintd-2 started
00:00:03 2023-09-24T06:08:25.283312Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:04 2023-09-24T06:08:26.286633Z  INFO devimint::federation: Connected to 0
00:00:04 2023-09-24T06:08:26.288161Z  INFO devimint::federation: Connected to 1
00:00:04 2023-09-24T06:08:26.289909Z  INFO devimint::federation: Connected to 2
00:00:04 2023-09-24T06:08:26.291554Z  INFO devimint::federation: Connected to 3
00:00:04 2023-09-24T06:08:26.299594Z  INFO devimint::federation: calling set_config_gen_connections for 1 random-tDPTI1
00:00:04 2023-09-24T06:08:26.306743Z  INFO devimint::federation: calling set_config_gen_connections for 2 random-9qst52
00:00:04 2023-09-24T06:08:26.314687Z  INFO devimint::federation: calling set_config_gen_connections for 3 random-B85FO3
00:00:04 2023-09-24T06:08:26.342878Z  INFO devimint::federation: Running DKG...
00:00:06 2023-09-24T06:08:28.601717Z  INFO devimint::federation: DKG successfully complete. Starting consensus...
00:00:06 2023-09-24T06:08:28.608802Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:06 2023-09-24T06:08:28.609066Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:06 2023-09-24T06:08:28.609410Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:07 2023-09-24T06:08:29.622077Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: i/o error: Transport endpoint is not connected (os error 107)
00:00:07 2023-09-24T06:08:29.622401Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:07 2023-09-24T06:08:29.734879Z  INFO devimint: lightning started
00:00:08 2023-09-24T06:08:30.167015Z  INFO devimint: block sync done
00:00:08 2023-09-24T06:08:30.172547Z  INFO devimint: Sending funds from bitcoind amount=100000000 addr="bcrt1q3jwl643nwgh7ga3gxcd0frk2w34gzq2a8n6u4h"
00:00:08 2023-09-24T06:08:30.187273Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:08 2023-09-24T06:08:30.632712Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:08 2023-09-24T06:08:30.633725Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:08 2023-09-24T06:08:30.634081Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:09 2023-09-24T06:08:31.645230Z ERROR jsonrpsee_core::client::async_client: [backend]: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:09 2023-09-24T06:08:31.645524Z  INFO devimint::federation: Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded("Networking or low-level protocol error: WebSocket connection error: connection closed"))} }, trying to continue...
00:00:09 2023-09-24T06:08:31.645842Z  WARN net::api: Unable to connect to peer peer_id=0 err=Networking or low-level protocol error: Error when opening the TCP socket: Connection refused (os error 111)
00:00:09 2023-09-24T06:08:31.661505Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:10 2023-09-24T06:08:32.168711Z  WARN devimint::external: Getting chan info failed e=status: Unknown, message: "edge not found", details: [], metadata: MetadataMap { headers: {"content-type": "application/grpc"} }
00:00:10 2023-09-24T06:08:32.677049Z  INFO devimint::federation: Consensus is running
00:00:10 2023-09-24T06:08:32.684157Z  INFO devimint::federation: copied client configs
00:00:10 2023-09-24T06:08:32.992845Z  INFO devimint: gateways started
00:00:10 2023-09-24T06:08:32.992898Z  INFO devimint: federation and gateways started
00:00:11 2023-09-24T06:08:33.036125Z  INFO devimint: Joining federation with the main client
00:00:13 2023-09-24T06:08:35.051324Z  INFO devimint: Generating first epoch
00:00:13 2023-09-24T06:08:35.075127Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:13 2023-09-24T06:08:35.400539Z  INFO devimint: await gateways registered
00:00:13 2023-09-24T06:08:35.564483Z  INFO devimint: gateways registered
00:00:13 2023-09-24T06:08:35.768136Z  INFO devimint::federation: Using cln gateway
00:00:13 2023-09-24T06:08:35.768177Z  INFO devimint: starting dev federation took 12.985807301s
00:00:13 2023-09-24T06:08:35.768197Z  INFO devimint: Mining bitcoin blocks block_num=110
00:00:16 2023-09-24T06:08:38.788282Z  INFO devimint: sending SIGTERM to fedimintd-0 and waiting for it to exit
00:00:49 2023-09-24T06:09:11.018576Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:49 2023-09-24T06:09:11.915636Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:51 2023-09-24T06:09:13.106267Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:52 2023-09-24T06:09:14.181229Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:53 2023-09-24T06:09:15.253698Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:54 2023-09-24T06:09:16.473154Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:55 2023-09-24T06:09:17.585724Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:56 2023-09-24T06:09:18.774099Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:57 2023-09-24T06:09:19.891132Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:58 2023-09-24T06:09:21.003458Z  INFO devimint: Mining bitcoin blocks block_num=10
00:01:00 2023-09-24T06:09:22.045559Z  INFO devimint::federation: fedimintd-0 started
00:01:00 2023-09-24T06:09:22.063506Z  INFO devimint: Mining bitcoin blocks block_num=10
00:01:00 2023-09-24T06:09:22.952057Z  INFO devimint: Mining bitcoin blocks block_num=10
00:01:01 2023-09-24T06:09:23.381346Z  INFO devimint: Mining bitcoin blocks block_num=10
00:01:01 2023-09-24T06:09:23.749860Z  INFO devimint: Mining bitcoin blocks block_num=10
00:01:02 2023-09-24T06:09:24.141138Z  INFO devimint: Mining bitcoin blocks block_num=10
00:01:02 2023-09-24T06:09:24.518483Z  INFO devimint: Mining bitcoin blocks block_num=10
00:01:02 2023-09-24T06:09:24.891729Z  INFO devimint: Mining bitcoin blocks block_num=10
00:01:03 2023-09-24T06:09:25.259008Z  INFO devimint: Mining bitcoin blocks block_num=10
00:01:04 2023-09-24T06:09:26.415632Z  INFO devimint: Mining bitcoin blocks block_num=10
00:01:05 2023-09-24T06:09:27.553824Z  INFO devimint: Mining bitcoin blocks block_num=10
00:01:06 2023-09-24T06:09:28.950564Z  INFO devimint: Server 0 successfully rejoined!
00:01:06 2023-09-24T06:09:28.950618Z  INFO devimint: Mining bitcoin blocks block_num=100
00:01:08 2023-09-24T06:09:30.633214Z  INFO devimint: sending SIGTERM to fedimintd-1 and waiting for it to exit
00:01:32 2023-09-24T06:09:54.797040Z  INFO devimint: Mining bitcoin blocks block_num=100
00:01:34 2023-09-24T06:09:56.326896Z  INFO devimint: sending SIGTERM to fedimintd-2 and waiting for it to exit
00:01:56 2023-09-24T06:10:18.204071Z  INFO devimint: sending SIGTERM to fedimintd-3 and waiting for it to exit
00:02:16 2023-09-24T06:10:38.897375Z  INFO devimint::federation: fedimintd-1 started
00:02:16 2023-09-24T06:10:38.897941Z  INFO devimint::federation: fedimintd-2 started
00:02:16 2023-09-24T06:10:38.898333Z  INFO devimint::federation: fedimintd-3 started
00:02:30 2023-09-24T06:10:52.504466Z  INFO devimint: fm success: reconnect-test
00:02:30 2023-09-24T06:10:52.504522Z  INFO devimint: sending SIGKILL to faucet and waiting for it to exit
00:02:30 2023-09-24T06:10:52.505481Z  INFO devimint: sending SIGKILL to esplora and waiting for it to exit
00:02:30 2023-09-24T06:10:52.506993Z  INFO devimint: sending SIGKILL to electrs and waiting for it to exit
00:02:30 2023-09-24T06:10:52.507858Z  INFO devimint: sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:02:30 2023-09-24T06:10:52.515496Z  INFO devimint: sending SIGKILL to gatewayd-cln and waiting for it to exit
00:02:30 2023-09-24T06:10:52.523482Z  INFO devimint: sending SIGKILL to fedimintd-0 and waiting for it to exit
00:02:30 2023-09-24T06:10:52.530600Z  INFO devimint: sending SIGKILL to fedimintd-1 and waiting for it to exit
00:02:30 2023-09-24T06:10:52.537052Z  INFO devimint: sending SIGKILL to fedimintd-2 and waiting for it to exit
00:02:30 2023-09-24T06:10:52.542427Z  INFO devimint: sending SIGKILL to fedimintd-3 and waiting for it to exit
00:02:30 2023-09-24T06:10:52.547486Z  INFO devimint: sending SIGKILL to lnd and waiting for it to exit
00:02:30 2023-09-24T06:10:52.553422Z  INFO devimint: sending SIGTERM to lightningd and waiting for it to exit
00:02:30 2023-09-24T06:10:52.554124Z  INFO devimint: sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: reconnect_test
## START: backend_test_electrs
00:00:00 Setting up env variables in /tmp/nix-shell.15Fnaw/nix-shell.t4o0QG/fm-aCcN
00:00:00     Finished dev [unoptimized + debuginfo] target(s) in 0.24s
00:00:00 ### Setting up tests
00:00:00 2023-09-24T06:08:07.477861Z  INFO devimint: Test setup in "/tmp/nix-shell.15Fnaw/nix-shell.t4o0QG/fm-aCcN/cfg"
00:00:00 2023-09-24T06:08:07.478901Z  WARN devimint: Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:02 2023-09-24T06:08:09.884615Z  INFO devimint: electrs started
00:00:02 2023-09-24T06:08:09.885472Z  INFO devimint: esplora started
00:00:06 2023-09-24T06:08:13.154284Z  INFO devimint: block sync done
00:00:06 2023-09-24T06:08:13.158126Z  INFO devimint: Sending funds from bitcoind amount=100000000 addr="bcrt1qwj6fgn85d3emv590dsvt5ewwq23x4dpd490vh0"
00:00:06 2023-09-24T06:08:13.169571Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:06 2023-09-24T06:08:13.744684Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:08 2023-09-24T06:08:15.054282Z  INFO devimint: starting base daemons took 7.576293184s
00:00:08 ### Setting up tests - complete
00:00:08 ### Testing against electrs
00:00:09     Finished test [unoptimized + debuginfo] target(s) in 0.27s
00:00:09     Starting 6 tests across 52 binaries
00:01:09         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests on_chain_peg_in_and_peg_out_happy_case
00:01:09         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:01:09         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_out_fail_refund
00:01:09         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_must_wait_for_available_utxos
00:01:09         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_support_rbf
00:01:09         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests sanity_check_bitcoin_blocks
00:01:15         PASS [  66.677s] fedimint-wallet-tests::fedimint_wallet_tests peg_out_fail_refund
00:01:25         PASS [  76.448s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_support_rbf
00:01:27         PASS [  78.013s] fedimint-wallet-tests::fedimint_wallet_tests sanity_check_bitcoin_blocks
00:01:31         PASS [  82.458s] fedimint-wallet-tests::fedimint_wallet_tests on_chain_peg_in_and_peg_out_happy_case
00:01:40         PASS [  91.304s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_must_wait_for_available_utxos
00:02:09         SLOW [>120.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:03:09         SLOW [>180.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:04:09         SLOW [>240.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:05:09         SLOW [>300.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:05:56         PASS [ 347.535s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:05:56 ------------
00:05:56      Summary [ 347.535s] 6 tests run: 6 passed (6 slow), 0 skipped
00:05:56 ### Testing against electrs - complete
00:05:56 fm success: rust-tests
00:05:56 Auto-killing external-daemons(PID: 76316) and waiting it to finish...
00:05:56 2023-09-24T06:14:03.797112Z  INFO task: signal received, starting graceful shutdown
00:05:56 2023-09-24T06:14:03.800302Z  INFO devimint: sending SIGTERM to lightningd and waiting for it to exit
00:05:56 2023-09-24T06:14:03.801276Z  INFO devimint: sending SIGKILL to lnd and waiting for it to exit
00:05:56 2023-09-24T06:14:03.804931Z  INFO devimint: sending SIGKILL to electrs and waiting for it to exit
00:05:56 2023-09-24T06:14:03.806556Z  INFO devimint: sending SIGKILL to esplora and waiting for it to exit
00:05:56 2023-09-24T06:14:03.807907Z  INFO devimint: sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: backend_test_electrs
## START: backend_test_esplora
00:00:00 Setting up env variables in /tmp/nix-shell.15Fnaw/nix-shell.t4o0QG/fm-bHAV
00:00:00     Finished dev [unoptimized + debuginfo] target(s) in 0.23s
00:00:00 ### Setting up tests
00:00:00 2023-09-24T06:08:12.491957Z  INFO devimint: Test setup in "/tmp/nix-shell.15Fnaw/nix-shell.t4o0QG/fm-bHAV/cfg"
00:00:00 2023-09-24T06:08:12.492968Z  WARN devimint: Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:02 2023-09-24T06:08:14.907122Z  INFO devimint: electrs started
00:00:02 2023-09-24T06:08:14.907972Z  INFO devimint: esplora started
00:00:06 2023-09-24T06:08:18.166542Z  INFO devimint: block sync done
00:00:06 2023-09-24T06:08:18.170057Z  INFO devimint: Sending funds from bitcoind amount=100000000 addr="bcrt1qurypgqpaqc6346dpw20pa4a6jyrwp7yh72z5ju"
00:00:06 2023-09-24T06:08:18.182434Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:06 2023-09-24T06:08:18.772425Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:08 2023-09-24T06:08:20.084381Z  INFO devimint: starting base daemons took 7.592271678s
00:00:08 ### Setting up tests - complete
00:00:08 ### Testing against esplora
00:00:09     Finished test [unoptimized + debuginfo] target(s) in 0.65s
00:00:09     Starting 6 tests across 52 binaries
00:01:09         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests on_chain_peg_in_and_peg_out_happy_case
00:01:09         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:01:09         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_out_fail_refund
00:01:09         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_must_wait_for_available_utxos
00:01:09         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_support_rbf
00:01:09         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests sanity_check_bitcoin_blocks
00:01:58         PASS [ 108.472s] fedimint-wallet-tests::fedimint_wallet_tests on_chain_peg_in_and_peg_out_happy_case
00:02:09         SLOW [>120.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:02:09         SLOW [>120.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_out_fail_refund
00:02:09         SLOW [>120.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_must_wait_for_available_utxos
00:02:09         SLOW [>120.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_support_rbf
00:02:09         SLOW [>120.000s] fedimint-wallet-tests::fedimint_wallet_tests sanity_check_bitcoin_blocks
00:03:09         SLOW [>180.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:03:09         SLOW [>180.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_out_fail_refund
00:03:09         SLOW [>180.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_must_wait_for_available_utxos
00:03:09         SLOW [>180.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_support_rbf
00:03:09         SLOW [>180.000s] fedimint-wallet-tests::fedimint_wallet_tests sanity_check_bitcoin_blocks
00:03:15         PASS [ 185.746s] fedimint-wallet-tests::fedimint_wallet_tests peg_out_fail_refund
00:03:36         PASS [ 206.713s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_must_wait_for_available_utxos
00:03:43         PASS [ 213.837s] fedimint-wallet-tests::fedimint_wallet_tests sanity_check_bitcoin_blocks
00:04:08         PASS [ 238.838s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_support_rbf
00:04:09         SLOW [>240.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:05:09         SLOW [>300.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:05:58         PASS [ 348.996s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:05:58 ------------
00:05:58      Summary [ 349.031s] 6 tests run: 6 passed (6 slow), 0 skipped
00:05:58 ### Testing against esplora - complete
00:05:58 fm success: rust-tests
00:05:58 Auto-killing external-daemons(PID: 76838) and waiting it to finish...
00:05:58 2023-09-24T06:14:10.861605Z  INFO task: signal received, starting graceful shutdown
00:05:58 2023-09-24T06:14:10.864729Z  INFO devimint: sending SIGTERM to lightningd and waiting for it to exit
00:05:58 2023-09-24T06:14:10.865735Z  INFO devimint: sending SIGKILL to lnd and waiting for it to exit
00:05:58 2023-09-24T06:14:10.868780Z  INFO devimint: sending SIGKILL to electrs and waiting for it to exit
00:05:58 2023-09-24T06:14:10.869759Z  INFO devimint: sending SIGKILL to esplora and waiting for it to exit
00:05:58 2023-09-24T06:14:10.871299Z  INFO devimint: sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: backend_test_esplora
## START: backend_test_bitcoind
00:00:00 Setting up env variables in /tmp/nix-shell.15Fnaw/nix-shell.t4o0QG/fm-Kmgx
00:00:00     Finished dev [unoptimized + debuginfo] target(s) in 0.25s
00:00:00 ### Setting up tests
00:00:00 2023-09-24T06:08:02.481998Z  INFO devimint: Test setup in "/tmp/nix-shell.15Fnaw/nix-shell.t4o0QG/fm-Kmgx/cfg"
00:00:00 2023-09-24T06:08:02.483093Z  WARN devimint: Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:02 2023-09-24T06:08:04.819992Z  INFO devimint: electrs started
00:00:02 2023-09-24T06:08:04.821410Z  INFO devimint: esplora started
00:00:06 2023-09-24T06:08:08.082670Z  INFO devimint: block sync done
00:00:06 2023-09-24T06:08:08.087651Z  INFO devimint: Sending funds from bitcoind amount=100000000 addr="bcrt1qwxnx7afutlw5jsme0hfr7j238nh355uneyw38f"
00:00:06 2023-09-24T06:08:08.101529Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:06 2023-09-24T06:08:08.689148Z  INFO devimint: Mining bitcoin blocks block_num=10
00:00:07 2023-09-24T06:08:09.994249Z  WARN devimint::external: Empty chan info edge=ChannelEdge { channel_id: 123145302376448, chan_point: "732b6a687df7af57e108ba2f8f166d7dc2ae753fc4828635ce1b0633a38e84e8:0", last_update: 1695535689, node1_pub: "029613e12962b8f6ba1f01e1c4927b8dfdb2df802b28f66938d6c08f64c0c4d866", node2_pub: "03525a283a851615628adb9d56aef647822120e8af11f01468395f6306f99b25a6", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1695535689 }) }
00:00:09 2023-09-24T06:08:11.197948Z  WARN devimint::external: Empty chan info edge=ChannelEdge { channel_id: 123145302376448, chan_point: "732b6a687df7af57e108ba2f8f166d7dc2ae753fc4828635ce1b0633a38e84e8:0", last_update: 1695535689, node1_pub: "029613e12962b8f6ba1f01e1c4927b8dfdb2df802b28f66938d6c08f64c0c4d866", node2_pub: "03525a283a851615628adb9d56aef647822120e8af11f01468395f6306f99b25a6", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1695535689 }) }
00:00:10 2023-09-24T06:08:12.820452Z  INFO devimint: starting base daemons took 10.338303524s
00:00:11 ### Setting up tests - complete
00:00:11 ### Testing against bitcoind
00:00:11     Finished test [unoptimized + debuginfo] target(s) in 0.24s
00:00:12     Starting 5 tests across 52 binaries
00:00:12         PASS [   0.038s] fedimint-dummy-tests::fedimint_dummy_tests client_ignores_unknown_module
00:00:12         PASS [   0.049s] fedimint-dummy-tests::fedimint_dummy_tests unbalanced_transactions_get_rejected
00:00:14         PASS [   2.465s] fedimint-dummy-tests::fedimint_dummy_tests can_threshold_sign_message
00:00:17         PASS [   5.425s] fedimint-dummy-tests::fedimint_dummy_tests can_print_and_send_money
00:00:56         PASS [  44.122s] fedimint-dummy-tests::fedimint_dummy_tests federation_should_abort_if_balance_sheet_is_negative
00:00:56 ------------
00:00:56      Summary [  44.126s] 5 tests run: 5 passed, 0 skipped
00:00:56     Finished test [unoptimized + debuginfo] target(s) in 0.45s
00:00:56     Starting 1 test across 52 binaries
00:01:13         PASS [  16.709s] fedimint-mint-tests::fedimint_mint_tests sends_ecash_out_of_band
00:01:13 ------------
00:01:13      Summary [  16.710s] 1 test run: 1 passed, 0 skipped
00:01:13     Finished test [unoptimized + debuginfo] target(s) in 0.26s
00:01:13     Starting 6 tests across 52 binaries
00:02:13         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests on_chain_peg_in_and_peg_out_happy_case
00:02:13         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:02:13         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_out_fail_refund
00:02:13         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_must_wait_for_available_utxos
00:02:13         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_support_rbf
00:02:13         SLOW [> 60.000s] fedimint-wallet-tests::fedimint_wallet_tests sanity_check_bitcoin_blocks
00:03:13         SLOW [>120.000s] fedimint-wallet-tests::fedimint_wallet_tests on_chain_peg_in_and_peg_out_happy_case
00:03:13         SLOW [>120.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:03:13         SLOW [>120.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_out_fail_refund
00:03:13         SLOW [>120.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_must_wait_for_available_utxos
00:03:13         SLOW [>120.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_support_rbf
00:03:13         SLOW [>120.000s] fedimint-wallet-tests::fedimint_wallet_tests sanity_check_bitcoin_blocks
00:04:13         SLOW [>180.000s] fedimint-wallet-tests::fedimint_wallet_tests on_chain_peg_in_and_peg_out_happy_case
00:04:13         SLOW [>180.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:04:13         SLOW [>180.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_out_fail_refund
00:04:13         SLOW [>180.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_must_wait_for_available_utxos
00:04:13         SLOW [>180.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_support_rbf
00:04:13         SLOW [>180.000s] fedimint-wallet-tests::fedimint_wallet_tests sanity_check_bitcoin_blocks
00:05:13         SLOW [>240.000s] fedimint-wallet-tests::fedimint_wallet_tests on_chain_peg_in_and_peg_out_happy_case
00:05:13         SLOW [>240.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:05:13         SLOW [>240.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_out_fail_refund
00:05:13         SLOW [>240.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_must_wait_for_available_utxos
00:05:13         SLOW [>240.000s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_support_rbf
00:05:13         SLOW [>240.000s] fedimint-wallet-tests::fedimint_wallet_tests sanity_check_bitcoin_blocks
00:05:25         PASS [ 251.671s] fedimint-wallet-tests::fedimint_wallet_tests peg_out_fail_refund
00:05:34         PASS [ 260.578s] fedimint-wallet-tests::fedimint_wallet_tests on_chain_peg_in_and_peg_out_happy_case
00:05:35         PASS [ 261.729s] fedimint-wallet-tests::fedimint_wallet_tests sanity_check_bitcoin_blocks
00:05:46         PASS [ 272.632s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_support_rbf
00:06:01         PASS [ 287.626s] fedimint-wallet-tests::fedimint_wallet_tests peg_outs_must_wait_for_available_utxos
00:06:08         PASS [ 295.078s] fedimint-wallet-tests::fedimint_wallet_tests peg_ins_that_are_unconfirmed_are_rejected
00:06:08 ------------
00:06:08      Summary [ 295.079s] 6 tests run: 6 passed (6 slow), 0 skipped
00:06:09     Finished test [unoptimized + debuginfo] target(s) in 0.23s
00:06:09     Starting 4 tests across 52 binaries
00:06:15         PASS [   6.187s] fedimint-ln-tests::fedimint_ln_tests rejects_wrong_network_invoice
00:06:16         PASS [   7.290s] fedimint-ln-tests::fedimint_ln_tests test_can_attach_extra_meta_to_receive_operation
00:06:25         PASS [  16.719s] fedimint-ln-tests::fedimint_ln_tests makes_internal_payments_within_federation
00:06:39         PASS [  30.192s] fedimint-ln-tests::fedimint_ln_tests can_switch_active_gateway
00:06:39 ------------
00:06:39      Summary [  30.192s] 4 tests run: 4 passed, 0 skipped
00:06:39     Finished test [unoptimized + debuginfo] target(s) in 0.26s
00:06:39     Starting 17 tests across 52 binaries
00:06:39         PASS [   0.006s] ln-gateway utils::tests::retry_fail_with_three_attempts
00:06:39         PASS [   0.003s] ln-gateway utils::tests::retry_succeed_with_one_attempt
00:07:39         SLOW [> 60.000s] ln-gateway::gatewayd-integration-tests test_gateway_can_pay_ldk_node
00:07:54         PASS [  75.178s] ln-gateway::gatewayd-integration-tests test_gateway_can_pay_ldk_node
00:08:29         PASS [  34.197s] ln-gateway::gatewayd-integration-tests test_gateway_cannot_claim_invalid_preimage
00:08:57         PASS [  27.943s] ln-gateway::gatewayd-integration-tests test_gateway_cannot_pay_expired_invoice
00:09:24         PASS [  27.399s] ln-gateway::gatewayd-integration-tests test_gateway_client_intercept_htlc_invalid_offer
00:10:01         PASS [  37.270s] ln-gateway::gatewayd-integration-tests test_gateway_client_intercept_htlc_no_funds
00:10:20         PASS [  18.403s] ln-gateway::gatewayd-integration-tests test_gateway_client_intercept_offer_does_not_exist
00:10:45         PASS [  25.538s] ln-gateway::gatewayd-integration-tests test_gateway_client_intercept_valid_htlc
00:11:09         PASS [  24.106s] ln-gateway::gatewayd-integration-tests test_gateway_client_pay_unpayable_invoice
00:11:24         PASS [  14.932s] ln-gateway::gatewayd-integration-tests test_gateway_client_pay_valid_invoice
00:11:28         PASS [   3.612s] ln-gateway::gatewayd-integration-tests test_gateway_configuration
00:11:45         PASS [  16.695s] ln-gateway::gatewayd-integration-tests test_gateway_filters_route_hints_by_inbound
00:11:49         PASS [   4.802s] ln-gateway::gatewayd-integration-tests test_gateway_register_with_federation
00:11:55         PASS [   6.109s] ln-gateway::gatewayd-integration-tests test_gateway_shows_balance_for_any_connected_federation
00:12:28         PASS [  32.584s] ln-gateway::gatewayd-integration-tests test_gateway_shows_info_about_all_connected_federations
00:13:01         PASS [  32.530s] ln-gateway::gatewayd-integration-tests test_gateway_supports_connecting_multiple_federations
00:13:01 ------------
00:13:01      Summary [ 381.309s] 17 tests run: 17 passed (1 slow), 0 skipped
00:13:01 ### Testing against bitcoind - complete
00:13:01 fm success: rust-tests
00:13:01 Auto-killing external-daemons(PID: 75901) and waiting it to finish...
00:13:01 2023-09-24T06:21:03.066994Z  INFO task: signal received, starting graceful shutdown
00:13:01 2023-09-24T06:21:03.070622Z  INFO devimint: sending SIGTERM to lightningd and waiting for it to exit
00:13:01 2023-09-24T06:21:03.071530Z  INFO devimint: sending SIGKILL to lnd and waiting for it to exit
00:13:01 2023-09-24T06:21:03.076320Z  INFO devimint: sending SIGKILL to electrs and waiting for it to exit
00:13:01 2023-09-24T06:21:03.077478Z  INFO devimint: sending SIGKILL to esplora and waiting for it to exit
00:13:01 2023-09-24T06:21:03.078960Z  INFO devimint: sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: backend_test_bitcoind
All tests successful
test run 3
