Running backwards-compatibility tests for versions: v0.2.1
## START: always_success_test
## COMPLETE: always_success_test
## START: lightning_reconnect_test
00:00:01     Blocking waiting for file lock on package cache
00:00:01     Blocking waiting for file lock on package cache
00:00:03     Blocking waiting for file lock on build directory
00:00:04     Finished dev [unoptimized + debuginfo] target(s) in 3.16s
00:00:04 [2m2024-01-26T04:41:26.819297Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2317407"
00:00:04 [2m2024-01-26T04:41:26.822272Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:06 [2m2024-01-26T04:41:28.789452Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1q4y5pry9wmt4526gjcq8qnrfxzxdp2xl34f8d4k
00:00:10 [2m2024-01-26T04:41:32.366501Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1q4y5pry9wmt4526gjcq8qnrfxzxdp2xl34f8d4k
00:00:10 [2m2024-01-26T04:41:32.375747Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:10 [2m2024-01-26T04:41:32.435674Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:10 [2m2024-01-26T04:41:32.435742Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:00:10 [2m2024-01-26T04:41:32.543715Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:10 [2m2024-01-26T04:41:32.543806Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:00:10 [2m2024-01-26T04:41:32.547892Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:10 [2m2024-01-26T04:41:32.553738Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:00:11 [2m2024-01-26T04:41:33.595731Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:11 [2m2024-01-26T04:41:33.604383Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 1
00:00:11 [2m2024-01-26T04:41:33.616255Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 2
00:00:11 [2m2024-01-26T04:41:33.620455Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 3
00:00:11 [2m2024-01-26T04:41:33.719253Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 1 random-TjcqU1
00:00:11 [2m2024-01-26T04:41:33.723256Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 2 random-OvYcc2
00:00:11 [2m2024-01-26T04:41:33.744368Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 3 random-Y4B5j3
00:00:11 [2m2024-01-26T04:41:33.910264Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:24 [2m2024-01-26T04:41:46.086808Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m DKG successfully complete. Starting consensus...
00:00:32 [2m2024-01-26T04:41:54.888369Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:00:33 [2m2024-01-26T04:41:55.215091Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:00:33 [2m2024-01-26T04:41:55.219076Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:00:33 [2m2024-01-26T04:41:55.228181Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:00:33 [2m2024-01-26T04:41:55.231541Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:00:33 [2m2024-01-26T04:41:55.479354Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-1 and waiting for it to exit
00:00:33 [2m2024-01-26T04:41:55.495941Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-2 and waiting for it to exit
00:00:33 [2m2024-01-26T04:41:55.547889Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-3 and waiting for it to exit
00:00:33 [2m2024-01-26T04:41:55.633819Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
00:00:33 Error: polling lnd_startup after 20 retries
00:00:33 
00:00:33 Caused by:
00:00:33     status: Unknown, message: "the RPC server is in the process of starting up, but not yet ready to accept calls", details: [], metadata: MetadataMap { headers: {"content-type": "application/grpc"} }
## FAILED: lightning_reconnect_test
## START: gateway_reboot_test
00:00:00     Blocking waiting for file lock on package cache
00:00:01     Blocking waiting for file lock on package cache
00:00:01     Blocking waiting for file lock on package cache
00:00:01     Blocking waiting for file lock on build directory
00:00:01     Finished dev [unoptimized + debuginfo] target(s) in 0.84s
00:00:04 [2m2024-01-26T04:41:31.051298Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2318863"
00:00:04 [2m2024-01-26T04:41:31.059955Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:09 [2m2024-01-26T04:41:36.763820Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1qvc7z6g4syje9xh0m72xmyhvq53cgl6555jqsul
00:00:15 [2m2024-01-26T04:41:42.270377Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1qvc7z6g4syje9xh0m72xmyhvq53cgl6555jqsul
00:00:15 [2m2024-01-26T04:41:42.275757Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:15 [2m2024-01-26T04:41:42.296856Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:15 [2m2024-01-26T04:41:42.296931Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:00:15 [2m2024-01-26T04:41:42.411719Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:15 [2m2024-01-26T04:41:42.411811Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:00:15 [2m2024-01-26T04:41:42.447686Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:15 [2m2024-01-26T04:41:42.469352Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:00:16 [2m2024-01-26T04:41:43.521041Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:16 [2m2024-01-26T04:41:43.522440Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 1
00:00:16 [2m2024-01-26T04:41:43.524583Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 2
00:00:16 [2m2024-01-26T04:41:43.564706Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 3
00:00:16 [2m2024-01-26T04:41:43.583701Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 1 random-aBZHY1
00:00:16 [2m2024-01-26T04:41:43.589333Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 2 random-9yMYv2
00:00:16 [2m2024-01-26T04:41:43.595340Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 3 random-Jfndg3
00:00:16 [2m2024-01-26T04:41:43.816086Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:35 [2m2024-01-26T04:42:02.343776Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m DKG successfully complete. Starting consensus...
00:00:38 [2m2024-01-26T04:42:05.770650Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:00:38 [2m2024-01-26T04:42:05.944764Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:00:38 [2m2024-01-26T04:42:05.958364Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:00:38 [2m2024-01-26T04:42:05.961189Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:00:38 [2m2024-01-26T04:42:05.971750Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:00:39 [2m2024-01-26T04:42:06.294673Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-1 and waiting for it to exit
00:00:39 [2m2024-01-26T04:42:06.335901Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-2 and waiting for it to exit
00:00:39 [2m2024-01-26T04:42:06.379730Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-3 and waiting for it to exit
00:00:39 [2m2024-01-26T04:42:06.461343Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
00:00:39 Error: polling lnd_startup after 20 retries
00:00:39 
00:00:39 Caused by:
00:00:39     status: Unknown, message: "the RPC server is in the process of starting up, but not yet ready to accept calls", details: [], metadata: MetadataMap { headers: {"content-type": "application/grpc"} }
## FAILED: gateway_reboot_test
## START: latency_test
00:00:01     Finished dev [unoptimized + debuginfo] target(s) in 0.21s
00:00:01 [2m2024-01-26T04:41:12.237719Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2313339"
00:00:01 [2m2024-01-26T04:41:12.240061Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:02 [2m2024-01-26T04:41:13.824303Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1qkyyy4w2wtcc707jw47l5rfkh9v2qk486m2rznw
00:00:03 [2m2024-01-26T04:41:14.628186Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1qkyyy4w2wtcc707jw47l5rfkh9v2qk486m2rznw
00:00:03 [2m2024-01-26T04:41:14.629025Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:03 [2m2024-01-26T04:41:14.632840Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:03 [2m2024-01-26T04:41:14.632886Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:03 [2m2024-01-26T04:41:14.640119Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:03 [2m2024-01-26T04:41:14.640175Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:00:03 [2m2024-01-26T04:41:14.642471Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:00:03 [2m2024-01-26T04:41:14.642932Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:00:04 [2m2024-01-26T04:41:15.645953Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:04 [2m2024-01-26T04:41:15.646758Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 1
00:00:04 [2m2024-01-26T04:41:15.647347Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 2
00:00:04 [2m2024-01-26T04:41:15.647951Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 3
00:00:04 [2m2024-01-26T04:41:15.650847Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 1 random-A1o2L1
00:00:04 [2m2024-01-26T04:41:15.652703Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 2 random-xUHJX2
00:00:04 [2m2024-01-26T04:41:15.654692Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 3 random-OcEV33
00:00:04 [2m2024-01-26T04:41:15.661399Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:07 [2m2024-01-26T04:41:18.728550Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m DKG successfully complete. Starting consensus...
00:00:07 [2m2024-01-26T04:41:18.729912Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:07 [2m2024-01-26T04:41:18.730078Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:07 
00:00:07 Caused by:
00:00:07     connection closed)))} }, trying to continue...
00:00:08 [2m2024-01-26T04:41:19.709520Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m lightning started
00:00:08 [2m2024-01-26T04:41:19.733518Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:08 [2m2024-01-26T04:41:19.733695Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:08 
00:00:08 Caused by:
00:00:08     connection closed)))} }, trying to continue...
00:00:09 [2m2024-01-26T04:41:20.715789Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m block sync done
00:00:09 [2m2024-01-26T04:41:20.722328Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m100000000 [3maddr[0m[2m=[0m"bcrt1qwn6e0uelye9e27d04uffgedeny923d56eqt9md"
00:00:09 [2m2024-01-26T04:41:20.745933Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:09 [2m2024-01-26T04:41:20.901979Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:09 [2m2024-01-26T04:41:20.902180Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:09 
00:00:09 Caused by:
00:00:09     connection closed)))} }, trying to continue...
00:00:10 [2m2024-01-26T04:41:21.905945Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:10 [2m2024-01-26T04:41:21.906099Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:10 
00:00:10 Caused by:
00:00:10     connection closed)))} }, trying to continue...
00:00:10 [2m2024-01-26T04:41:22.001315Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:13 [2m2024-01-26T04:41:24.145116Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Getting chan info failed [3me[0m[2m=[0mstatus: Unknown, message: "edge not found", details: [], metadata: MetadataMap { headers: {"content-type": "application/grpc"} }
00:00:14 [2m2024-01-26T04:41:25.204314Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Empty chan info [3medge[0m[2m=[0mChannelEdge { channel_id: 123145302376449, chan_point: "762d5c15290b623ebe15640f82f27db7d516962718333a5d50b551debbd71732:1", last_update: 1706244084, node1_pub: "0223db78aaba6794e9c55b9c84c4c83066f9377e5b9a58e84818d836f23e8829b4", node2_pub: "0332048e66581902bbc2666e83418e34bb2a32f3df9c712e696fa2709e8469345b", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1706244084 }) }
00:00:15 [2m2024-01-26T04:41:26.316123Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways started
00:00:15 [2m2024-01-26T04:41:26.943869Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Consensus is running
00:00:15 [2m2024-01-26T04:41:26.951652Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m moved client configs
00:00:15 [2m2024-01-26T04:41:26.952563Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m federation and gateways started
00:00:15 [2m2024-01-26T04:41:26.959680Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Joining federation with the main client
00:00:16 [2m2024-01-26T04:41:27.268660Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Generating first epoch
00:00:16 [2m2024-01-26T04:41:27.268686Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:01:21 [2m2024-01-26T04:42:32.095815Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:01:21 [2m2024-01-26T04:42:32.156426Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-1 and waiting for it to exit
00:01:21 [2m2024-01-26T04:42:32.215097Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-2 and waiting for it to exit
00:01:21 [2m2024-01-26T04:42:32.244695Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-3 and waiting for it to exit
00:01:21 [2m2024-01-26T04:42:32.259868Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:01:21 [2m2024-01-26T04:42:32.265041Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:01:21 [2m2024-01-26T04:42:32.271884Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:01:21 [2m2024-01-26T04:42:32.404545Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-cln and waiting for it to exit
00:01:21 [2m2024-01-26T04:42:32.471008Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:01:21 [2m2024-01-26T04:42:32.572915Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:01:21 [2m2024-01-26T04:42:32.577043Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
00:01:21 Error: polling gateway connect-fed after 60 retries
00:01:21 
00:01:21 Caused by:
00:01:21     0: command: /nix/store/k6x11hjg5frcc8frqhadylh66yirz6lk-gateway-cli/bin/gateway-cli --rpcpassword=theresnosecondbest -a http://127.0.0.1:22509/v1 connect-fed fed11qgqpw9thwvaz7te3xgmjuvpwxqhrzw33x5erzwf0qqqjqe2e8wtl2ylr2gc7za4j0qrtd28mmkj37zxw2gjnplqym6fjnhr8568k7z
00:01:21     1: exit status: 1
00:01:21        stdout:
00:01:21        
00:01:21        stderr:
00:01:21        Error: Bad status returned 500 Internal Server Error
00:01:21        
## FAILED: latency_test
## START: reconnect_test
00:00:00     Blocking waiting for file lock on package cache
00:00:00     Blocking waiting for file lock on package cache
00:00:00     Blocking waiting for file lock on package cache
00:00:01     Blocking waiting for file lock on build directory
00:00:01     Finished dev [unoptimized + debuginfo] target(s) in 0.49s
00:00:01 [2m2024-01-26T04:41:18.595984Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2314761"
00:00:01 [2m2024-01-26T04:41:18.597906Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:03 [2m2024-01-26T04:41:20.207558Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1q08dgx6rvl0rvak8pjcw793v67z286f9903qxx6
00:00:04 [2m2024-01-26T04:41:21.408267Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1q08dgx6rvl0rvak8pjcw793v67z286f9903qxx6
00:00:04 [2m2024-01-26T04:41:21.409106Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:04 [2m2024-01-26T04:41:21.411904Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:04 [2m2024-01-26T04:41:21.411950Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:00:04 [2m2024-01-26T04:41:21.417873Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:04 [2m2024-01-26T04:41:21.418397Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:00:04 [2m2024-01-26T04:41:21.420681Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:00:04 [2m2024-01-26T04:41:21.421817Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:05 [2m2024-01-26T04:41:22.439707Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:05 [2m2024-01-26T04:41:22.453000Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 1
00:00:05 [2m2024-01-26T04:41:22.469554Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 2
00:00:05 [2m2024-01-26T04:41:22.470831Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 3
00:00:05 [2m2024-01-26T04:41:22.480170Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 1 random-sNPDD1
00:00:05 [2m2024-01-26T04:41:22.483099Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 2 random-8CX3H2
00:00:05 [2m2024-01-26T04:41:22.486770Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 3 random-s3wmt3
00:00:05 [2m2024-01-26T04:41:22.495923Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:10 [2m2024-01-26T04:41:27.828771Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m DKG successfully complete. Starting consensus...
00:00:10 [2m2024-01-26T04:41:27.830168Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: i/o error: Transport endpoint is not connected (os error 107)
00:00:10 [2m2024-01-26T04:41:27.830307Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: i/o error: Transport endpoint is not connected (os error 107); restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: i/o error: Transport endpoint is not connected (os error 107)
00:00:10 
00:00:10 Caused by:
00:00:10     0: i/o error: Transport endpoint is not connected (os error 107)
00:00:10     1: Transport endpoint is not connected (os error 107))))} }, trying to continue...
00:00:11 [2m2024-01-26T04:41:28.510164Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m lightning started
00:00:12 [2m2024-01-26T04:41:29.547938Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m block sync done
00:00:12 [2m2024-01-26T04:41:29.576789Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m100000000 [3maddr[0m[2m=[0m"bcrt1qp83vzthxsl5f5lmquwz0p0lce4fgl8zcer5aew"
00:00:12 [2m2024-01-26T04:41:29.707709Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:13 [2m2024-01-26T04:41:30.183128Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:13 [2m2024-01-26T04:41:30.183380Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:13 
00:00:13 Caused by:
00:00:13     connection closed)))} }, trying to continue...
00:00:14 [2m2024-01-26T04:41:31.497462Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:15 [2m2024-01-26T04:41:32.824189Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways started
00:00:17 [2m2024-01-26T04:41:34.059868Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:17 [2m2024-01-26T04:41:34.060210Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:17 
00:00:17 Caused by:
00:00:17     connection closed)))} }, trying to continue...
00:00:23 [2m2024-01-26T04:41:40.095812Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: i/o error: Connection reset by peer (os error 104)
00:00:33 [2m2024-01-26T04:41:50.130715Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Consensus is running
00:00:33 [2m2024-01-26T04:41:50.156170Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m moved client configs
00:00:33 [2m2024-01-26T04:41:50.156224Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m federation and gateways started
00:00:33 [2m2024-01-26T04:41:50.170322Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Joining federation with the main client
00:00:36 [2m2024-01-26T04:41:53.938797Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Generating first epoch
00:00:36 [2m2024-01-26T04:41:53.938832Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:01:39 [2m2024-01-26T04:42:56.699475Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:01:39 [2m2024-01-26T04:42:56.710706Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-1 and waiting for it to exit
00:01:39 [2m2024-01-26T04:42:56.721029Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-2 and waiting for it to exit
00:01:39 [2m2024-01-26T04:42:56.751448Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-3 and waiting for it to exit
00:01:39 [2m2024-01-26T04:42:56.762806Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:01:39 [2m2024-01-26T04:42:56.769301Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:01:39 [2m2024-01-26T04:42:56.773135Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:01:39 [2m2024-01-26T04:42:56.790993Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-cln and waiting for it to exit
00:01:39 [2m2024-01-26T04:42:56.817149Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:01:39 [2m2024-01-26T04:42:56.853322Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:01:39 [2m2024-01-26T04:42:56.855418Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
00:01:39 Error: polling gateway connect-fed after 60 retries
00:01:39 
00:01:39 Caused by:
00:01:39     0: command: /nix/store/k6x11hjg5frcc8frqhadylh66yirz6lk-gateway-cli/bin/gateway-cli --rpcpassword=theresnosecondbest -a http://127.0.0.1:21962/v1 connect-fed fed11qgqpw9thwvaz7te3xgmjuvpwxqhrzw3jxsmrvv30qqqjptfqmssf5dw49s6g4d3v9lpudguahd9f56sa9jqyw874xa2ptpn22ef2uh
00:01:39     1: exit status: 1
00:01:39        stdout:
00:01:39        
00:01:39        stderr:
00:01:39        Error: Bad status returned 500 Internal Server Error
00:01:39        
## FAILED: reconnect_test
## START: devimint_cli_test
00:00:00     Blocking waiting for file lock on package cache
00:00:01     Blocking waiting for file lock on package cache
00:00:04     Blocking waiting for file lock on package cache
00:00:04     Finished dev [unoptimized + debuginfo] target(s) in 4.80s
00:00:16 [2m2024-01-26T04:41:49.148138Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2322092"
00:00:16 [2m2024-01-26T04:41:49.224053Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:23 [2m2024-01-26T04:41:56.991929Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1qkwagkd29yhpu4czxgu9n9grzsxdp36jq7qx9va
00:00:29 [2m2024-01-26T04:42:02.532169Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1qkwagkd29yhpu4czxgu9n9grzsxdp36jq7qx9va
00:00:29 [2m2024-01-26T04:42:02.533848Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:29 [2m2024-01-26T04:42:02.576623Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:29 [2m2024-01-26T04:42:02.576704Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:00:29 [2m2024-01-26T04:42:02.659706Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:29 [2m2024-01-26T04:42:02.659793Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:00:29 [2m2024-01-26T04:42:02.739810Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:29 [2m2024-01-26T04:42:02.766935Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:00:30 [2m2024-01-26T04:42:03.786785Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:30 [2m2024-01-26T04:42:03.789350Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 1
00:00:30 [2m2024-01-26T04:42:03.798805Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 2
00:00:30 [2m2024-01-26T04:42:03.808753Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 3
00:00:30 [2m2024-01-26T04:42:03.885747Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 1 random-CuXEa1
00:00:30 [2m2024-01-26T04:42:03.894097Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 2 random-92GdI2
00:00:30 [2m2024-01-26T04:42:03.897296Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 3 random-LD5sA3
00:00:30 [2m2024-01-26T04:42:03.959505Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:39 [2m2024-01-26T04:42:12.060957Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m DKG successfully complete. Starting consensus...
00:00:39 [2m2024-01-26T04:42:12.066187Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:40 [2m2024-01-26T04:42:13.793553Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m lightning started
00:00:41 [2m2024-01-26T04:42:14.075042Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:41 [2m2024-01-26T04:42:14.075220Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:41 
00:00:41 Caused by:
00:00:41     connection closed)))} }, trying to continue...
00:00:41 [2m2024-01-26T04:42:14.799591Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m block sync done
00:00:41 [2m2024-01-26T04:42:14.816145Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m100000000 [3maddr[0m[2m=[0m"bcrt1qdu9jwgjnlkt9t9maguwtwl3x6elg72vxul786s"
00:00:41 [2m2024-01-26T04:42:14.851454Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:42 [2m2024-01-26T04:42:15.127225Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:42 [2m2024-01-26T04:42:15.127415Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:42 
00:00:42 Caused by:
00:00:42     connection closed)))} }, trying to continue...
00:00:43 [2m2024-01-26T04:42:16.132340Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:43 [2m2024-01-26T04:42:16.132484Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:43 
00:00:43 Caused by:
00:00:43     connection closed)))} }, trying to continue...
00:00:43 [2m2024-01-26T04:42:16.438187Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:44 [2m2024-01-26T04:42:17.765257Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Getting chan info failed [3me[0m[2m=[0mstatus: Unknown, message: "edge not found", details: [], metadata: MetadataMap { headers: {"content-type": "application/grpc"} }
00:00:45 [2m2024-01-26T04:42:18.135824Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Consensus is running
00:00:45 [2m2024-01-26T04:42:18.136264Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m moved client configs
00:00:45 [2m2024-01-26T04:42:18.812494Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Empty chan info [3medge[0m[2m=[0mChannelEdge { channel_id: 123145302376448, chan_point: "ec53533749cfbfb032cec56248eecf2cbe276c3fdb18bec41829492b88f84c4a:0", last_update: 1706244137, node1_pub: "02052fa7c09faabca38f346dcd422fa6e260f19251ebb04121291ba8efe6cd1759", node2_pub: "02a8feeae4c1e26c8752c39b9fd79a06a73ca3b175c0d1b4fef9e5e9c9ef8c3c6c", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1706244137 }) }
00:00:46 [2m2024-01-26T04:42:19.920968Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways started
00:00:46 [2m2024-01-26T04:42:19.921007Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m federation and gateways started
00:00:46 [2m2024-01-26T04:42:19.952164Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Joining federation with the main client
00:00:48 [2m2024-01-26T04:42:21.254087Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Generating first epoch
00:00:48 [2m2024-01-26T04:42:21.254119Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:01:50 [2m2024-01-26T04:43:23.680836Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:01:50 [2m2024-01-26T04:43:23.692908Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-1 and waiting for it to exit
00:01:50 [2m2024-01-26T04:43:23.704925Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-2 and waiting for it to exit
00:01:50 [2m2024-01-26T04:43:23.715329Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-3 and waiting for it to exit
00:01:50 [2m2024-01-26T04:43:23.725976Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:01:50 [2m2024-01-26T04:43:23.729584Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:01:50 [2m2024-01-26T04:43:23.731047Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:01:50 [2m2024-01-26T04:43:23.742851Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-cln and waiting for it to exit
00:01:50 [2m2024-01-26T04:43:23.755325Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:01:50 [2m2024-01-26T04:43:23.768025Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:01:50 [2m2024-01-26T04:43:23.769295Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
00:01:50 Error: polling gateway connect-fed after 60 retries
00:01:50 
00:01:50 Caused by:
00:01:50     0: command: /nix/store/k6x11hjg5frcc8frqhadylh66yirz6lk-gateway-cli/bin/gateway-cli --rpcpassword=theresnosecondbest -a http://127.0.0.1:24786/v1 connect-fed fed11qgqpw9thwvaz7te3xgmjuvpwxqhrzw3jxs6n2df0qqqjp8fg55q9z9muueh55zr8jkwucvhyua7zm6jcx6uezft6npvdq3ptnhqhmu
00:01:50     1: exit status: 1
00:01:50        stdout:
00:01:50        
00:01:50        stderr:
00:01:50        Error: Bad status returned 500 Internal Server Error
00:01:50        
## FAILED: devimint_cli_test
Seq	Host	Starttime	JobRuntime	Send	Receive	Exitval	Signal	Command
1	:	1706244051.662	     0.022	0	63	0	0	always_success_test
2	:	1706244056.686	     5.050	0	0	0	0	backend_test_bitcoind
3	:	1706244061.737	     5.019	0	0	0	0	backend_test_electrs
4	:	1706244066.756	     5.026	0	0	0	0	backend_test_esplora
7	:	1706244082.798	    33.176	0	4563	1	0	lightning_reconnect_test
8	:	1706244087.945	    38.654	0	4614	1	0	gateway_reboot_test
5	:	1706244071.783	    80.828	0	10365	1	0	latency_test
6	:	1706244077.668	    99.206	0	9406	1	0	reconnect_test
9	:	1706244093.120	   110.663	0	10014	1	0	devimint_cli_test
Compiling fed binaries for version v0.2.1...
Using saved setting for 'extra-substituters = https://fedimint.cachix.org' from ~/.local/share/nix/trusted-settings.json.
Using saved setting for 'extra-trusted-public-keys = fedimint.cachix.org-1:FpJJjy1iPVlvyv4OMiN5y9+/arFLPcnZhZVVCHCDYTs=' from ~/.local/share/nix/trusted-settings.json.
Compiling client binaries for version v0.2.1...
Using saved setting for 'extra-substituters = https://fedimint.cachix.org' from ~/.local/share/nix/trusted-settings.json.
Using saved setting for 'extra-trusted-public-keys = fedimint.cachix.org-1:FpJJjy1iPVlvyv4OMiN5y9+/arFLPcnZhZVVCHCDYTs=' from ~/.local/share/nix/trusted-settings.json.
Using saved setting for 'extra-substituters = https://fedimint.cachix.org' from ~/.local/share/nix/trusted-settings.json.
Using saved setting for 'extra-trusted-public-keys = fedimint.cachix.org-1:FpJJjy1iPVlvyv4OMiN5y9+/arFLPcnZhZVVCHCDYTs=' from ~/.local/share/nix/trusted-settings.json.
========== Starting backwards-compatibility run ===========
fed version: v0.2.1
client version: v0.2.1
gateway version: current
Pre-building workspace...
    Finished dev [unoptimized + debuginfo] target(s) in 0.22s
Pre-building tests...
    Finished test [unoptimized + debuginfo] target(s) in 0.22s
## Starting all tests in parallel...
parallel: This job failed:
lightning_reconnect_test
parallel: Starting no more jobs. Waiting for 4 jobs to finish.
parallel: This job failed:
gateway_reboot_test
parallel: Starting no more jobs. Waiting for 3 jobs to finish.
parallel: This job failed:
latency_test
parallel: Starting no more jobs. Waiting for 2 jobs to finish.
parallel: This job failed:
reconnect_test
parallel: Starting no more jobs. Waiting for 1 jobs to finish.
parallel: This job failed:
devimint_cli_test
Some tests failed. Full job log:
Search for '## FAILED' to find the end of the failing test
========== Finished backwards-compatibility run ===========
fed version: v0.2.1
client version: v0.2.1
gateway version: current
## START: always_success_test
## COMPLETE: always_success_test
## START: lightning_reconnect_test
00:00:01     Blocking waiting for file lock on package cache
00:00:01     Blocking waiting for file lock on package cache
00:00:01     Blocking waiting for file lock on package cache
00:00:01     Blocking waiting for file lock on build directory
00:00:01     Finished dev [unoptimized + debuginfo] target(s) in 0.77s
00:00:03 [2m2024-01-26T04:41:30.141292Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2318822"
00:00:03 [2m2024-01-26T04:41:30.151829Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:06 [2m2024-01-26T04:41:33.028449Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1qllz7ggvtqc7ry7m9sg4p7a5xfynt3l4gam069m
00:00:12 [2m2024-01-26T04:41:39.233558Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1qllz7ggvtqc7ry7m9sg4p7a5xfynt3l4gam069m
00:00:12 [2m2024-01-26T04:41:39.236332Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:12 [2m2024-01-26T04:41:39.335708Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:12 [2m2024-01-26T04:41:39.335790Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:00:12 [2m2024-01-26T04:41:39.422104Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:12 [2m2024-01-26T04:41:39.422182Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:00:12 [2m2024-01-26T04:41:39.432067Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:12 [2m2024-01-26T04:41:39.444014Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:00:13 [2m2024-01-26T04:41:40.492017Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:13 [2m2024-01-26T04:41:40.494807Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 1
00:00:13 [2m2024-01-26T04:41:40.498011Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 2
00:00:13 [2m2024-01-26T04:41:40.499213Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 3
00:00:13 [2m2024-01-26T04:41:40.674122Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 1 random-qOZ5m1
00:00:13 [2m2024-01-26T04:41:40.709712Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 2 random-gpKLD2
00:00:13 [2m2024-01-26T04:41:40.723308Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 3 random-7H6P33
00:00:13 [2m2024-01-26T04:41:40.762953Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:34 [2m2024-01-26T04:42:01.730913Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m DKG successfully complete. Starting consensus...
00:00:34 [2m2024-01-26T04:42:01.736059Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:34 [2m2024-01-26T04:42:01.736365Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:34 
00:00:34 Caused by:
00:00:34     connection closed)))} }, trying to continue...
00:00:34 [2m2024-01-26T04:42:01.744742Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:00:34 [2m2024-01-26T04:42:01.875769Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:00:34 [2m2024-01-26T04:42:01.882313Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:00:34 [2m2024-01-26T04:42:01.888088Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:00:34 [2m2024-01-26T04:42:01.893385Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:00:34 [2m2024-01-26T04:42:01.908284Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-1 and waiting for it to exit
00:00:34 [2m2024-01-26T04:42:01.921843Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-2 and waiting for it to exit
00:00:34 [2m2024-01-26T04:42:01.939139Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-3 and waiting for it to exit
00:00:34 [2m2024-01-26T04:42:01.960745Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
00:00:34 Error: polling lnd_startup after 20 retries
00:00:34 
00:00:34 Caused by:
00:00:34     status: Unknown, message: "the RPC server is in the process of starting up, but not yet ready to accept calls", details: [], metadata: MetadataMap { headers: {"content-type": "application/grpc"} }
## FAILED: lightning_reconnect_test
## START: latency_test
00:00:00     Blocking waiting for file lock on package cache
00:00:00     Blocking waiting for file lock on package cache
00:00:00     Blocking waiting for file lock on package cache
00:00:01     Finished dev [unoptimized + debuginfo] target(s) in 0.41s
00:00:01 [2m2024-01-26T04:41:18.370002Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2314742"
00:00:01 [2m2024-01-26T04:41:18.372255Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:02 [2m2024-01-26T04:41:19.942347Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1qct544jrs50uwt52sqemp60q567ensnkc8f6wtx
00:00:04 [2m2024-01-26T04:41:21.092533Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1qct544jrs50uwt52sqemp60q567ensnkc8f6wtx
00:00:04 [2m2024-01-26T04:41:21.093292Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:04 [2m2024-01-26T04:41:21.095617Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:04 [2m2024-01-26T04:41:21.095659Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:00:04 [2m2024-01-26T04:41:21.101857Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:04 [2m2024-01-26T04:41:21.101929Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:04 [2m2024-01-26T04:41:21.104017Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:00:04 [2m2024-01-26T04:41:21.104505Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:00:05 [2m2024-01-26T04:41:22.107123Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:05 [2m2024-01-26T04:41:22.107822Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 1
00:00:05 [2m2024-01-26T04:41:22.108977Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 2
00:00:05 [2m2024-01-26T04:41:22.109582Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 3
00:00:05 [2m2024-01-26T04:41:22.113544Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 1 random-qmGks1
00:00:05 [2m2024-01-26T04:41:22.115509Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 2 random-EmQOd2
00:00:05 [2m2024-01-26T04:41:22.117477Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 3 random-aMNbD3
00:00:05 [2m2024-01-26T04:41:22.127052Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:10 [2m2024-01-26T04:41:27.632860Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m DKG successfully complete. Starting consensus...
00:00:10 [2m2024-01-26T04:41:27.634136Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:10 [2m2024-01-26T04:41:27.634306Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:10 
00:00:10 Caused by:
00:00:10     connection closed)))} }, trying to continue...
00:00:11 [2m2024-01-26T04:41:28.177800Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m lightning started
00:00:11 [2m2024-01-26T04:41:28.640005Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:11 [2m2024-01-26T04:41:28.640166Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:11 
00:00:11 Caused by:
00:00:11     connection closed)))} }, trying to continue...
00:00:12 [2m2024-01-26T04:41:29.207866Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m block sync done
00:00:12 [2m2024-01-26T04:41:29.223725Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m100000000 [3maddr[0m[2m=[0m"bcrt1q9f72054kl7qnyj0s34y2e86xk26p9q2lj4le6t"
00:00:12 [2m2024-01-26T04:41:29.332145Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:14 [2m2024-01-26T04:41:31.037416Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:14 [2m2024-01-26T04:41:31.663596Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: i/o error: Transport endpoint is not connected (os error 107)
00:00:16 [2m2024-01-26T04:41:33.355516Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Empty chan info [3medge[0m[2m=[0mChannelEdge { channel_id: 123145302376449, chan_point: "dbd3cde2b2206cd9d9a39b0bbc9501d356586a07a8df2fb41f022c5c4b93e0b8:1", last_update: 1706244093, node1_pub: "0288dc858624ec94caef1bb6e261f6783bada1395aef2bc2d3b94868ba2d5d35a0", node2_pub: "0302e612c9cd49ecfc9c827aa405aa62b9f42943bf5163a8332c91875d47cbe927", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1706244093 }) }
00:00:17 [2m2024-01-26T04:41:34.404296Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Empty chan info [3medge[0m[2m=[0mChannelEdge { channel_id: 123145302376449, chan_point: "dbd3cde2b2206cd9d9a39b0bbc9501d356586a07a8df2fb41f022c5c4b93e0b8:1", last_update: 1706244093, node1_pub: "0288dc858624ec94caef1bb6e261f6783bada1395aef2bc2d3b94868ba2d5d35a0", node2_pub: "0302e612c9cd49ecfc9c827aa405aa62b9f42943bf5163a8332c91875d47cbe927", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1706244093 }) }
00:00:17 [2m2024-01-26T04:41:34.707001Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:17 [2m2024-01-26T04:41:34.707247Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:17 
00:00:17 Caused by:
00:00:17     connection closed)))} }, trying to continue...
00:00:18 [2m2024-01-26T04:41:35.515946Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways started
00:00:23 [2m2024-01-26T04:41:40.740960Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Consensus is running
00:00:23 [2m2024-01-26T04:41:40.763996Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m moved client configs
00:00:23 [2m2024-01-26T04:41:40.764047Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m federation and gateways started
00:00:23 [2m2024-01-26T04:41:40.925637Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Joining federation with the main client
00:00:25 [2m2024-01-26T04:41:42.641211Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Generating first epoch
00:00:25 [2m2024-01-26T04:41:42.641245Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:28 [2m2024-01-26T04:41:45.786161Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m await gateways registered
00:00:33 [2m2024-01-26T04:41:50.139904Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways registered
00:00:33 [2m2024-01-26T04:41:50.139935Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m starting dev federation took 31.769855418s
00:00:33 [2m2024-01-26T04:41:50.348668Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mfedimint_cli_version[0m[2m=[0m"fedimint-cli 0.3.0-alpha"
00:00:33 [2m2024-01-26T04:41:50.431083Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mfedimint_cli_version_hash[0m[2m=[0m"e4e00980c287e98207ca23611ec3b7be07cae6a4"
00:00:33 [2m2024-01-26T04:41:50.468312Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mgateway_cli_version[0m[2m=[0m"fedimint-gateway-cli 0.3.0-alpha"
00:00:33 [2m2024-01-26T04:41:50.565959Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mgateway_cli_version_hash[0m[2m=[0m"e4e00980c287e98207ca23611ec3b7be07cae6a4"
00:00:33 [2m2024-01-26T04:41:50.609202Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mfedimintd_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:00:33 [2m2024-01-26T04:41:50.706877Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mgatewayd_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:00:49 [2m2024-01-26T04:42:06.802021Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:00:49 [2m2024-01-26T04:42:06.807934Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:00:49 [2m2024-01-26T04:42:06.815822Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:00:49 [2m2024-01-26T04:42:06.927845Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-cln and waiting for it to exit
00:00:49 [2m2024-01-26T04:42:06.959852Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:00:49 [2m2024-01-26T04:42:06.981368Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-1 and waiting for it to exit
00:00:50 [2m2024-01-26T04:42:07.099315Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-2 and waiting for it to exit
00:00:50 [2m2024-01-26T04:42:07.119198Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-3 and waiting for it to exit
00:00:50 [2m2024-01-26T04:42:07.143982Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:00:50 [2m2024-01-26T04:42:07.222638Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:00:50 [2m2024-01-26T04:42:07.226168Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
00:00:50 Error: command: gateway-cli --rpcpassword=theresnosecondbest -a http://127.0.0.1:22575/v1 info
00:00:50 
00:00:50 Caused by:
00:00:50     exit status: 1
00:00:50     stdout:
00:00:50     
00:00:50     stderr:
00:00:50     Error: Bad status returned 405 Method Not Allowed
00:00:50     
00:00:50     Stack backtrace:
00:00:50        0: <core::result::Result<T,F> as core::ops::try_trait::FromResidual<core::result::Result<core::convert::Infallible,E>>>::from_residual
00:00:50                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/core/src/result.rs:1962:27
00:00:50        1: gateway_cli::main::{{closure}}
00:00:50                  at ./gateway/cli/src/main.rs:110:28
00:00:50        2: <tracing::instrument::Instrumented<T> as core::future::future::Future>::poll
00:00:50                  at /home/nix/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tracing-0.1.40/src/instrument.rs:321:9
00:00:50        3: tokio::runtime::park::CachedParkThread::block_on::{{closure}}
00:00:50                  at /home/nix/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.34.0/src/runtime/park.rs:282:63
00:00:50        4: tokio::runtime::coop::with_budget
00:00:50                  at /home/nix/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.34.0/src/runtime/coop.rs:107:5
00:00:50           tokio::runtime::coop::budget
00:00:50                  at /home/nix/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.34.0/src/runtime/coop.rs:73:5
00:00:50           tokio::runtime::park::CachedParkThread::block_on
00:00:50                  at /home/nix/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.34.0/src/runtime/park.rs:282:31
00:00:50        5: tokio::runtime::context::blocking::BlockingRegionGuard::block_on
00:00:50                  at /home/nix/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.34.0/src/runtime/context/blocking.rs:66:9
00:00:50        6: tokio::runtime::scheduler::multi_thread::MultiThread::block_on::{{closure}}
00:00:50                  at /home/nix/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.34.0/src/runtime/scheduler/multi_thread/mod.rs:87:13
00:00:50        7: tokio::runtime::context::runtime::enter_runtime
00:00:50                  at /home/nix/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.34.0/src/runtime/context/runtime.rs:65:16
00:00:50        8: tokio::runtime::scheduler::multi_thread::MultiThread::block_on
00:00:50                  at /home/nix/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.34.0/src/runtime/scheduler/multi_thread/mod.rs:86:9
00:00:50        9: tokio::runtime::runtime::Runtime::block_on
00:00:50                  at /home/nix/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.34.0/src/runtime/runtime.rs:350:45
00:00:50       10: gateway_cli::main
00:00:50                  at ./gateway/cli/src/main.rs:105:5
00:00:50       11: core::ops::function::FnOnce::call_once
00:00:50                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/core/src/ops/function.rs:250:5
00:00:50       12: std::sys_common::backtrace::__rust_begin_short_backtrace
00:00:50                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/std/src/sys_common/backtrace.rs:154:18
00:00:50       13: std::rt::lang_start::{{closure}}
00:00:50                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/std/src/rt.rs:166:18
00:00:50       14: core::ops::function::impls::<impl core::ops::function::FnOnce<A> for &F>::call_once
00:00:50                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/core/src/ops/function.rs:284:13
00:00:50           std::panicking::try::do_call
00:00:50                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/std/src/panicking.rs:502:40
00:00:50           std::panicking::try
00:00:50                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/std/src/panicking.rs:466:19
00:00:50           std::panic::catch_unwind
00:00:50                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/std/src/panic.rs:142:14
00:00:50           std::rt::lang_start_internal::{{closure}}
00:00:50                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/std/src/rt.rs:148:48
00:00:50           std::panicking::try::do_call
00:00:50                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/std/src/panicking.rs:502:40
00:00:50           std::panicking::try
00:00:50                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/std/src/panicking.rs:466:19
00:00:50           std::panic::catch_unwind
00:00:50                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/std/src/panic.rs:142:14
00:00:50           std::rt::lang_start_internal
00:00:50                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/std/src/rt.rs:148:20
00:00:50       15: std::rt::lang_start
00:00:50                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/std/src/rt.rs:165:17
00:00:50       16: main
00:00:50       17: __libc_start_call_main
00:00:50       18: __libc_start_main_impl
00:00:50       19: _start
00:00:50     
## FAILED: latency_test
## START: gateway_reboot_test
00:00:00     Blocking waiting for file lock on package cache
00:00:02     Blocking waiting for file lock on package cache
00:00:04     Blocking waiting for file lock on build directory
00:00:04     Finished dev [unoptimized + debuginfo] target(s) in 4.35s
00:00:10 [2m2024-01-26T04:41:43.016057Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2321909"
00:00:10 [2m2024-01-26T04:41:43.084442Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:22 [2m2024-01-26T04:41:55.239508Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1qe6ht3fp7rj7ssv6csaxjz7vlnjyh20pe620hdn
00:00:27 [2m2024-01-26T04:42:00.509263Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1qe6ht3fp7rj7ssv6csaxjz7vlnjyh20pe620hdn
00:00:27 [2m2024-01-26T04:42:00.519801Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:27 [2m2024-01-26T04:42:00.583158Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:27 [2m2024-01-26T04:42:00.583235Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:27 [2m2024-01-26T04:42:00.679478Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:27 [2m2024-01-26T04:42:00.679557Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:00:27 [2m2024-01-26T04:42:00.735393Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:00:27 [2m2024-01-26T04:42:00.755665Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:00:28 [2m2024-01-26T04:42:01.876267Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:28 [2m2024-01-26T04:42:01.880494Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 1
00:00:28 [2m2024-01-26T04:42:01.882601Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 2
00:00:28 [2m2024-01-26T04:42:01.886924Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 3
00:00:28 [2m2024-01-26T04:42:01.901379Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 1 random-DBur41
00:00:28 [2m2024-01-26T04:42:01.910826Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 2 random-6DPG02
00:00:28 [2m2024-01-26T04:42:01.930789Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 3 random-HjLyO3
00:00:28 [2m2024-01-26T04:42:01.998146Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:37 [2m2024-01-26T04:42:10.936020Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m DKG successfully complete. Starting consensus...
00:00:37 [2m2024-01-26T04:42:10.939704Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:39 [2m2024-01-26T04:42:12.948497Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:39 [2m2024-01-26T04:42:12.948701Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:39 
00:00:39 Caused by:
00:00:39     connection closed)))} }, trying to continue...
00:00:40 [2m2024-01-26T04:42:13.837082Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m lightning started
00:00:40 [2m2024-01-26T04:42:13.951919Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:40 [2m2024-01-26T04:42:13.952080Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:40 
00:00:40 Caused by:
00:00:40     connection closed)))} }, trying to continue...
00:00:41 [2m2024-01-26T04:42:14.844838Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m block sync done
00:00:41 [2m2024-01-26T04:42:14.866072Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m100000000 [3maddr[0m[2m=[0m"bcrt1q77v4vghvvspww9ha9ley5qjygsjnj83866sap7"
00:00:41 [2m2024-01-26T04:42:14.912163Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:42 [2m2024-01-26T04:42:15.190031Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:42 [2m2024-01-26T04:42:15.190694Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:42 
00:00:42 Caused by:
00:00:42     connection closed)))} }, trying to continue...
00:00:43 [2m2024-01-26T04:42:16.409684Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:44 [2m2024-01-26T04:42:17.194831Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Consensus is running
00:00:44 [2m2024-01-26T04:42:17.195122Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m moved client configs
00:00:44 [2m2024-01-26T04:42:17.739733Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Getting chan info failed [3me[0m[2m=[0mstatus: Unknown, message: "edge not found", details: [], metadata: MetadataMap { headers: {"content-type": "application/grpc"} }
00:00:45 [2m2024-01-26T04:42:18.748302Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways started
00:00:45 [2m2024-01-26T04:42:18.748334Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m federation and gateways started
00:00:45 [2m2024-01-26T04:42:18.749138Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Joining federation with the main client
00:00:46 [2m2024-01-26T04:42:19.044804Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Generating first epoch
00:00:46 [2m2024-01-26T04:42:19.044850Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:47 [2m2024-01-26T04:42:20.252298Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m await gateways registered
00:00:48 [2m2024-01-26T04:42:21.244659Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways registered
00:00:48 [2m2024-01-26T04:42:21.244694Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m starting dev federation took 38.228501555s
00:00:48 [2m2024-01-26T04:42:21.299994Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mfedimint_cli_version[0m[2m=[0m"fedimint-cli 0.3.0-alpha"
00:00:48 [2m2024-01-26T04:42:21.329161Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mfedimint_cli_version_hash[0m[2m=[0m"e4e00980c287e98207ca23611ec3b7be07cae6a4"
00:00:48 [2m2024-01-26T04:42:21.360779Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mgateway_cli_version[0m[2m=[0m"fedimint-gateway-cli 0.3.0-alpha"
00:00:48 [2m2024-01-26T04:42:21.417924Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mgateway_cli_version_hash[0m[2m=[0m"e4e00980c287e98207ca23611ec3b7be07cae6a4"
00:00:48 [2m2024-01-26T04:42:21.445012Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mfedimintd_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:00:48 [2m2024-01-26T04:42:21.511754Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mgatewayd_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:00:53 [2m2024-01-26T04:42:26.761067Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:00:53 [2m2024-01-26T04:42:26.764968Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:00:53 [2m2024-01-26T04:42:26.768920Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:00:53 [2m2024-01-26T04:42:26.786760Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-cln and waiting for it to exit
00:00:53 [2m2024-01-26T04:42:26.804088Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:00:53 [2m2024-01-26T04:42:26.815397Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-1 and waiting for it to exit
00:00:53 [2m2024-01-26T04:42:26.822264Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-2 and waiting for it to exit
00:00:53 [2m2024-01-26T04:42:26.831039Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-3 and waiting for it to exit
00:00:53 [2m2024-01-26T04:42:26.839171Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:00:53 [2m2024-01-26T04:42:26.851019Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:00:53 [2m2024-01-26T04:42:26.853475Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
00:00:53 Error: command: gateway-cli --rpcpassword=theresnosecondbest -a http://127.0.0.1:11082/v1 info
00:00:53 
00:00:53 Caused by:
00:00:53     exit status: 1
00:00:53     stdout:
00:00:53     
00:00:53     stderr:
00:00:53     Error: Bad status returned 405 Method Not Allowed
00:00:53     
00:00:53     Stack backtrace:
00:00:53        0: <core::result::Result<T,F> as core::ops::try_trait::FromResidual<core::result::Result<core::convert::Infallible,E>>>::from_residual
00:00:53                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/core/src/result.rs:1962:27
00:00:53        1: gateway_cli::main::{{closure}}
00:00:53                  at ./gateway/cli/src/main.rs:110:28
00:00:53        2: <tracing::instrument::Instrumented<T> as core::future::future::Future>::poll
00:00:53                  at /home/nix/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tracing-0.1.40/src/instrument.rs:321:9
00:00:53        3: tokio::runtime::park::CachedParkThread::block_on::{{closure}}
00:00:53                  at /home/nix/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.34.0/src/runtime/park.rs:282:63
00:00:53        4: tokio::runtime::coop::with_budget
00:00:53                  at /home/nix/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.34.0/src/runtime/coop.rs:107:5
00:00:53           tokio::runtime::coop::budget
00:00:53                  at /home/nix/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.34.0/src/runtime/coop.rs:73:5
00:00:53           tokio::runtime::park::CachedParkThread::block_on
00:00:53                  at /home/nix/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.34.0/src/runtime/park.rs:282:31
00:00:53        5: tokio::runtime::context::blocking::BlockingRegionGuard::block_on
00:00:53                  at /home/nix/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.34.0/src/runtime/context/blocking.rs:66:9
00:00:53        6: tokio::runtime::scheduler::multi_thread::MultiThread::block_on::{{closure}}
00:00:53                  at /home/nix/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.34.0/src/runtime/scheduler/multi_thread/mod.rs:87:13
00:00:53        7: tokio::runtime::context::runtime::enter_runtime
00:00:53                  at /home/nix/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.34.0/src/runtime/context/runtime.rs:65:16
00:00:53        8: tokio::runtime::scheduler::multi_thread::MultiThread::block_on
00:00:53                  at /home/nix/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.34.0/src/runtime/scheduler/multi_thread/mod.rs:86:9
00:00:53        9: tokio::runtime::runtime::Runtime::block_on
00:00:53                  at /home/nix/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.34.0/src/runtime/runtime.rs:350:45
00:00:53       10: gateway_cli::main
00:00:53                  at ./gateway/cli/src/main.rs:105:5
00:00:53       11: core::ops::function::FnOnce::call_once
00:00:53                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/core/src/ops/function.rs:250:5
00:00:53       12: std::sys_common::backtrace::__rust_begin_short_backtrace
00:00:53                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/std/src/sys_common/backtrace.rs:154:18
00:00:53       13: std::rt::lang_start::{{closure}}
00:00:53                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/std/src/rt.rs:166:18
00:00:53       14: core::ops::function::impls::<impl core::ops::function::FnOnce<A> for &F>::call_once
00:00:53                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/core/src/ops/function.rs:284:13
00:00:53           std::panicking::try::do_call
00:00:53                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/std/src/panicking.rs:502:40
00:00:53           std::panicking::try
00:00:53                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/std/src/panicking.rs:466:19
00:00:53           std::panic::catch_unwind
00:00:53                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/std/src/panic.rs:142:14
00:00:53           std::rt::lang_start_internal::{{closure}}
00:00:53                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/std/src/rt.rs:148:48
00:00:53           std::panicking::try::do_call
00:00:53                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/std/src/panicking.rs:502:40
00:00:53           std::panicking::try
00:00:53                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/std/src/panicking.rs:466:19
00:00:53           std::panic::catch_unwind
00:00:53                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/std/src/panic.rs:142:14
00:00:53           std::rt::lang_start_internal
00:00:53                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/std/src/rt.rs:148:20
00:00:53       15: std::rt::lang_start
00:00:53                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/std/src/rt.rs:165:17
00:00:53       16: main
00:00:53       17: __libc_start_call_main
00:00:53       18: __libc_start_main_impl
00:00:53       19: _start
00:00:53     
## FAILED: gateway_reboot_test
## START: reconnect_test
00:00:01     Blocking waiting for file lock on package cache
00:00:03     Blocking waiting for file lock on package cache
00:00:03     Finished dev [unoptimized + debuginfo] target(s) in 2.99s
00:00:04 [2m2024-01-26T04:41:26.338113Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2317362"
00:00:04 [2m2024-01-26T04:41:26.347842Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:06 [2m2024-01-26T04:41:28.225586Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1qr4c3qmqnhcd50dgr9u9fxzrvtkgmqe7gu9ujad
00:00:08 [2m2024-01-26T04:41:30.990852Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1qr4c3qmqnhcd50dgr9u9fxzrvtkgmqe7gu9ujad
00:00:08 [2m2024-01-26T04:41:30.991893Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:08 [2m2024-01-26T04:41:30.996166Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:08 [2m2024-01-26T04:41:30.996215Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:00:09 [2m2024-01-26T04:41:31.004394Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:09 [2m2024-01-26T04:41:31.004469Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:00:09 [2m2024-01-26T04:41:31.020109Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:00:09 [2m2024-01-26T04:41:31.022155Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:10 [2m2024-01-26T04:41:32.049218Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:10 [2m2024-01-26T04:41:32.056492Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 1
00:00:10 [2m2024-01-26T04:41:32.064565Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 2
00:00:10 [2m2024-01-26T04:41:32.065855Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 3
00:00:10 [2m2024-01-26T04:41:32.071543Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 1 random-p6kJt1
00:00:10 [2m2024-01-26T04:41:32.091824Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 2 random-SRCdZ2
00:00:10 [2m2024-01-26T04:41:32.120712Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 3 random-MWNs13
00:00:10 [2m2024-01-26T04:41:32.141139Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:21 [2m2024-01-26T04:41:43.156595Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m DKG successfully complete. Starting consensus...
00:00:21 [2m2024-01-26T04:41:43.159556Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:31 [2m2024-01-26T04:41:53.256690Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m lightning started
00:00:32 [2m2024-01-26T04:41:54.332232Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m block sync done
00:00:32 [2m2024-01-26T04:41:54.339893Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m100000000 [3maddr[0m[2m=[0m"bcrt1qleh4k3vfp9xhevxx0xyxnjr0zfga07pdehgunu"
00:00:32 [2m2024-01-26T04:41:54.436395Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:34 [2m2024-01-26T04:41:56.408858Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:35 [2m2024-01-26T04:41:57.272894Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:36 [2m2024-01-26T04:41:58.996386Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Getting chan info failed [3me[0m[2m=[0mstatus: Unknown, message: "edge not found", details: [], metadata: MetadataMap { headers: {"content-type": "application/grpc"} }
00:00:38 [2m2024-01-26T04:42:00.052491Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Empty chan info [3medge[0m[2m=[0mChannelEdge { channel_id: 123145302376449, chan_point: "196ee0a72d2815645878eb490b1dcded248b51b32464a58ae0773a582849dfce:1", last_update: 1706244119, node1_pub: "02021ac4bfe0710a968f250bc8d5d84e3624a681db957d3ff2a8bb890576b190b5", node2_pub: "02985b5f588f1975f9719b651ac99222a5af11e49528b6214e6c63979b60d9f305", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1706244119 }) }
00:00:39 [2m2024-01-26T04:42:01.174438Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways started
00:00:41 [2m2024-01-26T04:42:03.326426Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:47 [2m2024-01-26T04:42:09.413102Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:51 [2m2024-01-26T04:42:13.429897Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Consensus is running
00:00:51 [2m2024-01-26T04:42:13.430201Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m moved client configs
00:00:51 [2m2024-01-26T04:42:13.430246Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m federation and gateways started
00:00:51 [2m2024-01-26T04:42:13.430862Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Joining federation with the main client
00:00:51 [2m2024-01-26T04:42:13.664634Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Generating first epoch
00:00:51 [2m2024-01-26T04:42:13.664668Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:52 [2m2024-01-26T04:42:14.444895Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m await gateways registered
00:00:52 [2m2024-01-26T04:42:14.685242Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways registered
00:00:52 [2m2024-01-26T04:42:14.685268Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m starting dev federation took 48.347065831s
00:00:52 [2m2024-01-26T04:42:14.690379Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mfedimint_cli_version[0m[2m=[0m"fedimint-cli 0.3.0-alpha"
00:00:52 [2m2024-01-26T04:42:14.694746Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mfedimint_cli_version_hash[0m[2m=[0m"e4e00980c287e98207ca23611ec3b7be07cae6a4"
00:00:52 [2m2024-01-26T04:42:14.700813Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mgateway_cli_version[0m[2m=[0m"fedimint-gateway-cli 0.3.0-alpha"
00:00:52 [2m2024-01-26T04:42:14.705781Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mgateway_cli_version_hash[0m[2m=[0m"e4e00980c287e98207ca23611ec3b7be07cae6a4"
00:00:52 [2m2024-01-26T04:42:14.709525Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mfedimintd_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:00:52 [2m2024-01-26T04:42:14.713998Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mgatewayd_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:00:52 [2m2024-01-26T04:42:14.714017Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m110
00:00:56 [2m2024-01-26T04:42:18.716730Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to fedimintd-0 and waiting for it to exit
00:01:12 [2m2024-01-26T04:42:34.027391Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m100
00:01:17 [2m2024-01-26T04:42:39.913080Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:01:17 [2m2024-01-26T04:42:39.930009Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m100
00:01:25 [2m2024-01-26T04:42:47.176724Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Server 0 successfully rejoined!
00:01:25 [2m2024-01-26T04:42:47.176760Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m100
00:01:29 [2m2024-01-26T04:42:51.703801Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to fedimintd-1 and waiting for it to exit
00:01:41 [2m2024-01-26T04:43:03.749196Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m100
00:01:44 [2m2024-01-26T04:43:06.060192Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to fedimintd-2 and waiting for it to exit
00:01:54 [2m2024-01-26T04:43:16.990148Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to fedimintd-3 and waiting for it to exit
00:02:05 [2m2024-01-26T04:43:27.906766Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:02:05 [2m2024-01-26T04:43:27.907409Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:02:05 [2m2024-01-26T04:43:27.907758Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:02:07 [2m2024-01-26T04:43:29.436233Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m fm success: reconnect-test
00:02:07 [2m2024-01-26T04:43:29.436278Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:02:07 [2m2024-01-26T04:43:29.441075Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:02:07 [2m2024-01-26T04:43:29.445086Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:02:07 [2m2024-01-26T04:43:29.474752Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-cln and waiting for it to exit
00:02:07 [2m2024-01-26T04:43:29.492493Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:02:07 [2m2024-01-26T04:43:29.502727Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-1 and waiting for it to exit
00:02:07 [2m2024-01-26T04:43:29.515758Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-2 and waiting for it to exit
00:02:07 [2m2024-01-26T04:43:29.528969Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-3 and waiting for it to exit
00:02:07 [2m2024-01-26T04:43:29.541667Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:02:07 [2m2024-01-26T04:43:29.557067Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:02:07 [2m2024-01-26T04:43:29.558062Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: reconnect_test
Seq	Host	Starttime	JobRuntime	Send	Receive	Exitval	Signal	Command
1	:	1706244056.439	     0.032	0	63	0	0	always_success_test
2	:	1706244061.466	     5.018	0	0	0	0	backend_test_bitcoind
3	:	1706244066.485	     5.022	0	0	0	0	backend_test_electrs
4	:	1706244071.507	     5.078	0	0	0	0	backend_test_esplora
7	:	1706244087.911	    34.138	0	5372	1	0	lightning_reconnect_test
5	:	1706244077.654	    49.638	0	16446	1	0	latency_test
8	:	1706244093.076	    53.789	0	15334	1	0	gateway_reboot_test
6	:	1706244082.782	   126.786	0	11064	0	0	reconnect_test
Compiling fed binaries for version v0.2.1...
Using saved setting for 'extra-substituters = https://fedimint.cachix.org' from ~/.local/share/nix/trusted-settings.json.
Using saved setting for 'extra-trusted-public-keys = fedimint.cachix.org-1:FpJJjy1iPVlvyv4OMiN5y9+/arFLPcnZhZVVCHCDYTs=' from ~/.local/share/nix/trusted-settings.json.
Compiling gateway binaries for version v0.2.1...
Using saved setting for 'extra-substituters = https://fedimint.cachix.org' from ~/.local/share/nix/trusted-settings.json.
Using saved setting for 'extra-trusted-public-keys = fedimint.cachix.org-1:FpJJjy1iPVlvyv4OMiN5y9+/arFLPcnZhZVVCHCDYTs=' from ~/.local/share/nix/trusted-settings.json.
========== Starting backwards-compatibility run ===========
fed version: v0.2.1
client version: current
gateway version: v0.2.1
Pre-building workspace...
    Finished dev [unoptimized + debuginfo] target(s) in 0.22s
Pre-building tests...
    Finished test [unoptimized + debuginfo] target(s) in 0.22s
## Starting all tests in parallel...
parallel: This job failed:
lightning_reconnect_test
parallel: Starting no more jobs. Waiting for 3 jobs to finish.
parallel: This job failed:
latency_test
parallel: Starting no more jobs. Waiting for 2 jobs to finish.
parallel: This job failed:
gateway_reboot_test
parallel: Starting no more jobs. Waiting for 1 jobs to finish.
Some tests failed. Full job log:
Search for '## FAILED' to find the end of the failing test
========== Finished backwards-compatibility run ===========
fed version: v0.2.1
client version: current
gateway version: v0.2.1
## START: always_success_test
## COMPLETE: always_success_test
## START: latency_test
00:00:00     Blocking waiting for file lock on package cache
00:00:01     Blocking waiting for file lock on package cache
00:00:01     Blocking waiting for file lock on package cache
00:00:01     Blocking waiting for file lock on package cache
00:00:01     Finished dev [unoptimized + debuginfo] target(s) in 0.66s
00:00:03 [2m2024-01-26T04:41:30.379663Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2318789"
00:00:03 [2m2024-01-26T04:41:30.411881Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:07 [2m2024-01-26T04:41:34.211824Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1qf083rfewqcfswx5yszvr06r0kxf4j8y22jw8vq
00:00:13 [2m2024-01-26T04:41:40.791938Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1qf083rfewqcfswx5yszvr06r0kxf4j8y22jw8vq
00:00:13 [2m2024-01-26T04:41:40.798164Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:13 [2m2024-01-26T04:41:40.907697Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:13 [2m2024-01-26T04:41:40.907770Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:00:14 [2m2024-01-26T04:41:41.039683Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:14 [2m2024-01-26T04:41:41.039759Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:14 [2m2024-01-26T04:41:41.126001Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:00:14 [2m2024-01-26T04:41:41.187677Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:00:15 [2m2024-01-26T04:41:42.207921Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:15 [2m2024-01-26T04:41:42.213073Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 1
00:00:15 [2m2024-01-26T04:41:42.214496Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 2
00:00:15 [2m2024-01-26T04:41:42.216013Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 3
00:00:15 [2m2024-01-26T04:41:42.291312Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 1 random-1kxfJ1
00:00:15 [2m2024-01-26T04:41:42.357989Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 2 random-nEWlB2
00:00:15 [2m2024-01-26T04:41:42.414619Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 3 random-PgCst3
00:00:15 [2m2024-01-26T04:41:42.498076Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:34 [2m2024-01-26T04:42:01.837450Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m DKG successfully complete. Starting consensus...
00:00:34 [2m2024-01-26T04:42:01.862525Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:37 [2m2024-01-26T04:42:04.308422Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:00:37 [2m2024-01-26T04:42:04.829652Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:00:37 [2m2024-01-26T04:42:04.836269Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:00:37 [2m2024-01-26T04:42:04.841117Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:00:37 [2m2024-01-26T04:42:04.850305Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:00:37 [2m2024-01-26T04:42:04.922890Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-1 and waiting for it to exit
00:00:37 [2m2024-01-26T04:42:04.970833Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-2 and waiting for it to exit
00:00:38 [2m2024-01-26T04:42:05.027991Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-3 and waiting for it to exit
00:00:38 [2m2024-01-26T04:42:05.043199Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
00:00:38 Error: polling lnd_startup after 20 retries
00:00:38 
00:00:38 Caused by:
00:00:38     status: Unknown, message: "the RPC server is in the process of starting up, but not yet ready to accept calls", details: [], metadata: MetadataMap { headers: {"content-type": "application/grpc"} }
## FAILED: latency_test
## START: reconnect_test
00:00:00     Blocking waiting for file lock on package cache
00:00:00     Blocking waiting for file lock on package cache
00:00:03     Blocking waiting for file lock on package cache
00:00:04     Finished dev [unoptimized + debuginfo] target(s) in 4.22s
00:00:06 [2m2024-01-26T04:41:39.429588Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2321842"
00:00:06 [2m2024-01-26T04:41:39.464949Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:15 [2m2024-01-26T04:41:48.515823Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1q8alxa2sjs6w9ekfpp7wv0dlgya3lrkkyaf3c0z
00:00:22 [2m2024-01-26T04:41:55.026863Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1q8alxa2sjs6w9ekfpp7wv0dlgya3lrkkyaf3c0z
00:00:22 [2m2024-01-26T04:41:55.028096Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:22 [2m2024-01-26T04:41:55.047742Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:22 [2m2024-01-26T04:41:55.047815Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:00:22 [2m2024-01-26T04:41:55.211868Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:22 [2m2024-01-26T04:41:55.211974Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:00:22 [2m2024-01-26T04:41:55.231115Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:22 [2m2024-01-26T04:41:55.259767Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:00:23 [2m2024-01-26T04:41:56.285868Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:23 [2m2024-01-26T04:41:56.299977Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 1
00:00:23 [2m2024-01-26T04:41:56.307902Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 2
00:00:23 [2m2024-01-26T04:41:56.311360Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 3
00:00:23 [2m2024-01-26T04:41:56.405801Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 1 random-UKCp61
00:00:23 [2m2024-01-26T04:41:56.426009Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 2 random-4oOjz2
00:00:23 [2m2024-01-26T04:41:56.436003Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 3 random-XD5oe3
00:00:23 [2m2024-01-26T04:41:56.478799Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:35 [2m2024-01-26T04:42:08.575098Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m DKG successfully complete. Starting consensus...
00:00:35 [2m2024-01-26T04:42:08.584567Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: i/o error: Transport endpoint is not connected (os error 107)
00:00:39 [2m2024-01-26T04:42:12.409984Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m lightning started
00:00:39 [2m2024-01-26T04:42:12.607615Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:40 [2m2024-01-26T04:42:13.434484Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m block sync done
00:00:40 [2m2024-01-26T04:42:13.440664Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m100000000 [3maddr[0m[2m=[0m"bcrt1qfnlnc3534ezyh34jaeqxhhyy8yz2avu45gsfvf"
00:00:40 [2m2024-01-26T04:42:13.460926Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:41 [2m2024-01-26T04:42:14.621136Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:41 [2m2024-01-26T04:42:14.621330Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:41 
00:00:41 Caused by:
00:00:41     connection closed)))} }, trying to continue...
00:00:41 [2m2024-01-26T04:42:14.705845Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:42 [2m2024-01-26T04:42:15.630660Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:42 [2m2024-01-26T04:42:15.630890Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:42 
00:00:42 Caused by:
00:00:42     connection closed)))} }, trying to continue...
00:00:42 [2m2024-01-26T04:42:15.834984Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Getting chan info failed [3me[0m[2m=[0mstatus: Unknown, message: "edge not found", details: [], metadata: MetadataMap { headers: {"content-type": "application/grpc"} }
00:00:43 [2m2024-01-26T04:42:16.837552Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Empty chan info [3medge[0m[2m=[0mChannelEdge { channel_id: 123145302376449, chan_point: "0ad576c000ae9d4916a93c4769757127b2e42890554bf524f7906528caac10fe:1", last_update: 1706244135, node1_pub: "030d6c8e902517bdb928b0ec0d5085a49d061ad4d51a007cc0caa22721eb6bfb0f", node2_pub: "0371bb5e608949ebf1ae9e1823beb40335385e76aa511e865516d6a58728e3797b", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1706244135 }) }
00:00:44 [2m2024-01-26T04:42:17.635084Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Consensus is running
00:00:44 [2m2024-01-26T04:42:17.635310Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m moved client configs
00:00:44 [2m2024-01-26T04:42:17.843796Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways started
00:00:44 [2m2024-01-26T04:42:17.843828Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m federation and gateways started
00:00:44 [2m2024-01-26T04:42:17.844568Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Joining federation with the main client
00:00:45 [2m2024-01-26T04:42:18.089893Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Generating first epoch
00:00:45 [2m2024-01-26T04:42:18.089928Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:45 [2m2024-01-26T04:42:18.990370Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m await gateways registered
00:00:46 [2m2024-01-26T04:42:19.241754Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways registered
00:00:46 [2m2024-01-26T04:42:19.241784Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m starting dev federation took 39.812082691s
00:00:46 [2m2024-01-26T04:42:19.249219Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mfedimint_cli_version[0m[2m=[0m"fedimint-cli 0.2.1"
00:00:46 [2m2024-01-26T04:42:19.256141Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mfedimint_cli_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:00:46 [2m2024-01-26T04:42:19.268380Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mgateway_cli_version[0m[2m=[0m"fedimint-gateway-cli 0.2.1"
00:00:46 [2m2024-01-26T04:42:19.281345Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mgateway_cli_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:00:46 [2m2024-01-26T04:42:19.293210Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mfedimintd_version_hash[0m[2m=[0m"e4e00980c287e98207ca23611ec3b7be07cae6a4"
00:00:46 [2m2024-01-26T04:42:19.302454Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mgatewayd_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:00:46 [2m2024-01-26T04:42:19.302491Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m110
00:00:52 [2m2024-01-26T04:42:25.392572Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to fedimintd-0 and waiting for it to exit
00:01:14 [2m2024-01-26T04:42:47.837558Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m100
00:01:18 [2m2024-01-26T04:42:51.458721Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:01:18 [2m2024-01-26T04:42:51.459174Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m100
00:01:21 [2m2024-01-26T04:42:54.476591Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Server 0 successfully rejoined!
00:01:21 [2m2024-01-26T04:42:54.476626Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m100
00:01:24 [2m2024-01-26T04:42:57.539549Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to fedimintd-1 and waiting for it to exit
00:01:40 [2m2024-01-26T04:43:13.502800Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m100
00:01:43 [2m2024-01-26T04:43:16.582401Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to fedimintd-2 and waiting for it to exit
00:01:57 [2m2024-01-26T04:43:30.686461Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to fedimintd-3 and waiting for it to exit
00:02:11 [2m2024-01-26T04:43:44.463053Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:02:11 [2m2024-01-26T04:43:44.463558Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:02:11 [2m2024-01-26T04:43:44.463969Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:02:15 [2m2024-01-26T04:43:48.056587Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m fm success: reconnect-test
00:02:15 [2m2024-01-26T04:43:48.056628Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:02:15 [2m2024-01-26T04:43:48.061157Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:02:15 [2m2024-01-26T04:43:48.062390Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:02:15 [2m2024-01-26T04:43:48.077482Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-cln and waiting for it to exit
00:02:15 [2m2024-01-26T04:43:48.092406Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:02:15 [2m2024-01-26T04:43:48.100029Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-1 and waiting for it to exit
00:02:15 [2m2024-01-26T04:43:48.107266Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-2 and waiting for it to exit
00:02:15 [2m2024-01-26T04:43:48.115292Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-3 and waiting for it to exit
00:02:15 [2m2024-01-26T04:43:48.123479Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:02:15 [2m2024-01-26T04:43:48.133453Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:02:15 [2m2024-01-26T04:43:48.134520Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: reconnect_test
Seq	Host	Starttime	JobRuntime	Send	Receive	Exitval	Signal	Command
1	:	1706244066.722	     0.021	0	63	0	0	always_success_test
2	:	1706244071.746	     5.053	0	0	0	0	backend_test_bitcoind
3	:	1706244077.665	     5.131	0	0	0	0	backend_test_electrs
4	:	1706244082.796	     5.055	0	0	0	0	backend_test_esplora
5	:	1706244087.931	    37.449	0	4802	1	0	latency_test
6	:	1706244093.104	   135.038	0	12245	0	0	reconnect_test
Compiling client binaries for version v0.2.1...
Using saved setting for 'extra-substituters = https://fedimint.cachix.org' from ~/.local/share/nix/trusted-settings.json.
Using saved setting for 'extra-trusted-public-keys = fedimint.cachix.org-1:FpJJjy1iPVlvyv4OMiN5y9+/arFLPcnZhZVVCHCDYTs=' from ~/.local/share/nix/trusted-settings.json.
Using saved setting for 'extra-substituters = https://fedimint.cachix.org' from ~/.local/share/nix/trusted-settings.json.
Using saved setting for 'extra-trusted-public-keys = fedimint.cachix.org-1:FpJJjy1iPVlvyv4OMiN5y9+/arFLPcnZhZVVCHCDYTs=' from ~/.local/share/nix/trusted-settings.json.
Compiling gateway binaries for version v0.2.1...
Using saved setting for 'extra-substituters = https://fedimint.cachix.org' from ~/.local/share/nix/trusted-settings.json.
Using saved setting for 'extra-trusted-public-keys = fedimint.cachix.org-1:FpJJjy1iPVlvyv4OMiN5y9+/arFLPcnZhZVVCHCDYTs=' from ~/.local/share/nix/trusted-settings.json.
========== Starting backwards-compatibility run ===========
fed version: current
client version: v0.2.1
gateway version: v0.2.1
Pre-building workspace...
    Finished dev [unoptimized + debuginfo] target(s) in 0.22s
Pre-building tests...
    Finished test [unoptimized + debuginfo] target(s) in 0.22s
## Starting all tests in parallel...
parallel: This job failed:
latency_test
parallel: Starting no more jobs. Waiting for 1 jobs to finish.
Some tests failed. Full job log:
Search for '## FAILED' to find the end of the failing test
========== Finished backwards-compatibility run ===========
fed version: current
client version: v0.2.1
gateway version: v0.2.1
## START: always_success_test
## COMPLETE: always_success_test
## START: latency_test
00:00:00     Finished dev [unoptimized + debuginfo] target(s) in 0.34s
00:00:01 [2m2024-01-26T04:42:15.017884Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2341821"
00:00:01 [2m2024-01-26T04:42:15.019698Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:03 [2m2024-01-26T04:42:17.241586Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1qzc9ajtl7fkmjkeemz0qpx84lex4e7rkyffze22
00:00:04 [2m2024-01-26T04:42:18.972494Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1qzc9ajtl7fkmjkeemz0qpx84lex4e7rkyffze22
00:00:04 [2m2024-01-26T04:42:18.974928Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:04 [2m2024-01-26T04:42:18.978822Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:04 [2m2024-01-26T04:42:18.978880Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:00:04 [2m2024-01-26T04:42:18.988868Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:04 [2m2024-01-26T04:42:18.989022Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:00:04 [2m2024-01-26T04:42:18.997116Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:00:05 [2m2024-01-26T04:42:19.005649Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:06 [2m2024-01-26T04:42:20.026819Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:06 [2m2024-01-26T04:42:20.031114Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 1
00:00:06 [2m2024-01-26T04:42:20.051263Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 2
00:00:06 [2m2024-01-26T04:42:20.060299Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 3
00:00:06 [2m2024-01-26T04:42:20.136001Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 1 random-2gtve1
00:00:06 [2m2024-01-26T04:42:20.156770Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 2 random-F6Dxl2
00:00:06 [2m2024-01-26T04:42:20.170319Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 3 random-ELc7V3
00:00:06 [2m2024-01-26T04:42:20.215468Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:12 [2m2024-01-26T04:42:26.511400Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m DKG successfully complete. Starting consensus...
00:00:12 [2m2024-01-26T04:42:26.518264Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:13 [2m2024-01-26T04:42:27.143104Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m lightning started
00:00:13 [2m2024-01-26T04:42:27.526453Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:13 [2m2024-01-26T04:42:27.526638Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:13 
00:00:13 Caused by:
00:00:13     connection closed)))} }, trying to continue...
00:00:14 [2m2024-01-26T04:42:28.179083Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m block sync done
00:00:14 [2m2024-01-26T04:42:28.192616Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m100000000 [3maddr[0m[2m=[0m"bcrt1q2s9e38xsa7dqaukwuka6d2u9vtr4eftzqe2hjt"
00:00:14 [2m2024-01-26T04:42:28.267793Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:16 [2m2024-01-26T04:42:30.085198Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:18 [2m2024-01-26T04:42:32.556757Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Empty chan info [3medge[0m[2m=[0mChannelEdge { channel_id: 123145302376449, chan_point: "81a5bd316679556b30d7fe1aa9a48da1a3c65a7b309696ca9ddb1c35992bab4a:1", last_update: 1706244152, node1_pub: "033d07dfcbaba948d6855978f2290ef380df50c4fe1cccbc6e4e4751e2f1b5ee40", node2_pub: "03dd90f071ca455b8e7090f3e818e1c2f29e63bc1178e5defc144f3ab4cacf1af5", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1706244152 }) }
00:00:19 [2m2024-01-26T04:42:33.616531Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Empty chan info [3medge[0m[2m=[0mChannelEdge { channel_id: 123145302376449, chan_point: "81a5bd316679556b30d7fe1aa9a48da1a3c65a7b309696ca9ddb1c35992bab4a:1", last_update: 1706244152, node1_pub: "033d07dfcbaba948d6855978f2290ef380df50c4fe1cccbc6e4e4751e2f1b5ee40", node2_pub: "03dd90f071ca455b8e7090f3e818e1c2f29e63bc1178e5defc144f3ab4cacf1af5", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1706244152 }) }
00:00:20 [2m2024-01-26T04:42:34.720790Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways started
00:00:22 [2m2024-01-26T04:42:36.878194Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:22 [2m2024-01-26T04:42:36.878883Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:22 
00:00:22 Caused by:
00:00:22     connection closed)))} }, trying to continue...
00:00:24 [2m2024-01-26T04:42:38.922335Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:28 [2m2024-01-26T04:42:42.952875Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Consensus is running
00:00:28 [2m2024-01-26T04:42:42.962543Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m moved client configs
00:00:28 [2m2024-01-26T04:42:42.962607Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m federation and gateways started
00:00:28 [2m2024-01-26T04:42:42.984031Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Joining federation with the main client
00:00:29 [2m2024-01-26T04:42:43.827394Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Generating first epoch
00:00:29 [2m2024-01-26T04:42:43.827425Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:31 [2m2024-01-26T04:42:45.237011Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m await gateways registered
00:00:32 [2m2024-01-26T04:42:46.052661Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways registered
00:00:32 [2m2024-01-26T04:42:46.052693Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m starting dev federation took 31.034739854s
00:00:32 [2m2024-01-26T04:42:46.160525Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mfedimint_cli_version[0m[2m=[0m"fedimint-cli 0.3.0-alpha"
00:00:32 [2m2024-01-26T04:42:46.190320Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mfedimint_cli_version_hash[0m[2m=[0m"e4e00980c287e98207ca23611ec3b7be07cae6a4"
00:00:32 [2m2024-01-26T04:42:46.228380Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mgateway_cli_version[0m[2m=[0m"fedimint-gateway-cli 0.3.0-alpha"
00:00:32 [2m2024-01-26T04:42:46.319637Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mgateway_cli_version_hash[0m[2m=[0m"e4e00980c287e98207ca23611ec3b7be07cae6a4"
00:00:32 [2m2024-01-26T04:42:46.387800Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mfedimintd_version_hash[0m[2m=[0m"e4e00980c287e98207ca23611ec3b7be07cae6a4"
00:00:32 [2m2024-01-26T04:42:46.408809Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mgatewayd_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:00:36 [2m2024-01-26T04:42:50.234324Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:00:36 [2m2024-01-26T04:42:50.237597Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:00:36 [2m2024-01-26T04:42:50.241195Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:00:36 [2m2024-01-26T04:42:50.257043Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-cln and waiting for it to exit
00:00:36 [2m2024-01-26T04:42:50.282392Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:00:36 [2m2024-01-26T04:42:50.292576Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-1 and waiting for it to exit
00:00:36 [2m2024-01-26T04:42:50.309582Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-2 and waiting for it to exit
00:00:36 [2m2024-01-26T04:42:50.380796Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-3 and waiting for it to exit
00:00:36 [2m2024-01-26T04:42:50.393168Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:00:36 [2m2024-01-26T04:42:50.421126Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:00:36 [2m2024-01-26T04:42:50.422496Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
00:00:36 Error: command: gateway-cli --rpcpassword=theresnosecondbest -a http://127.0.0.1:15847/v1 info
00:00:36 
00:00:36 Caused by:
00:00:36     exit status: 1
00:00:36     stdout:
00:00:36     
00:00:36     stderr:
00:00:36     Error: Bad status returned 405 Method Not Allowed
00:00:36     
00:00:36     Stack backtrace:
00:00:36        0: <core::result::Result<T,F> as core::ops::try_trait::FromResidual<core::result::Result<core::convert::Infallible,E>>>::from_residual
00:00:36                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/core/src/result.rs:1962:27
00:00:36        1: gateway_cli::main::{{closure}}
00:00:36                  at ./gateway/cli/src/main.rs:110:28
00:00:36        2: <tracing::instrument::Instrumented<T> as core::future::future::Future>::poll
00:00:36                  at /home/nix/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tracing-0.1.40/src/instrument.rs:321:9
00:00:36        3: tokio::runtime::park::CachedParkThread::block_on::{{closure}}
00:00:36                  at /home/nix/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.34.0/src/runtime/park.rs:282:63
00:00:36        4: tokio::runtime::coop::with_budget
00:00:36                  at /home/nix/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.34.0/src/runtime/coop.rs:107:5
00:00:36           tokio::runtime::coop::budget
00:00:36                  at /home/nix/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.34.0/src/runtime/coop.rs:73:5
00:00:36           tokio::runtime::park::CachedParkThread::block_on
00:00:36                  at /home/nix/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.34.0/src/runtime/park.rs:282:31
00:00:36        5: tokio::runtime::context::blocking::BlockingRegionGuard::block_on
00:00:36                  at /home/nix/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.34.0/src/runtime/context/blocking.rs:66:9
00:00:36        6: tokio::runtime::scheduler::multi_thread::MultiThread::block_on::{{closure}}
00:00:36                  at /home/nix/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.34.0/src/runtime/scheduler/multi_thread/mod.rs:87:13
00:00:36        7: tokio::runtime::context::runtime::enter_runtime
00:00:36                  at /home/nix/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.34.0/src/runtime/context/runtime.rs:65:16
00:00:36        8: tokio::runtime::scheduler::multi_thread::MultiThread::block_on
00:00:36                  at /home/nix/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.34.0/src/runtime/scheduler/multi_thread/mod.rs:86:9
00:00:36        9: tokio::runtime::runtime::Runtime::block_on
00:00:36                  at /home/nix/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.34.0/src/runtime/runtime.rs:350:45
00:00:36       10: gateway_cli::main
00:00:36                  at ./gateway/cli/src/main.rs:105:5
00:00:36       11: core::ops::function::FnOnce::call_once
00:00:36                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/core/src/ops/function.rs:250:5
00:00:36       12: std::sys_common::backtrace::__rust_begin_short_backtrace
00:00:36                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/std/src/sys_common/backtrace.rs:154:18
00:00:36       13: std::rt::lang_start::{{closure}}
00:00:36                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/std/src/rt.rs:166:18
00:00:36       14: core::ops::function::impls::<impl core::ops::function::FnOnce<A> for &F>::call_once
00:00:36                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/core/src/ops/function.rs:284:13
00:00:36           std::panicking::try::do_call
00:00:36                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/std/src/panicking.rs:502:40
00:00:36           std::panicking::try
00:00:36                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/std/src/panicking.rs:466:19
00:00:36           std::panic::catch_unwind
00:00:36                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/std/src/panic.rs:142:14
00:00:36           std::rt::lang_start_internal::{{closure}}
00:00:36                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/std/src/rt.rs:148:48
00:00:36           std::panicking::try::do_call
00:00:36                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/std/src/panicking.rs:502:40
00:00:36           std::panicking::try
00:00:36                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/std/src/panicking.rs:466:19
00:00:36           std::panic::catch_unwind
00:00:36                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/std/src/panic.rs:142:14
00:00:36           std::rt::lang_start_internal
00:00:36                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/std/src/rt.rs:148:20
00:00:36       15: std::rt::lang_start
00:00:36                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/std/src/rt.rs:165:17
00:00:36       16: main
00:00:36       17: __libc_start_call_main
00:00:36       18: __libc_start_main_impl
00:00:36       19: _start
00:00:36     
## FAILED: latency_test
## START: lightning_reconnect_test
00:00:00     Finished dev [unoptimized + debuginfo] target(s) in 0.35s
00:00:01 [2m2024-01-26T04:42:27.516432Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2348133"
00:00:01 [2m2024-01-26T04:42:27.518339Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:07 [2m2024-01-26T04:42:33.355894Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1q8ukgsffmqvpyusalp59v4usefxmxtxe0ycnvg5
00:00:11 [2m2024-01-26T04:42:37.981686Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1q8ukgsffmqvpyusalp59v4usefxmxtxe0ycnvg5
00:00:11 [2m2024-01-26T04:42:37.992235Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:11 [2m2024-01-26T04:42:38.001608Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:11 [2m2024-01-26T04:42:38.001673Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:00:12 [2m2024-01-26T04:42:38.039728Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:12 [2m2024-01-26T04:42:38.039816Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:12 [2m2024-01-26T04:42:38.048573Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:00:12 [2m2024-01-26T04:42:38.067988Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:00:13 [2m2024-01-26T04:42:39.080405Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:13 [2m2024-01-26T04:42:39.088458Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 1
00:00:13 [2m2024-01-26T04:42:39.104409Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 2
00:00:13 [2m2024-01-26T04:42:39.124465Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 3
00:00:13 [2m2024-01-26T04:42:39.171823Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 1 random-utVzp1
00:00:13 [2m2024-01-26T04:42:39.184407Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 2 random-0jmww2
00:00:13 [2m2024-01-26T04:42:39.191868Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 3 random-K7nJE3
00:00:13 [2m2024-01-26T04:42:39.222482Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:20 [2m2024-01-26T04:42:46.427304Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m DKG successfully complete. Starting consensus...
00:00:22 [2m2024-01-26T04:42:48.167084Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m lightning started
00:00:23 [2m2024-01-26T04:42:49.216259Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m block sync done
00:00:23 [2m2024-01-26T04:42:49.239036Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m100000000 [3maddr[0m[2m=[0m"bcrt1qrdgvkplk0azhlx5jssec8nvz9ue3mkjm28jpf0"
00:00:23 [2m2024-01-26T04:42:49.295731Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:23 [2m2024-01-26T04:42:49.363714Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:23 [2m2024-01-26T04:42:49.563977Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:23 
00:00:23 Caused by:
00:00:23     connection closed)))} }, trying to continue...
00:00:24 [2m2024-01-26T04:42:50.572734Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:24 [2m2024-01-26T04:42:50.575759Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:24 
00:00:24 Caused by:
00:00:24     connection closed)))} }, trying to continue...
00:00:24 [2m2024-01-26T04:42:50.791895Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:26 [2m2024-01-26T04:42:52.044309Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Empty chan info [3medge[0m[2m=[0mChannelEdge { channel_id: 123145302376448, chan_point: "9a61f43d4dcaec02e98e09406aeff65e0141c3ab34a6ead63f577ed289e8fd17:0", last_update: 1706244172, node1_pub: "028f9edcf44c1df881a881c066bed07f96edd0643ed4e2834ca87311898b74b5b4", node2_pub: "03ec453f6023869347994584cad500665eb59affab555da57d19d100320dfc7ab5", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1706244172 }) }
00:00:26 [2m2024-01-26T04:42:52.588107Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:26 [2m2024-01-26T04:42:52.588377Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:26 
00:00:26 Caused by:
00:00:26     connection closed)))} }, trying to continue...
00:00:27 [2m2024-01-26T04:42:53.047744Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Empty chan info [3medge[0m[2m=[0mChannelEdge { channel_id: 123145302376448, chan_point: "9a61f43d4dcaec02e98e09406aeff65e0141c3ab34a6ead63f577ed289e8fd17:0", last_update: 1706244172, node1_pub: "028f9edcf44c1df881a881c066bed07f96edd0643ed4e2834ca87311898b74b5b4", node2_pub: "03ec453f6023869347994584cad500665eb59affab555da57d19d100320dfc7ab5", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1706244172 }) }
00:00:27 [2m2024-01-26T04:42:53.599243Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:27 [2m2024-01-26T04:42:53.599470Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:27 
00:00:27 Caused by:
00:00:27     connection closed)))} }, trying to continue...
00:00:28 [2m2024-01-26T04:42:54.096340Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways started
00:00:28 [2m2024-01-26T04:42:54.603240Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Consensus is running
00:00:28 [2m2024-01-26T04:42:54.604747Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m moved client configs
00:00:28 [2m2024-01-26T04:42:54.604798Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m federation and gateways started
00:00:28 [2m2024-01-26T04:42:54.605901Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Joining federation with the main client
00:00:28 [2m2024-01-26T04:42:54.863745Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Generating first epoch
00:00:28 [2m2024-01-26T04:42:54.863779Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:30 [2m2024-01-26T04:42:56.278297Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m await gateways registered
00:00:30 [2m2024-01-26T04:42:56.579628Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways registered
00:00:30 [2m2024-01-26T04:42:56.579666Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m starting dev federation took 29.063162012s
00:00:30 [2m2024-01-26T04:42:56.589792Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mfedimint_cli_version[0m[2m=[0m"fedimint-cli 0.3.0-alpha"
00:00:30 [2m2024-01-26T04:42:56.604636Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mfedimint_cli_version_hash[0m[2m=[0m"e4e00980c287e98207ca23611ec3b7be07cae6a4"
00:00:30 [2m2024-01-26T04:42:56.623777Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mgateway_cli_version[0m[2m=[0m"fedimint-gateway-cli 0.3.0-alpha"
00:00:30 [2m2024-01-26T04:42:56.640725Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mgateway_cli_version_hash[0m[2m=[0m"e4e00980c287e98207ca23611ec3b7be07cae6a4"
00:00:30 [2m2024-01-26T04:42:56.647472Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mfedimintd_version_hash[0m[2m=[0m"e4e00980c287e98207ca23611ec3b7be07cae6a4"
00:00:30 [2m2024-01-26T04:42:56.655477Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mgatewayd_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:00:33 [2m2024-01-26T04:42:59.231846Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:00:33 [2m2024-01-26T04:42:59.233373Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:00:33 [2m2024-01-26T04:42:59.234903Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:00:33 [2m2024-01-26T04:42:59.251256Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-cln and waiting for it to exit
00:00:33 [2m2024-01-26T04:42:59.264171Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:00:33 [2m2024-01-26T04:42:59.308638Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-1 and waiting for it to exit
00:00:33 [2m2024-01-26T04:42:59.315069Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-2 and waiting for it to exit
00:00:33 [2m2024-01-26T04:42:59.321407Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-3 and waiting for it to exit
00:00:33 [2m2024-01-26T04:42:59.326907Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:00:33 [2m2024-01-26T04:42:59.341514Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:00:33 [2m2024-01-26T04:42:59.343426Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
00:00:33 Error: command: gateway-cli --rpcpassword=theresnosecondbest -a http://127.0.0.1:10699/v1 info
00:00:33 
00:00:33 Caused by:
00:00:33     exit status: 1
00:00:33     stdout:
00:00:33     
00:00:33     stderr:
00:00:33     Error: Bad status returned 405 Method Not Allowed
00:00:33     
00:00:33     Stack backtrace:
00:00:33        0: <core::result::Result<T,F> as core::ops::try_trait::FromResidual<core::result::Result<core::convert::Infallible,E>>>::from_residual
00:00:33                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/core/src/result.rs:1962:27
00:00:33        1: gateway_cli::main::{{closure}}
00:00:33                  at ./gateway/cli/src/main.rs:110:28
00:00:33        2: <tracing::instrument::Instrumented<T> as core::future::future::Future>::poll
00:00:33                  at /home/nix/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tracing-0.1.40/src/instrument.rs:321:9
00:00:33        3: tokio::runtime::park::CachedParkThread::block_on::{{closure}}
00:00:33                  at /home/nix/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.34.0/src/runtime/park.rs:282:63
00:00:33        4: tokio::runtime::coop::with_budget
00:00:33                  at /home/nix/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.34.0/src/runtime/coop.rs:107:5
00:00:33           tokio::runtime::coop::budget
00:00:33                  at /home/nix/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.34.0/src/runtime/coop.rs:73:5
00:00:33           tokio::runtime::park::CachedParkThread::block_on
00:00:33                  at /home/nix/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.34.0/src/runtime/park.rs:282:31
00:00:33        5: tokio::runtime::context::blocking::BlockingRegionGuard::block_on
00:00:33                  at /home/nix/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.34.0/src/runtime/context/blocking.rs:66:9
00:00:33        6: tokio::runtime::scheduler::multi_thread::MultiThread::block_on::{{closure}}
00:00:33                  at /home/nix/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.34.0/src/runtime/scheduler/multi_thread/mod.rs:87:13
00:00:33        7: tokio::runtime::context::runtime::enter_runtime
00:00:33                  at /home/nix/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.34.0/src/runtime/context/runtime.rs:65:16
00:00:33        8: tokio::runtime::scheduler::multi_thread::MultiThread::block_on
00:00:33                  at /home/nix/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.34.0/src/runtime/scheduler/multi_thread/mod.rs:86:9
00:00:33        9: tokio::runtime::runtime::Runtime::block_on
00:00:33                  at /home/nix/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.34.0/src/runtime/runtime.rs:350:45
00:00:33       10: gateway_cli::main
00:00:33                  at ./gateway/cli/src/main.rs:105:5
00:00:33       11: core::ops::function::FnOnce::call_once
00:00:33                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/core/src/ops/function.rs:250:5
00:00:33       12: std::sys_common::backtrace::__rust_begin_short_backtrace
00:00:33                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/std/src/sys_common/backtrace.rs:154:18
00:00:33       13: std::rt::lang_start::{{closure}}
00:00:33                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/std/src/rt.rs:166:18
00:00:33       14: core::ops::function::impls::<impl core::ops::function::FnOnce<A> for &F>::call_once
00:00:33                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/core/src/ops/function.rs:284:13
00:00:33           std::panicking::try::do_call
00:00:33                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/std/src/panicking.rs:502:40
00:00:33           std::panicking::try
00:00:33                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/std/src/panicking.rs:466:19
00:00:33           std::panic::catch_unwind
00:00:33                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/std/src/panic.rs:142:14
00:00:33           std::rt::lang_start_internal::{{closure}}
00:00:33                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/std/src/rt.rs:148:48
00:00:33           std::panicking::try::do_call
00:00:33                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/std/src/panicking.rs:502:40
00:00:33           std::panicking::try
00:00:33                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/std/src/panicking.rs:466:19
00:00:33           std::panic::catch_unwind
00:00:33                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/std/src/panic.rs:142:14
00:00:33           std::rt::lang_start_internal
00:00:33                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/std/src/rt.rs:148:20
00:00:33       15: std::rt::lang_start
00:00:33                  at /rustc/cc66ad468955717ab92600c770da8c1601a4ff33/library/std/src/rt.rs:165:17
00:00:33       16: main
00:00:33       17: __libc_start_call_main
00:00:33       18: __libc_start_main_impl
00:00:33       19: _start
00:00:33     
## FAILED: lightning_reconnect_test
## START: reconnect_test
00:00:01     Finished dev [unoptimized + debuginfo] target(s) in 0.63s
00:00:04 [2m2024-01-26T04:42:23.439697Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2345369"
00:00:04 [2m2024-01-26T04:42:23.470009Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:07 [2m2024-01-26T04:42:26.144584Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1qy80wsg9vs5ehfwv3atvn7syxkvjq64wsmj9su4
00:00:08 [2m2024-01-26T04:42:27.808655Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1qy80wsg9vs5ehfwv3atvn7syxkvjq64wsmj9su4
00:00:08 [2m2024-01-26T04:42:27.810169Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:08 [2m2024-01-26T04:42:27.813306Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:08 [2m2024-01-26T04:42:27.813349Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:08 [2m2024-01-26T04:42:27.827732Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:08 [2m2024-01-26T04:42:27.827822Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:00:08 [2m2024-01-26T04:42:27.829763Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:00:08 [2m2024-01-26T04:42:27.832930Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:00:09 [2m2024-01-26T04:42:28.846053Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:09 [2m2024-01-26T04:42:28.849448Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 1
00:00:09 [2m2024-01-26T04:42:28.851161Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 2
00:00:09 [2m2024-01-26T04:42:28.852968Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 3
00:00:09 [2m2024-01-26T04:42:28.899175Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 1 random-pozxD1
00:00:09 [2m2024-01-26T04:42:28.923846Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 2 random-x2B4d2
00:00:09 [2m2024-01-26T04:42:28.959884Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 3 random-Q2VeR3
00:00:10 [2m2024-01-26T04:42:29.065598Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:18 [2m2024-01-26T04:42:37.419607Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m DKG successfully complete. Starting consensus...
00:00:20 [2m2024-01-26T04:42:39.970236Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m lightning started
00:00:22 [2m2024-01-26T04:42:41.015070Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m block sync done
00:00:22 [2m2024-01-26T04:42:41.032530Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m100000000 [3maddr[0m[2m=[0m"bcrt1qgc68l9zdfun79q4cjy86y54fsdptaevjjstzql"
00:00:22 [2m2024-01-26T04:42:41.119718Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:22 [2m2024-01-26T04:42:41.378916Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:22 [2m2024-01-26T04:42:41.500227Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:22 
00:00:22 Caused by:
00:00:22     connection closed)))} }, trying to continue...
00:00:24 [2m2024-01-26T04:42:43.080530Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:25 [2m2024-01-26T04:42:44.529009Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Getting chan info failed [3me[0m[2m=[0mstatus: Unknown, message: "edge not found", details: [], metadata: MetadataMap { headers: {"content-type": "application/grpc"} }
00:00:27 [2m2024-01-26T04:42:46.104028Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways started
00:00:29 [2m2024-01-26T04:42:48.938670Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: i/o error: Connection reset by peer (os error 104)
00:00:31 [2m2024-01-26T04:42:50.951994Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:31 [2m2024-01-26T04:42:50.952344Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:31 
00:00:31 Caused by:
00:00:31     connection closed)))} }, trying to continue...
00:00:33 [2m2024-01-26T04:42:52.963649Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:33 [2m2024-01-26T04:42:52.963893Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:33 
00:00:33 Caused by:
00:00:33     connection closed)))} }, trying to continue...
00:00:34 [2m2024-01-26T04:42:53.969096Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Consensus is running
00:00:34 [2m2024-01-26T04:42:53.969372Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m moved client configs
00:00:34 [2m2024-01-26T04:42:53.969426Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m federation and gateways started
00:00:34 [2m2024-01-26T04:42:53.970199Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Joining federation with the main client
00:00:35 [2m2024-01-26T04:42:54.271004Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Generating first epoch
00:00:35 [2m2024-01-26T04:42:54.271043Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:36 [2m2024-01-26T04:42:55.386410Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m await gateways registered
00:00:36 [2m2024-01-26T04:42:55.593774Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways registered
00:00:36 [2m2024-01-26T04:42:55.593800Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m starting dev federation took 32.153997528s
00:00:36 [2m2024-01-26T04:42:55.599204Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mfedimint_cli_version[0m[2m=[0m"fedimint-cli 0.3.0-alpha"
00:00:36 [2m2024-01-26T04:42:55.605816Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mfedimint_cli_version_hash[0m[2m=[0m"e4e00980c287e98207ca23611ec3b7be07cae6a4"
00:00:36 [2m2024-01-26T04:42:55.612292Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mgateway_cli_version[0m[2m=[0m"fedimint-gateway-cli 0.3.0-alpha"
00:00:36 [2m2024-01-26T04:42:55.629311Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mgateway_cli_version_hash[0m[2m=[0m"e4e00980c287e98207ca23611ec3b7be07cae6a4"
00:00:36 [2m2024-01-26T04:42:55.635721Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mfedimintd_version_hash[0m[2m=[0m"e4e00980c287e98207ca23611ec3b7be07cae6a4"
00:00:36 [2m2024-01-26T04:42:55.642063Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mgatewayd_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:00:36 [2m2024-01-26T04:42:55.642104Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m110
00:00:40 [2m2024-01-26T04:42:59.533491Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to fedimintd-0 and waiting for it to exit
00:00:53 [2m2024-01-26T04:43:12.369922Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m100
00:00:55 [2m2024-01-26T04:43:14.441023Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:55 [2m2024-01-26T04:43:14.441458Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m100
00:00:58 [2m2024-01-26T04:43:17.616927Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Server 0 successfully rejoined!
00:00:58 [2m2024-01-26T04:43:17.616964Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m100
00:01:00 [2m2024-01-26T04:43:19.475002Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to fedimintd-1 and waiting for it to exit
00:01:12 [2m2024-01-26T04:43:31.436313Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m100
00:01:14 [2m2024-01-26T04:43:33.569501Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to fedimintd-2 and waiting for it to exit
00:01:27 [2m2024-01-26T04:43:46.975880Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to fedimintd-3 and waiting for it to exit
00:01:41 [2m2024-01-26T04:44:00.168980Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:01:41 [2m2024-01-26T04:44:00.169412Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:01:41 [2m2024-01-26T04:44:00.169678Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:01:45 [2m2024-01-26T04:44:04.765139Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m fm success: reconnect-test
00:01:45 [2m2024-01-26T04:44:04.765181Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:01:45 [2m2024-01-26T04:44:04.766937Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:01:45 [2m2024-01-26T04:44:04.768226Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:01:45 [2m2024-01-26T04:44:04.777443Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-cln and waiting for it to exit
00:01:45 [2m2024-01-26T04:44:04.786995Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:01:45 [2m2024-01-26T04:44:04.794543Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-1 and waiting for it to exit
00:01:45 [2m2024-01-26T04:44:04.801419Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-2 and waiting for it to exit
00:01:45 [2m2024-01-26T04:44:04.808155Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-3 and waiting for it to exit
00:01:45 [2m2024-01-26T04:44:04.814486Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:01:45 [2m2024-01-26T04:44:04.823808Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:01:45 [2m2024-01-26T04:44:04.824702Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: reconnect_test
Seq	Host	Starttime	JobRuntime	Send	Receive	Exitval	Signal	Command
1	:	1706244077.672	     0.036	0	63	0	0	always_success_test
2	:	1706244082.844	     5.082	0	0	0	0	backend_test_bitcoind
3	:	1706244087.926	     5.166	0	0	0	0	backend_test_electrs
4	:	1706244093.093	     5.187	0	0	0	0	backend_test_esplora
5	:	1706244134.202	    36.624	0	15675	1	0	latency_test
7	:	1706244146.494	    32.861	0	16787	1	0	lightning_reconnect_test
6	:	1706244139.384	   105.448	0	11931	0	0	reconnect_test
Compiling gateway binaries for version v0.2.1...
Using saved setting for 'extra-substituters = https://fedimint.cachix.org' from ~/.local/share/nix/trusted-settings.json.
Using saved setting for 'extra-trusted-public-keys = fedimint.cachix.org-1:FpJJjy1iPVlvyv4OMiN5y9+/arFLPcnZhZVVCHCDYTs=' from ~/.local/share/nix/trusted-settings.json.
========== Starting backwards-compatibility run ===========
fed version: current
client version: current
gateway version: v0.2.1
Pre-building workspace...
    Finished dev [unoptimized + debuginfo] target(s) in 0.23s
Pre-building tests...
    Finished test [unoptimized + debuginfo] target(s) in 0.36s
## Starting all tests in parallel...
parallel: This job failed:
latency_test
parallel: Starting no more jobs. Waiting for 2 jobs to finish.
parallel: This job failed:
lightning_reconnect_test
parallel: Starting no more jobs. Waiting for 1 jobs to finish.
Some tests failed. Full job log:
Search for '## FAILED' to find the end of the failing test
========== Finished backwards-compatibility run ===========
fed version: current
client version: current
gateway version: v0.2.1
## START: always_success_test
## COMPLETE: always_success_test
## START: latency_test
00:00:00     Blocking waiting for file lock on package cache
00:00:01     Blocking waiting for file lock on package cache
00:00:03     Blocking waiting for file lock on package cache
00:00:04     Blocking waiting for file lock on build directory
00:00:06     Finished dev [unoptimized + debuginfo] target(s) in 5.93s
00:00:21 [2m2024-01-26T04:41:54.654670Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2322981"
00:00:21 [2m2024-01-26T04:41:54.695602Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:28 [2m2024-01-26T04:42:01.947782Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1qunartv5h29556puasrcv3sc0vppq77jduyx6wm
00:00:34 [2m2024-01-26T04:42:07.874540Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1qunartv5h29556puasrcv3sc0vppq77jduyx6wm
00:00:34 [2m2024-01-26T04:42:07.875767Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:34 [2m2024-01-26T04:42:07.903676Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:34 [2m2024-01-26T04:42:07.903749Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:34 [2m2024-01-26T04:42:07.983672Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:34 [2m2024-01-26T04:42:07.983741Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:00:35 [2m2024-01-26T04:42:08.087728Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:00:35 [2m2024-01-26T04:42:08.115950Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:00:35 [2m2024-01-26T04:42:08.139668Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:36 [2m2024-01-26T04:42:09.153444Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 1
00:00:36 [2m2024-01-26T04:42:09.160718Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 2
00:00:36 [2m2024-01-26T04:42:09.165170Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 3
00:00:36 [2m2024-01-26T04:42:09.214269Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 1 random-sGVTt1
00:00:36 [2m2024-01-26T04:42:09.233685Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 2 random-pWNKp2
00:00:36 [2m2024-01-26T04:42:09.250542Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 3 random-Fc3br3
00:00:36 [2m2024-01-26T04:42:09.306434Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:40 [2m2024-01-26T04:42:13.853289Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m DKG successfully complete. Starting consensus...
00:00:40 [2m2024-01-26T04:42:13.863819Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:41 [2m2024-01-26T04:42:14.871033Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:41 [2m2024-01-26T04:42:14.871251Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:41 
00:00:41 Caused by:
00:00:41     connection closed)))} }, trying to continue...
00:00:42 [2m2024-01-26T04:42:15.068953Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m lightning started
00:00:42 [2m2024-01-26T04:42:15.881468Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:43 [2m2024-01-26T04:42:16.073928Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m block sync done
00:00:43 [2m2024-01-26T04:42:16.086662Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m100000000 [3maddr[0m[2m=[0m"bcrt1q4qs0gdhaxhz5n5wgg0uketkxrpphp3y37g2px4"
00:00:43 [2m2024-01-26T04:42:16.116002Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:43 [2m2024-01-26T04:42:16.890799Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:43 [2m2024-01-26T04:42:16.891067Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:43 
00:00:43 Caused by:
00:00:43     connection closed)))} }, trying to continue...
00:00:44 [2m2024-01-26T04:42:17.739090Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:44 [2m2024-01-26T04:42:17.910450Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Consensus is running
00:00:44 [2m2024-01-26T04:42:17.910993Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m moved client configs
00:00:46 [2m2024-01-26T04:42:19.962270Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Empty chan info [3medge[0m[2m=[0mChannelEdge { channel_id: 123145302376448, chan_point: "38ae5d80ad28277589e601797625b92650e17a73caf962a703f2bca07e87d67c:0", last_update: 0, node1_pub: "029443f0ef2e68497c798be3f569bee350444ec4976b88b5d923dca6411d981452", node2_pub: "03271557abbce046a4d8264333ce28911f905bfecb0fc37e2e8cbb2f564abda5d2", capacity: 10000000, node1_policy: None, node2_policy: None }
00:00:48 [2m2024-01-26T04:42:21.529460Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways started
00:00:48 [2m2024-01-26T04:42:21.529493Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m federation and gateways started
00:00:48 [2m2024-01-26T04:42:21.560192Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Joining federation with the main client
00:00:50 [2m2024-01-26T04:42:23.584317Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Generating first epoch
00:00:50 [2m2024-01-26T04:42:23.584351Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:01:53 [2m2024-01-26T04:43:26.095042Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:01:53 [2m2024-01-26T04:43:26.103047Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-1 and waiting for it to exit
00:01:53 [2m2024-01-26T04:43:26.111285Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-2 and waiting for it to exit
00:01:53 [2m2024-01-26T04:43:26.119741Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-3 and waiting for it to exit
00:01:53 [2m2024-01-26T04:43:26.128633Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:01:53 [2m2024-01-26T04:43:26.130262Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:01:53 [2m2024-01-26T04:43:26.131441Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:01:53 [2m2024-01-26T04:43:26.141067Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-cln and waiting for it to exit
00:01:53 [2m2024-01-26T04:43:26.151875Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:01:53 [2m2024-01-26T04:43:26.161899Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:01:53 [2m2024-01-26T04:43:26.162875Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
00:01:53 Error: polling gateway connect-fed after 60 retries
00:01:53 
00:01:53 Caused by:
00:01:53     0: command: /nix/store/k6x11hjg5frcc8frqhadylh66yirz6lk-gateway-cli/bin/gateway-cli --rpcpassword=theresnosecondbest -a http://127.0.0.1:13182/v1 connect-fed fed11qgqpw9thwvaz7te3xgmjuvpwxqhrzw33xsmnyv30qqqjql5t5nxkfqwp7c8qlfe8fxn74h0syww5drzrzpqte0jhe22artjpnhck2u
00:01:53     1: exit status: 1
00:01:53        stdout:
00:01:53        
00:01:53        stderr:
00:01:53        Error: Bad status returned 500 Internal Server Error
00:01:53        
## FAILED: latency_test
## START: reconnect_test
00:00:01     Finished dev [unoptimized + debuginfo] target(s) in 0.29s
00:00:01 [2m2024-01-26T04:42:14.422528Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2341540"
00:00:01 [2m2024-01-26T04:42:14.424690Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:03 [2m2024-01-26T04:42:16.573771Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1q28x0uw3wun6zjqek39840ut5am3uk6nhz3dl8l
00:00:05 [2m2024-01-26T04:42:18.566551Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1q28x0uw3wun6zjqek39840ut5am3uk6nhz3dl8l
00:00:05 [2m2024-01-26T04:42:18.567378Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:05 [2m2024-01-26T04:42:18.570302Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:05 [2m2024-01-26T04:42:18.570338Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:00:05 [2m2024-01-26T04:42:18.576953Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:05 [2m2024-01-26T04:42:18.577019Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:00:05 [2m2024-01-26T04:42:18.579934Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:05 [2m2024-01-26T04:42:18.584906Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:00:06 [2m2024-01-26T04:42:19.588629Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:06 [2m2024-01-26T04:42:19.589672Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 1
00:00:06 [2m2024-01-26T04:42:19.590727Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 2
00:00:06 [2m2024-01-26T04:42:19.592731Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 3
00:00:06 [2m2024-01-26T04:42:19.598854Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 1 random-RwkZ31
00:00:06 [2m2024-01-26T04:42:19.603894Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 2 random-h351o2
00:00:06 [2m2024-01-26T04:42:19.610840Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 3 random-YbVtm3
00:00:06 [2m2024-01-26T04:42:19.635469Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:12 [2m2024-01-26T04:42:26.001940Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m DKG successfully complete. Starting consensus...
00:00:13 [2m2024-01-26T04:42:26.010687Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:14 [2m2024-01-26T04:42:27.019166Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:14 [2m2024-01-26T04:42:27.019408Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:14 
00:00:14 Caused by:
00:00:14     connection closed)))} }, trying to continue...
00:00:14 [2m2024-01-26T04:42:27.682402Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m lightning started
00:00:15 [2m2024-01-26T04:42:28.692633Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m block sync done
00:00:15 [2m2024-01-26T04:42:28.703949Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m100000000 [3maddr[0m[2m=[0m"bcrt1qzaq92c237s825faasqvtlxkdvnagc4u42nwz53"
00:00:15 [2m2024-01-26T04:42:28.771720Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:16 [2m2024-01-26T04:42:29.291699Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:16 [2m2024-01-26T04:42:29.292101Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:16 
00:00:16 Caused by:
00:00:16     connection closed)))} }, trying to continue...
00:00:17 [2m2024-01-26T04:42:30.887783Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:20 [2m2024-01-26T04:42:33.595942Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Empty chan info [3medge[0m[2m=[0mChannelEdge { channel_id: 123145302376449, chan_point: "ce04edb5a593856518b53e9c5698ec827d394a3a859f9b15e6cddda3987d92af:1", last_update: 1706244153, node1_pub: "031b333cafcc07a40b3b6227795a17dcbf2f04e0fe7112d4a8fd6c55b45b767043", node2_pub: "0391012b7295bb4f87c41e76b36f6b1b832a3066c9155725d865f26ddeb84ce57a", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1706244153 }) }
00:00:21 [2m2024-01-26T04:42:34.581806Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:21 [2m2024-01-26T04:42:34.648959Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Empty chan info [3medge[0m[2m=[0mChannelEdge { channel_id: 123145302376449, chan_point: "ce04edb5a593856518b53e9c5698ec827d394a3a859f9b15e6cddda3987d92af:1", last_update: 1706244153, node1_pub: "031b333cafcc07a40b3b6227795a17dcbf2f04e0fe7112d4a8fd6c55b45b767043", node2_pub: "0391012b7295bb4f87c41e76b36f6b1b832a3066c9155725d865f26ddeb84ce57a", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1706244153 }) }
00:00:22 [2m2024-01-26T04:42:35.784546Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways started
00:00:25 [2m2024-01-26T04:42:38.595948Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Consensus is running
00:00:25 [2m2024-01-26T04:42:38.599684Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m moved client configs
00:00:25 [2m2024-01-26T04:42:38.599738Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m federation and gateways started
00:00:25 [2m2024-01-26T04:42:38.609012Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Joining federation with the main client
00:00:26 [2m2024-01-26T04:42:39.051122Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Generating first epoch
00:00:26 [2m2024-01-26T04:42:39.051163Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:01:28 [2m2024-01-26T04:43:41.047749Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:01:28 [2m2024-01-26T04:43:41.057270Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-1 and waiting for it to exit
00:01:28 [2m2024-01-26T04:43:41.066804Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-2 and waiting for it to exit
00:01:28 [2m2024-01-26T04:43:41.077302Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-3 and waiting for it to exit
00:01:28 [2m2024-01-26T04:43:41.085121Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:01:28 [2m2024-01-26T04:43:41.086847Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:01:28 [2m2024-01-26T04:43:41.088429Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:01:28 [2m2024-01-26T04:43:41.099854Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-cln and waiting for it to exit
00:01:28 [2m2024-01-26T04:43:41.112242Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:01:28 [2m2024-01-26T04:43:41.122237Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:01:28 [2m2024-01-26T04:43:41.123007Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
00:01:28 Error: polling gateway connect-fed after 60 retries
00:01:28 
00:01:28 Caused by:
00:01:28     0: command: /nix/store/k6x11hjg5frcc8frqhadylh66yirz6lk-gateway-cli/bin/gateway-cli --rpcpassword=theresnosecondbest -a http://127.0.0.1:14262/v1 connect-fed fed11qgqpw9thwvaz7te3xgmjuvpwxqhrzw33xuervdp0qqqjqlwlhumle2ek7s0fsq0xx50nuh7zgrp9ac3urlx3y8fa5p73zse5xu4xla
00:01:28     1: exit status: 1
00:01:28        stdout:
00:01:28        
00:01:28        stderr:
00:01:28        Error: Bad status returned 500 Internal Server Error
00:01:28        
## FAILED: reconnect_test
## START: gateway_reboot_test
00:00:00     Finished dev [unoptimized + debuginfo] target(s) in 0.67s
00:00:01 [2m2024-01-26T04:42:25.682662Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2347255"
00:00:01 [2m2024-01-26T04:42:25.695946Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:03 [2m2024-01-26T04:42:27.704381Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1qk5fwd2c2fyyxa98z2yl7qmf38gqucwhx5z92m3
00:00:07 [2m2024-01-26T04:42:31.900097Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1qk5fwd2c2fyyxa98z2yl7qmf38gqucwhx5z92m3
00:00:07 [2m2024-01-26T04:42:31.920035Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:07 [2m2024-01-26T04:42:31.943681Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:07 [2m2024-01-26T04:42:31.943755Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:08 [2m2024-01-26T04:42:32.067689Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:08 [2m2024-01-26T04:42:32.071700Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:00:08 [2m2024-01-26T04:42:32.093210Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:00:08 [2m2024-01-26T04:42:32.124019Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:00:09 [2m2024-01-26T04:42:33.181482Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:09 [2m2024-01-26T04:42:33.203941Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 1
00:00:09 [2m2024-01-26T04:42:33.208434Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 2
00:00:09 [2m2024-01-26T04:42:33.213090Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 3
00:00:09 [2m2024-01-26T04:42:33.239641Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 1 random-hs6Oi1
00:00:09 [2m2024-01-26T04:42:33.249823Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 2 random-EZT3J2
00:00:09 [2m2024-01-26T04:42:33.257781Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 3 random-L0hZS3
00:00:09 [2m2024-01-26T04:42:33.320194Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:14 [2m2024-01-26T04:42:38.589796Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m DKG successfully complete. Starting consensus...
00:00:14 [2m2024-01-26T04:42:38.599302Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:18 [2m2024-01-26T04:42:42.216406Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m lightning started
00:00:18 [2m2024-01-26T04:42:42.644519Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:18 [2m2024-01-26T04:42:42.644940Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:18 
00:00:18 Caused by:
00:00:18     connection closed)))} }, trying to continue...
00:00:19 [2m2024-01-26T04:42:43.273790Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m block sync done
00:00:19 [2m2024-01-26T04:42:43.289393Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m100000000 [3maddr[0m[2m=[0m"bcrt1q4pc4v96g66usq592qfkqa994v8p4mheetut9kd"
00:00:19 [2m2024-01-26T04:42:43.375874Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:21 [2m2024-01-26T04:42:45.492110Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:23 [2m2024-01-26T04:42:47.017946Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:23 [2m2024-01-26T04:42:47.018341Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:23 
00:00:23 Caused by:
00:00:23     connection closed)))} }, trying to continue...
00:00:24 [2m2024-01-26T04:42:48.052948Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Empty chan info [3medge[0m[2m=[0mChannelEdge { channel_id: 123145302376448, chan_point: "ac384cee16fc4f38c06509abccf0335df380d01268ee343b83a9602afb125e33:0", last_update: 0, node1_pub: "0214fa03d025a1525d6e3a71783995c7e95a64247821c700413991123ec9f661da", node2_pub: "02cdb3ea5e9b6edfaa2230e81a00459d7d2bf3c6f0cef255c9e66a1832d7aae984", capacity: 10000000, node1_policy: None, node2_policy: None }
00:00:25 [2m2024-01-26T04:42:49.040447Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:25 [2m2024-01-26T04:42:49.104220Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Empty chan info [3medge[0m[2m=[0mChannelEdge { channel_id: 123145302376448, chan_point: "ac384cee16fc4f38c06509abccf0335df380d01268ee343b83a9602afb125e33:0", last_update: 1706244168, node1_pub: "0214fa03d025a1525d6e3a71783995c7e95a64247821c700413991123ec9f661da", node2_pub: "02cdb3ea5e9b6edfaa2230e81a00459d7d2bf3c6f0cef255c9e66a1832d7aae984", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1706244168 }) }
00:00:26 [2m2024-01-26T04:42:50.212366Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways started
00:00:27 [2m2024-01-26T04:42:51.045218Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Consensus is running
00:00:27 [2m2024-01-26T04:42:51.045460Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m moved client configs
00:00:27 [2m2024-01-26T04:42:51.045498Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m federation and gateways started
00:00:27 [2m2024-01-26T04:42:51.046414Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Joining federation with the main client
00:00:27 [2m2024-01-26T04:42:51.386986Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Generating first epoch
00:00:27 [2m2024-01-26T04:42:51.387019Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:01:29 [2m2024-01-26T04:43:53.394726Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:01:29 [2m2024-01-26T04:43:53.402206Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-1 and waiting for it to exit
00:01:29 [2m2024-01-26T04:43:53.409173Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-2 and waiting for it to exit
00:01:29 [2m2024-01-26T04:43:53.416533Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-3 and waiting for it to exit
00:01:29 [2m2024-01-26T04:43:53.423069Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:01:29 [2m2024-01-26T04:43:53.424680Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:01:29 [2m2024-01-26T04:43:53.425947Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:01:29 [2m2024-01-26T04:43:53.435522Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-cln and waiting for it to exit
00:01:29 [2m2024-01-26T04:43:53.446629Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:01:29 [2m2024-01-26T04:43:53.455951Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:01:29 [2m2024-01-26T04:43:53.456793Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
00:01:29 Error: polling gateway connect-fed after 60 retries
00:01:29 
00:01:29 Caused by:
00:01:29     0: command: /nix/store/k6x11hjg5frcc8frqhadylh66yirz6lk-gateway-cli/bin/gateway-cli --rpcpassword=theresnosecondbest -a http://127.0.0.1:19404/v1 connect-fed fed11qgqpw9thwvaz7te3xgmjuvpwxqhrzw3jxumrywf0qqqjpu46rc6ghhxd5cf85ng388ty9ag95nefgwchd6z9eay7ldyazdrlre6ev4
00:01:29     1: exit status: 1
00:01:29        stdout:
00:01:29        
00:01:29        stderr:
00:01:29        Error: Bad status returned 500 Internal Server Error
00:01:29        
## FAILED: gateway_reboot_test
## START: lightning_reconnect_test
00:00:01     Finished dev [unoptimized + debuginfo] target(s) in 0.42s
00:00:02 [2m2024-01-26T04:42:20.519203Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2345046"
00:00:02 [2m2024-01-26T04:42:20.543936Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:06 [2m2024-01-26T04:42:24.810022Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1qqt57ln4fvskms2ecctx6ef6gyqw44terk6gmzn
00:00:09 [2m2024-01-26T04:42:27.037716Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1qqt57ln4fvskms2ecctx6ef6gyqw44terk6gmzn
00:00:09 [2m2024-01-26T04:42:27.038337Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:09 [2m2024-01-26T04:42:27.041258Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:09 [2m2024-01-26T04:42:27.041305Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:00:09 [2m2024-01-26T04:42:27.048666Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:09 [2m2024-01-26T04:42:27.048732Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:00:09 [2m2024-01-26T04:42:27.060899Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:00:09 [2m2024-01-26T04:42:27.061620Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:10 [2m2024-01-26T04:42:28.065968Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:10 [2m2024-01-26T04:42:28.068297Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 1
00:00:10 [2m2024-01-26T04:42:28.071460Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 2
00:00:10 [2m2024-01-26T04:42:28.078258Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 3
00:00:10 [2m2024-01-26T04:42:28.088710Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 1 random-MRJH51
00:00:10 [2m2024-01-26T04:42:28.098765Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 2 random-qgRM12
00:00:10 [2m2024-01-26T04:42:28.105662Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 3 random-3FBI93
00:00:10 [2m2024-01-26T04:42:28.127430Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:19 [2m2024-01-26T04:42:37.038016Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m DKG successfully complete. Starting consensus...
00:00:19 [2m2024-01-26T04:42:37.046586Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:20 [2m2024-01-26T04:42:38.158450Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m lightning started
00:00:21 [2m2024-01-26T04:42:39.067862Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:21 [2m2024-01-26T04:42:39.207591Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m block sync done
00:00:21 [2m2024-01-26T04:42:39.229718Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m100000000 [3maddr[0m[2m=[0m"bcrt1quwjqyp8suujwgxayez49zh5qx8a46duslkwuw3"
00:00:21 [2m2024-01-26T04:42:39.325669Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:23 [2m2024-01-26T04:42:41.491384Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:25 [2m2024-01-26T04:42:44.000346Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways started
00:00:29 [2m2024-01-26T04:42:47.780130Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: i/o error: Connection reset by peer (os error 104)
00:00:31 [2m2024-01-26T04:42:49.798476Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: i/o error: Transport endpoint is not connected (os error 107)
00:00:31 [2m2024-01-26T04:42:49.798704Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: i/o error: Transport endpoint is not connected (os error 107); restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: i/o error: Transport endpoint is not connected (os error 107)
00:00:31 
00:00:31 Caused by:
00:00:31     0: i/o error: Transport endpoint is not connected (os error 107)
00:00:31     1: Transport endpoint is not connected (os error 107))))} }, trying to continue...
00:00:33 [2m2024-01-26T04:42:51.808869Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Consensus is running
00:00:33 [2m2024-01-26T04:42:51.809262Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m moved client configs
00:00:33 [2m2024-01-26T04:42:51.809304Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m federation and gateways started
00:00:33 [2m2024-01-26T04:42:51.812605Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Joining federation with the main client
00:00:34 [2m2024-01-26T04:42:52.102365Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Generating first epoch
00:00:34 [2m2024-01-26T04:42:52.102398Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:01:35 [2m2024-01-26T04:43:53.895145Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:01:35 [2m2024-01-26T04:43:53.902484Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-1 and waiting for it to exit
00:01:35 [2m2024-01-26T04:43:53.910461Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-2 and waiting for it to exit
00:01:35 [2m2024-01-26T04:43:53.943731Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-3 and waiting for it to exit
00:01:35 [2m2024-01-26T04:43:53.951120Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:01:35 [2m2024-01-26T04:43:53.952520Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:01:35 [2m2024-01-26T04:43:53.953635Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:01:35 [2m2024-01-26T04:43:53.962346Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-cln and waiting for it to exit
00:01:35 [2m2024-01-26T04:43:53.971188Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:01:35 [2m2024-01-26T04:43:53.980944Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:01:35 [2m2024-01-26T04:43:53.981912Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
00:01:35 Error: polling gateway connect-fed after 60 retries
00:01:35 
00:01:35 Caused by:
00:01:35     0: command: /nix/store/k6x11hjg5frcc8frqhadylh66yirz6lk-gateway-cli/bin/gateway-cli --rpcpassword=theresnosecondbest -a http://127.0.0.1:14591/v1 connect-fed fed11qgqpw9thwvaz7te3xgmjuvpwxqhrzw33xcmnzv30qqqjp4hqruux4nv9yrtxwgkzsw7u28wecg780r4humvc034dlermx6am20mh70
00:01:35     1: exit status: 1
00:01:35        stdout:
00:01:35        
00:01:35        stderr:
00:01:35        Error: Bad status returned 500 Internal Server Error
00:01:35        
## FAILED: lightning_reconnect_test
## START: devimint_cli_test
00:00:02     Finished dev [unoptimized + debuginfo] target(s) in 2.36s
00:00:04 [2m2024-01-26T04:42:33.741884Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2351081"
00:00:04 [2m2024-01-26T04:42:33.765382Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:08 [2m2024-01-26T04:42:37.907814Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1qeua7k8j4famk2fzxhp0672zmwqpak89anc7hsn
00:00:13 [2m2024-01-26T04:42:42.397141Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1qeua7k8j4famk2fzxhp0672zmwqpak89anc7hsn
00:00:13 [2m2024-01-26T04:42:42.404574Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:13 [2m2024-01-26T04:42:42.423710Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:13 [2m2024-01-26T04:42:42.423794Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:00:13 [2m2024-01-26T04:42:42.467699Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:13 [2m2024-01-26T04:42:42.467787Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:13 [2m2024-01-26T04:42:42.484063Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:00:13 [2m2024-01-26T04:42:42.492144Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:00:14 [2m2024-01-26T04:42:43.509524Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:14 [2m2024-01-26T04:42:43.512961Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 1
00:00:14 [2m2024-01-26T04:42:43.517909Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 2
00:00:14 [2m2024-01-26T04:42:43.523275Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 3
00:00:14 [2m2024-01-26T04:42:43.558545Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 1 random-RbPYT1
00:00:14 [2m2024-01-26T04:42:43.586521Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 2 random-WCqN12
00:00:14 [2m2024-01-26T04:42:43.610017Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 3 random-UkXSM3
00:00:14 [2m2024-01-26T04:42:43.671254Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:20 [2m2024-01-26T04:42:49.079458Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m DKG successfully complete. Starting consensus...
00:00:20 [2m2024-01-26T04:42:49.092023Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:22 [2m2024-01-26T04:42:51.111528Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:22 [2m2024-01-26T04:42:51.112665Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:22 
00:00:22 Caused by:
00:00:22     connection closed)))} }, trying to continue...
00:00:22 [2m2024-01-26T04:42:51.551928Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m lightning started
00:00:23 [2m2024-01-26T04:42:52.571287Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m block sync done
00:00:23 [2m2024-01-26T04:42:52.577861Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m100000000 [3maddr[0m[2m=[0m"bcrt1q7jmvey5kuj0sc053v4ayct5skq87cxpwf2pxa4"
00:00:23 [2m2024-01-26T04:42:52.602504Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:24 [2m2024-01-26T04:42:53.124208Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:24 [2m2024-01-26T04:42:53.124630Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:24 
00:00:24 Caused by:
00:00:24     connection closed)))} }, trying to continue...
00:00:24 [2m2024-01-26T04:42:53.973202Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:25 [2m2024-01-26T04:42:54.143271Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: i/o error: Transport endpoint is not connected (os error 107)
00:00:25 [2m2024-01-26T04:42:54.143525Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: i/o error: Transport endpoint is not connected (os error 107); restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: i/o error: Transport endpoint is not connected (os error 107)
00:00:25 
00:00:25 Caused by:
00:00:25     0: i/o error: Transport endpoint is not connected (os error 107)
00:00:25     1: Transport endpoint is not connected (os error 107))))} }, trying to continue...
00:00:26 [2m2024-01-26T04:42:55.135774Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Getting chan info failed [3me[0m[2m=[0mstatus: Unknown, message: "edge not found", details: [], metadata: MetadataMap { headers: {"content-type": "application/grpc"} }
00:00:26 [2m2024-01-26T04:42:55.146609Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Consensus is running
00:00:26 [2m2024-01-26T04:42:55.146894Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m moved client configs
00:00:27 [2m2024-01-26T04:42:56.180711Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Empty chan info [3medge[0m[2m=[0mChannelEdge { channel_id: 123145302376448, chan_point: "0f03494171f972a5c3162f0174cb4c724fa6237cb01c4a8a356d1cf456b1a5c8:0", last_update: 1706244175, node1_pub: "027b3562061b93e8dd5056d6202972a540198520cb9e05b6acaf6a66682e51b006", node2_pub: "02ca5b3f77138ff69df0242b9d01404df1ba7ee196046b6b66baac8ccd992cc0de", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1706244175 }) }
00:00:28 [2m2024-01-26T04:42:57.188960Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways started
00:00:28 [2m2024-01-26T04:42:57.188993Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m federation and gateways started
00:00:28 [2m2024-01-26T04:42:57.191670Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Joining federation with the main client
00:00:28 [2m2024-01-26T04:42:57.555200Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Generating first epoch
00:00:28 [2m2024-01-26T04:42:57.555236Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:01:30 [2m2024-01-26T04:43:59.215695Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:01:30 [2m2024-01-26T04:43:59.221002Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-1 and waiting for it to exit
00:01:30 [2m2024-01-26T04:43:59.226794Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-2 and waiting for it to exit
00:01:30 [2m2024-01-26T04:43:59.231589Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-3 and waiting for it to exit
00:01:30 [2m2024-01-26T04:43:59.236202Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:01:30 [2m2024-01-26T04:43:59.237430Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:01:30 [2m2024-01-26T04:43:59.238529Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:01:30 [2m2024-01-26T04:43:59.252977Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-cln and waiting for it to exit
00:01:30 [2m2024-01-26T04:43:59.263359Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:01:30 [2m2024-01-26T04:43:59.272803Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:01:30 [2m2024-01-26T04:43:59.273619Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
00:01:30 Error: polling gateway connect-fed after 60 retries
00:01:30 
00:01:30 Caused by:
00:01:30     0: command: /nix/store/k6x11hjg5frcc8frqhadylh66yirz6lk-gateway-cli/bin/gateway-cli --rpcpassword=theresnosecondbest -a http://127.0.0.1:30271/v1 connect-fed fed11qgqpw9thwvaz7te3xgmjuvpwxqhrzw3jxycrvde0qqqjqrmecq36hp76hs4kr0dr7wwkqsd2tt95fjpfqr0dgepvmhweknw6tmwqr4
00:01:30     1: exit status: 1
00:01:30        stdout:
00:01:30        
00:01:30        stderr:
00:01:30        Error: Bad status returned 500 Internal Server Error
00:01:30        
## FAILED: devimint_cli_test
## START: devimint_cli_test_single
00:00:01     Finished dev [unoptimized + debuginfo] target(s) in 0.37s
00:00:01 [2m2024-01-26T04:42:51.724815Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2360375"
00:00:01 [2m2024-01-26T04:42:51.730192Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:03 [2m2024-01-26T04:42:53.718005Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1qkee83ppv3e2gqu8k5wk84kmp07y7parwpxf0mc
00:00:05 [2m2024-01-26T04:42:55.427511Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1qkee83ppv3e2gqu8k5wk84kmp07y7parwpxf0mc
00:00:05 [2m2024-01-26T04:42:55.428397Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:05 [2m2024-01-26T04:42:55.431080Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:05 [2m2024-01-26T04:42:55.431129Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:05 [2m2024-01-26T04:42:55.439417Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:06 [2m2024-01-26T04:42:56.448096Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:06 [2m2024-01-26T04:42:56.456335Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:07 [2m2024-01-26T04:42:57.465136Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m DKG successfully complete. Starting consensus...
00:00:07 [2m2024-01-26T04:42:57.472222Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:08 [2m2024-01-26T04:42:58.470816Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Consensus is running
00:00:08 [2m2024-01-26T04:42:58.471027Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m moved client configs
00:00:09 [2m2024-01-26T04:42:59.508272Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m lightning started
00:00:10 [2m2024-01-26T04:43:00.517116Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m block sync done
00:00:10 [2m2024-01-26T04:43:00.520909Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m100000000 [3maddr[0m[2m=[0m"bcrt1qpxyam9j7rexvp9wtznkz79da6sf2j36qa03704"
00:00:10 [2m2024-01-26T04:43:00.536712Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:12 [2m2024-01-26T04:43:02.142971Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:13 [2m2024-01-26T04:43:03.518382Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Getting chan info failed [3me[0m[2m=[0mstatus: Unknown, message: "edge not found", details: [], metadata: MetadataMap { headers: {"content-type": "application/grpc"} }
00:00:14 [2m2024-01-26T04:43:04.520396Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Empty chan info [3medge[0m[2m=[0mChannelEdge { channel_id: 123145302376449, chan_point: "661ddfd5801de77a262515815364781649196fdf1f8e45896d60e76c893754e9:1", last_update: 1706244183, node1_pub: "02fc56940c0885515fbefb48751fa08eabb94a3d5db2400a9e52bedb4f6c3a185f", node2_pub: "033373683a16fd69170f7444d2ce863b9722f81b7bb2cc3ffb3c4f27ad20b7fd0b", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1706244183 }) }
00:00:15 [2m2024-01-26T04:43:05.525825Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways started
00:00:15 [2m2024-01-26T04:43:05.525851Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m federation and gateways started
00:00:15 [2m2024-01-26T04:43:05.526425Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Joining federation with the main client
00:00:15 [2m2024-01-26T04:43:05.702051Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Generating first epoch
00:00:15 [2m2024-01-26T04:43:05.702080Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:01:17 [2m2024-01-26T04:44:07.248388Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:01:17 [2m2024-01-26T04:44:07.253428Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:01:17 [2m2024-01-26T04:44:07.254903Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:01:17 [2m2024-01-26T04:44:07.255987Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:01:17 [2m2024-01-26T04:44:07.265977Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-cln and waiting for it to exit
00:01:17 [2m2024-01-26T04:44:07.275475Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:01:17 [2m2024-01-26T04:44:07.283869Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:01:17 [2m2024-01-26T04:44:07.284618Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
00:01:17 Error: polling gateway connect-fed after 60 retries
00:01:17 
00:01:17 Caused by:
00:01:17     0: command: /nix/store/k6x11hjg5frcc8frqhadylh66yirz6lk-gateway-cli/bin/gateway-cli --rpcpassword=theresnosecondbest -a http://127.0.0.1:11258/v1 connect-fed fed11qgqpw9thwvaz7te3xgmjuvpwxqhrzw33xyunqde0qqqjq3dqyc80ypupyr6n9nwnrdj0zpza0dwzl6v35ru3tmjakgy2eqz2tnjsak
00:01:17     1: exit status: 1
00:01:17        stdout:
00:01:17        
00:01:17        stderr:
00:01:17        Error: Bad status returned 500 Internal Server Error
00:01:17        
## FAILED: devimint_cli_test_single
## START: load_test_tool_test
00:00:01     Finished dev [unoptimized + debuginfo] target(s) in 0.37s
00:00:01 [2m2024-01-26T04:42:56.971700Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2364302"
00:00:01 [2m2024-01-26T04:42:56.982110Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:03 [2m2024-01-26T04:42:58.730194Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1qkx32tht089auyp8mpygcmv9d32gg7vh3a6wjgd
00:00:04 [2m2024-01-26T04:42:59.741655Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1qkx32tht089auyp8mpygcmv9d32gg7vh3a6wjgd
00:00:04 [2m2024-01-26T04:42:59.742415Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:04 [2m2024-01-26T04:42:59.744870Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:04 [2m2024-01-26T04:42:59.744909Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:00:04 [2m2024-01-26T04:42:59.751302Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:04 [2m2024-01-26T04:42:59.751386Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:00:04 [2m2024-01-26T04:42:59.754091Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:00:04 [2m2024-01-26T04:42:59.754596Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:05 [2m2024-01-26T04:43:00.758144Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:05 [2m2024-01-26T04:43:00.759097Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 1
00:00:05 [2m2024-01-26T04:43:00.759980Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 2
00:00:05 [2m2024-01-26T04:43:00.760984Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 3
00:00:05 [2m2024-01-26T04:43:00.766000Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 1 random-gGNYJ1
00:00:05 [2m2024-01-26T04:43:00.770827Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 2 random-SSKM12
00:00:05 [2m2024-01-26T04:43:00.776337Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 3 random-yuVj53
00:00:05 [2m2024-01-26T04:43:00.792975Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:09 [2m2024-01-26T04:43:04.300842Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m DKG successfully complete. Starting consensus...
00:00:09 [2m2024-01-26T04:43:04.306563Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:09 [2m2024-01-26T04:43:04.306817Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:09 
00:00:09 Caused by:
00:00:09     connection closed)))} }, trying to continue...
00:00:09 [2m2024-01-26T04:43:04.848075Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m lightning started
00:00:10 [2m2024-01-26T04:43:05.315417Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:10 [2m2024-01-26T04:43:05.315712Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:10 
00:00:10 Caused by:
00:00:10     connection closed)))} }, trying to continue...
00:00:10 [2m2024-01-26T04:43:05.853784Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m block sync done
00:00:10 [2m2024-01-26T04:43:05.865415Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m100000000 [3maddr[0m[2m=[0m"bcrt1qkxwjtspya2gjhte5e4hv90dm0mvfv0ec8hp47f"
00:00:10 [2m2024-01-26T04:43:05.903983Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:11 [2m2024-01-26T04:43:06.323810Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:11 [2m2024-01-26T04:43:06.324035Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:11 
00:00:11 Caused by:
00:00:11     connection closed)))} }, trying to continue...
00:00:12 [2m2024-01-26T04:43:07.133244Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:12 [2m2024-01-26T04:43:07.331146Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:12 [2m2024-01-26T04:43:07.331348Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:12 
00:00:12 Caused by:
00:00:12     connection closed)))} }, trying to continue...
00:00:14 [2m2024-01-26T04:43:09.285246Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Getting chan info failed [3me[0m[2m=[0mstatus: Unknown, message: "edge not found", details: [], metadata: MetadataMap { headers: {"content-type": "application/grpc"} }
00:00:15 [2m2024-01-26T04:43:10.352629Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Consensus is running
00:00:15 [2m2024-01-26T04:43:10.353503Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m moved client configs
00:00:15 [2m2024-01-26T04:43:10.876490Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways started
00:00:15 [2m2024-01-26T04:43:10.876532Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m federation and gateways started
00:00:15 [2m2024-01-26T04:43:10.877361Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Joining federation with the main client
00:00:16 [2m2024-01-26T04:43:11.256939Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Generating first epoch
00:00:16 [2m2024-01-26T04:43:11.256975Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:01:17 [2m2024-01-26T04:44:12.567662Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:01:17 [2m2024-01-26T04:44:12.574431Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-1 and waiting for it to exit
00:01:17 [2m2024-01-26T04:44:12.580818Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-2 and waiting for it to exit
00:01:17 [2m2024-01-26T04:44:12.587872Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-3 and waiting for it to exit
00:01:17 [2m2024-01-26T04:44:12.594451Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:01:17 [2m2024-01-26T04:44:12.595875Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:01:17 [2m2024-01-26T04:44:12.596893Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:01:17 [2m2024-01-26T04:44:12.605593Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-cln and waiting for it to exit
00:01:17 [2m2024-01-26T04:44:12.613473Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:01:17 [2m2024-01-26T04:44:12.622783Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:01:17 [2m2024-01-26T04:44:12.623551Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
00:01:17 Error: polling gateway connect-fed after 60 retries
00:01:17 
00:01:17 Caused by:
00:01:17     0: command: /nix/store/k6x11hjg5frcc8frqhadylh66yirz6lk-gateway-cli/bin/gateway-cli --rpcpassword=theresnosecondbest -a http://127.0.0.1:31858/v1 connect-fed fed11qgqpw9thwvaz7te3xgmjuvpwxqhrzw33xy6r2ve0qqqjp2au3qsm0xkzaa48ryak8mk6ljtnprulu8cszddz2p80ra55c446krgrew
00:01:17     1: exit status: 1
00:01:17        stdout:
00:01:17        
00:01:17        stderr:
00:01:17        Error: Bad status returned 500 Internal Server Error
00:01:17        
## FAILED: load_test_tool_test
## START: recoverytool_tests
00:00:01     Finished dev [unoptimized + debuginfo] target(s) in 1.72s
00:00:02 [2m2024-01-26T04:43:03.584350Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2368188"
00:00:02 [2m2024-01-26T04:43:03.587518Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:04 [2m2024-01-26T04:43:05.428330Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1qppm3s6gp5prxq2mg4zczylylkkl258kle0wvrv
00:00:05 [2m2024-01-26T04:43:06.604752Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1qppm3s6gp5prxq2mg4zczylylkkl258kle0wvrv
00:00:05 [2m2024-01-26T04:43:06.605338Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:05 [2m2024-01-26T04:43:06.607878Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:05 [2m2024-01-26T04:43:06.607916Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:00:05 [2m2024-01-26T04:43:06.614409Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:05 [2m2024-01-26T04:43:06.614489Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:00:05 [2m2024-01-26T04:43:06.620279Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:05 [2m2024-01-26T04:43:06.622197Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:00:06 [2m2024-01-26T04:43:07.625426Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:06 [2m2024-01-26T04:43:07.626387Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 1
00:00:06 [2m2024-01-26T04:43:07.627273Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 2
00:00:06 [2m2024-01-26T04:43:07.628292Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 3
00:00:06 [2m2024-01-26T04:43:07.633145Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 1 random-Q6A6G1
00:00:06 [2m2024-01-26T04:43:07.637971Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 2 random-IjH5R2
00:00:06 [2m2024-01-26T04:43:07.642833Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 3 random-DR8I53
00:00:06 [2m2024-01-26T04:43:07.659357Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:10 [2m2024-01-26T04:43:11.718238Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m DKG successfully complete. Starting consensus...
00:00:10 [2m2024-01-26T04:43:11.724589Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: i/o error: Transport endpoint is not connected (os error 107)
00:00:10 [2m2024-01-26T04:43:11.724839Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: i/o error: Transport endpoint is not connected (os error 107); restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: i/o error: Transport endpoint is not connected (os error 107)
00:00:10 
00:00:10 Caused by:
00:00:10     0: i/o error: Transport endpoint is not connected (os error 107)
00:00:10     1: Transport endpoint is not connected (os error 107))))} }, trying to continue...
00:00:11 [2m2024-01-26T04:43:12.682050Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m lightning started
00:00:11 [2m2024-01-26T04:43:12.733533Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:11 [2m2024-01-26T04:43:12.734043Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:11 
00:00:11 Caused by:
00:00:11     connection closed)))} }, trying to continue...
00:00:12 [2m2024-01-26T04:43:13.688861Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m block sync done
00:00:12 [2m2024-01-26T04:43:13.703470Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m100000000 [3maddr[0m[2m=[0m"bcrt1qzqfqxt5fmkf96n5xr5njurk04jpc6kzw5pft3a"
00:00:12 [2m2024-01-26T04:43:13.744908Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:12 [2m2024-01-26T04:43:13.979690Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:12 [2m2024-01-26T04:43:13.979916Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:12 
00:00:12 Caused by:
00:00:12     connection closed)))} }, trying to continue...
00:00:13 [2m2024-01-26T04:43:14.987421Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:13 [2m2024-01-26T04:43:14.987721Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:13 
00:00:13 Caused by:
00:00:13     connection closed)))} }, trying to continue...
00:00:14 [2m2024-01-26T04:43:15.155921Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:14 [2m2024-01-26T04:43:15.990529Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Consensus is running
00:00:14 [2m2024-01-26T04:43:15.990767Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m moved client configs
00:00:15 [2m2024-01-26T04:43:16.365024Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Getting chan info failed [3me[0m[2m=[0mstatus: Unknown, message: "edge not found", details: [], metadata: MetadataMap { headers: {"content-type": "application/grpc"} }
00:00:16 [2m2024-01-26T04:43:17.367265Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Empty chan info [3medge[0m[2m=[0mChannelEdge { channel_id: 123145302376448, chan_point: "61c7018017969264a84b2d6864582b5ce0fc5538908cb9d1184e0bb6dcb7797f:0", last_update: 1706244196, node1_pub: "022bb3c02000e1d371c4f6b4f9c5e042f6ad578260ffc2cda7c952213e75d083a2", node2_pub: "03208b450b5c0e1d652ff091c7d30f6e837f95e7f4f8f93d01c6acd5e0dad011de", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1706244196 }) }
00:00:17 [2m2024-01-26T04:43:18.414990Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways started
00:00:17 [2m2024-01-26T04:43:18.415017Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m federation and gateways started
00:00:17 [2m2024-01-26T04:43:18.415658Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Joining federation with the main client
00:00:17 [2m2024-01-26T04:43:18.655474Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Generating first epoch
00:00:17 [2m2024-01-26T04:43:18.655513Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:01:19 [2m2024-01-26T04:44:20.218405Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:01:19 [2m2024-01-26T04:44:20.224329Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-1 and waiting for it to exit
00:01:19 [2m2024-01-26T04:44:20.230077Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-2 and waiting for it to exit
00:01:19 [2m2024-01-26T04:44:20.236459Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-3 and waiting for it to exit
00:01:19 [2m2024-01-26T04:44:20.241865Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:01:19 [2m2024-01-26T04:44:20.243199Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:01:19 [2m2024-01-26T04:44:20.244319Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:01:19 [2m2024-01-26T04:44:20.253234Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-cln and waiting for it to exit
00:01:19 [2m2024-01-26T04:44:20.262478Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:01:19 [2m2024-01-26T04:44:20.270936Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:01:19 [2m2024-01-26T04:44:20.271680Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
00:01:19 Error: polling gateway connect-fed after 60 retries
00:01:19 
00:01:19 Caused by:
00:01:19     0: command: /nix/store/k6x11hjg5frcc8frqhadylh66yirz6lk-gateway-cli/bin/gateway-cli --rpcpassword=theresnosecondbest -a http://127.0.0.1:13410/v1 connect-fed fed11qgqpw9thwvaz7te3xgmjuvpwxqhrzw33xy6ngvf0qqqjpl205j96k8cpfm58lnn3j8p8qqkakpck5v75wyw3deuw5s56wwc2vqdlhw
00:01:19     1: exit status: 1
00:01:19        stdout:
00:01:19        
00:01:19        stderr:
00:01:19        Error: Bad status returned 500 Internal Server Error
00:01:19        
## FAILED: recoverytool_tests
Seq	Host	Starttime	JobRuntime	Send	Receive	Exitval	Signal	Command
1	:	1706244071.573	     0.021	0	63	0	0	always_success_test
2	:	1706244077.702	     5.138	0	0	0	0	backend_test_bitcoind
3	:	1706244082.840	     5.065	0	0	0	0	backend_test_electrs
4	:	1706244087.906	     5.182	0	0	0	0	backend_test_esplora
5	:	1706244093.088	   113.082	0	9076	1	0	latency_test
6	:	1706244133.749	    87.384	0	9689	1	0	reconnect_test
8	:	1706244144.149	    89.315	0	9520	1	0	gateway_reboot_test
7	:	1706244138.915	    95.638	0	8092	1	0	lightning_reconnect_test
9	:	1706244149.420	    89.863	0	10077	1	0	devimint_cli_test
10	:	1706244170.701	    76.592	0	6017	1	0	devimint_cli_test_single
11	:	1706244175.898	    76.733	0	9703	1	0	load_test_tool_test
12	:	1706244181.150	    79.128	0	10623	1	0	recoverytool_tests
Compiling client binaries for version v0.2.1...
Using saved setting for 'extra-substituters = https://fedimint.cachix.org' from ~/.local/share/nix/trusted-settings.json.
Using saved setting for 'extra-trusted-public-keys = fedimint.cachix.org-1:FpJJjy1iPVlvyv4OMiN5y9+/arFLPcnZhZVVCHCDYTs=' from ~/.local/share/nix/trusted-settings.json.
Using saved setting for 'extra-substituters = https://fedimint.cachix.org' from ~/.local/share/nix/trusted-settings.json.
Using saved setting for 'extra-trusted-public-keys = fedimint.cachix.org-1:FpJJjy1iPVlvyv4OMiN5y9+/arFLPcnZhZVVCHCDYTs=' from ~/.local/share/nix/trusted-settings.json.
========== Starting backwards-compatibility run ===========
fed version: current
client version: v0.2.1
gateway version: current
Pre-building workspace...
    Finished dev [unoptimized + debuginfo] target(s) in 0.22s
Pre-building tests...
    Finished test [unoptimized + debuginfo] target(s) in 0.22s
## Starting all tests in parallel...
parallel: This job failed:
latency_test
parallel: Starting no more jobs. Waiting for 7 jobs to finish.
parallel: This job failed:
reconnect_test
parallel: Starting no more jobs. Waiting for 6 jobs to finish.
parallel: This job failed:
gateway_reboot_test
parallel: Starting no more jobs. Waiting for 5 jobs to finish.
parallel: This job failed:
lightning_reconnect_test
parallel: Starting no more jobs. Waiting for 4 jobs to finish.
parallel: This job failed:
devimint_cli_test
parallel: Starting no more jobs. Waiting for 3 jobs to finish.
parallel: This job failed:
devimint_cli_test_single
parallel: Starting no more jobs. Waiting for 2 jobs to finish.
parallel: This job failed:
load_test_tool_test
parallel: Starting no more jobs. Waiting for 1 jobs to finish.
parallel: This job failed:
recoverytool_tests
Some tests failed. Full job log:
Search for '## FAILED' to find the end of the failing test
========== Finished backwards-compatibility run ===========
fed version: current
client version: v0.2.1
gateway version: current
## START: always_success_test
## COMPLETE: always_success_test
## START: reconnect_test
00:00:01     Finished dev [unoptimized + debuginfo] target(s) in 0.36s
00:00:01 [2m2024-01-26T04:41:27.499414Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2317812"
00:00:01 [2m2024-01-26T04:41:27.501797Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:04 [2m2024-01-26T04:41:30.240402Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1qhnvnp3t3exs4f8gpvqv3jwa84va2e0tugv68a2
00:00:09 [2m2024-01-26T04:41:35.315889Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1qhnvnp3t3exs4f8gpvqv3jwa84va2e0tugv68a2
00:00:09 [2m2024-01-26T04:41:35.331781Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:09 [2m2024-01-26T04:41:35.407679Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:09 [2m2024-01-26T04:41:35.407756Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:00:09 [2m2024-01-26T04:41:35.443676Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:09 [2m2024-01-26T04:41:35.491793Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:09 [2m2024-01-26T04:41:35.527860Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:00:09 [2m2024-01-26T04:41:35.538537Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:00:10 [2m2024-01-26T04:41:36.583891Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:10 [2m2024-01-26T04:41:36.600323Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 1
00:00:10 [2m2024-01-26T04:41:36.619749Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 2
00:00:10 [2m2024-01-26T04:41:36.635797Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 3
00:00:10 [2m2024-01-26T04:41:36.724933Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 1 random-KF0uk1
00:00:10 [2m2024-01-26T04:41:36.765370Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 2 random-5btQU2
00:00:10 [2m2024-01-26T04:41:36.803886Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 3 random-reZFW3
00:00:10 [2m2024-01-26T04:41:36.847771Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:30 [2m2024-01-26T04:41:56.763515Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m DKG successfully complete. Starting consensus...
00:00:30 [2m2024-01-26T04:41:56.771178Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:31 [2m2024-01-26T04:41:57.904422Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:00:32 [2m2024-01-26T04:41:58.106749Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:00:32 [2m2024-01-26T04:41:58.110349Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:00:32 [2m2024-01-26T04:41:58.118320Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:00:32 [2m2024-01-26T04:41:58.130138Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:00:32 [2m2024-01-26T04:41:58.149763Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-1 and waiting for it to exit
00:00:32 [2m2024-01-26T04:41:58.164572Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-2 and waiting for it to exit
00:00:32 [2m2024-01-26T04:41:58.202705Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-3 and waiting for it to exit
00:00:32 [2m2024-01-26T04:41:58.340080Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
00:00:32 Error: polling lnd_startup after 20 retries
00:00:32 
00:00:32 Caused by:
00:00:32     status: Unknown, message: "the RPC server is in the process of starting up, but not yet ready to accept calls", details: [], metadata: MetadataMap { headers: {"content-type": "application/grpc"} }
## FAILED: reconnect_test
## START: lightning_reconnect_test
00:00:01     Finished dev [unoptimized + debuginfo] target(s) in 0.39s
00:00:03 [2m2024-01-26T04:41:34.071693Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2320084"
00:00:03 [2m2024-01-26T04:41:34.095871Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:08 [2m2024-01-26T04:41:39.493098Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1qd6prttvpq3s440pen4h7e9nqhqklmsqj5fdk8v
00:00:13 [2m2024-01-26T04:41:44.618332Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1qd6prttvpq3s440pen4h7e9nqhqklmsqj5fdk8v
00:00:13 [2m2024-01-26T04:41:44.622769Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:13 [2m2024-01-26T04:41:44.711686Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:13 [2m2024-01-26T04:41:44.711769Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:00:13 [2m2024-01-26T04:41:44.999733Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:13 [2m2024-01-26T04:41:44.999812Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:00:14 [2m2024-01-26T04:41:45.036029Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:14 [2m2024-01-26T04:41:45.075929Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:00:15 [2m2024-01-26T04:41:46.097839Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:15 [2m2024-01-26T04:41:46.098924Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 1
00:00:15 [2m2024-01-26T04:41:46.100401Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 2
00:00:15 [2m2024-01-26T04:41:46.101385Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 3
00:00:15 [2m2024-01-26T04:41:46.168119Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 1 random-Zqp911
00:00:15 [2m2024-01-26T04:41:46.172520Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 2 random-YDxeU2
00:00:15 [2m2024-01-26T04:41:46.180090Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 3 random-wyULr3
00:00:15 [2m2024-01-26T04:41:46.288506Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:31 [2m2024-01-26T04:42:02.121013Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m DKG successfully complete. Starting consensus...
00:00:31 [2m2024-01-26T04:42:02.131705Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:31 [2m2024-01-26T04:42:02.132140Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:31 
00:00:31 Caused by:
00:00:31     connection closed)))} }, trying to continue...
00:00:37 [2m2024-01-26T04:42:08.343418Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:00:37 [2m2024-01-26T04:42:08.391926Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:00:37 [2m2024-01-26T04:42:08.394942Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:00:37 [2m2024-01-26T04:42:08.401806Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:00:37 [2m2024-01-26T04:42:08.409521Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:00:37 [2m2024-01-26T04:42:08.431240Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-1 and waiting for it to exit
00:00:37 [2m2024-01-26T04:42:08.450375Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-2 and waiting for it to exit
00:00:37 [2m2024-01-26T04:42:08.468117Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-3 and waiting for it to exit
00:00:37 [2m2024-01-26T04:42:08.487797Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
00:00:37 Error: polling lnd_startup after 20 retries
00:00:37 
00:00:37 Caused by:
00:00:37     status: Unknown, message: "the RPC server is in the process of starting up, but not yet ready to accept calls", details: [], metadata: MetadataMap { headers: {"content-type": "application/grpc"} }
## FAILED: lightning_reconnect_test
## START: latency_test
00:00:00     Finished dev [unoptimized + debuginfo] target(s) in 0.29s
00:00:01 [2m2024-01-26T04:41:22.313976Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2316780"
00:00:01 [2m2024-01-26T04:41:22.323839Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:05 [2m2024-01-26T04:41:26.557479Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1qnledl8kpl0pnneelfmvszg6vm8whu8p90580t0
00:00:06 [2m2024-01-26T04:41:27.904961Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1qnledl8kpl0pnneelfmvszg6vm8whu8p90580t0
00:00:06 [2m2024-01-26T04:41:27.905941Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:06 [2m2024-01-26T04:41:27.909366Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:06 [2m2024-01-26T04:41:27.909418Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:00:06 [2m2024-01-26T04:41:27.935742Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:06 [2m2024-01-26T04:41:27.935842Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:00:06 [2m2024-01-26T04:41:27.943375Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:00:06 [2m2024-01-26T04:41:27.949666Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:07 [2m2024-01-26T04:41:28.954627Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:07 [2m2024-01-26T04:41:28.955226Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 1
00:00:07 [2m2024-01-26T04:41:28.955878Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 2
00:00:07 [2m2024-01-26T04:41:28.956493Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 3
00:00:07 [2m2024-01-26T04:41:28.959372Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 1 random-Uv0YF1
00:00:07 [2m2024-01-26T04:41:28.961972Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 2 random-XIoQg2
00:00:07 [2m2024-01-26T04:41:28.964335Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 3 random-9xMkk3
00:00:07 [2m2024-01-26T04:41:28.971531Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:11 [2m2024-01-26T04:41:32.783950Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m DKG successfully complete. Starting consensus...
00:00:13 [2m2024-01-26T04:41:34.035873Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m lightning started
00:00:14 [2m2024-01-26T04:41:35.171728Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:14 [2m2024-01-26T04:41:35.172189Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:14 
00:00:14 Caused by:
00:00:14     connection closed)))} }, trying to continue...
00:00:15 [2m2024-01-26T04:41:36.164673Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m block sync done
00:00:15 [2m2024-01-26T04:41:36.191743Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m100000000 [3maddr[0m[2m=[0m"bcrt1qdj6zv56mret2h0h7axcj0hxwsvc2sm8m00u727"
00:00:15 [2m2024-01-26T04:41:36.316129Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:17 [2m2024-01-26T04:41:38.681939Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:18 [2m2024-01-26T04:41:39.194384Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:18 [2m2024-01-26T04:41:39.195469Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:18 
00:00:18 Caused by:
00:00:18     connection closed)))} }, trying to continue...
00:00:21 [2m2024-01-26T04:41:42.224990Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Getting chan info failed [3me[0m[2m=[0mstatus: Unknown, message: "edge not found", details: [], metadata: MetadataMap { headers: {"content-type": "application/grpc"} }
00:00:22 [2m2024-01-26T04:41:43.356632Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways started
00:00:25 [2m2024-01-26T04:41:46.243717Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:38 [2m2024-01-26T04:41:59.304016Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:42 [2m2024-01-26T04:42:03.348131Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Consensus is running
00:00:42 [2m2024-01-26T04:42:03.355851Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m moved client configs
00:00:42 [2m2024-01-26T04:42:03.355909Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m federation and gateways started
00:00:42 [2m2024-01-26T04:42:03.427751Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Joining federation with the main client
00:00:43 [2m2024-01-26T04:42:04.031899Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Generating first epoch
00:00:43 [2m2024-01-26T04:42:04.031934Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:45 [2m2024-01-26T04:42:06.072463Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m await gateways registered
00:00:46 [2m2024-01-26T04:42:07.038958Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways registered
00:00:46 [2m2024-01-26T04:42:07.038987Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m starting dev federation took 44.724927197s
00:00:46 [2m2024-01-26T04:42:07.073413Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mfedimint_cli_version[0m[2m=[0m"fedimint-cli 0.3.0-alpha"
00:00:46 [2m2024-01-26T04:42:07.136999Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mfedimint_cli_version_hash[0m[2m=[0m"e4e00980c287e98207ca23611ec3b7be07cae6a4"
00:00:46 [2m2024-01-26T04:42:07.190166Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mgateway_cli_version[0m[2m=[0m"fedimint-gateway-cli 0.3.0-alpha"
00:00:46 [2m2024-01-26T04:42:07.224810Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mgateway_cli_version_hash[0m[2m=[0m"e4e00980c287e98207ca23611ec3b7be07cae6a4"
00:00:46 [2m2024-01-26T04:42:07.267711Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mfedimintd_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:00:46 [2m2024-01-26T04:42:07.296672Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m [3mgatewayd_version_hash[0m[2m=[0m"e4e00980c287e98207ca23611ec3b7be07cae6a4"
00:00:48 [2m2024-01-26T04:42:09.031768Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Using cln gateway
00:00:48 [2m2024-01-26T04:42:09.031803Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Pegging-in client funds [3mamount[0m[2m=[0m10000000
00:00:48 [2m2024-01-26T04:42:09.542051Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m10000000 [3maddr[0m[2m=[0m"bcrt1q47jsufhupnwa9unn2xgfkmahj6807d40ap3xhqcmr2cdts96h5uslzzuwd"
00:00:48 [2m2024-01-26T04:42:09.644114Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m21
00:00:57 [2m2024-01-26T04:42:18.098727Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Testing latency of reissue
00:02:14 [2m2024-01-26T04:43:35.493088Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Testing latency of ln send
00:03:14 [2m2024-01-26T04:44:35.810421Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Testing latency of ln receive
00:04:35 [2m2024-01-26T04:45:56.986285Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Testing latency of internal payments within a federation
00:04:36 [2m2024-01-26T04:45:57.152443Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Pegging-in client funds [3mamount[0m[2m=[0m10000000
00:04:36 [2m2024-01-26T04:45:57.333766Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m10000000 [3maddr[0m[2m=[0m"bcrt1qjq5muwpfyyqknaqwxdzwm5xv546gsslw42z2v9necywauq3qffss6qrwp2"
00:04:36 [2m2024-01-26T04:45:57.347560Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m21
00:06:47 [2m2024-01-26T04:48:08.485243Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Testing latency of restore
00:07:29 ================= RESULTS ==================
00:07:29 REISSUE: min: 1.7s, avg: 2.1s, median: 1.8s, p90: 3.7s, max: 4.0s, sum: 64.2s
00:07:29 LN SEND: min: 2.7s, avg: 3.0s, median: 3.0s, p90: 3.1s, max: 4.1s, sum: 60.1s
00:07:29 LN RECV: min: 1.9s, avg: 2.2s, median: 2.2s, p90: 2.4s, max: 3.1s, sum: 44.6s
00:07:29 FM PAY: min: 4.2s, avg: 4.6s, median: 4.4s, p90: 5.3s, max: 5.9s, sum: 91.1s
00:07:29 RESTORE: 41.814964881s
00:07:29 [2m2024-01-26T04:48:50.538156Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:07:29 [2m2024-01-26T04:48:50.539572Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:07:29 [2m2024-01-26T04:48:50.540586Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:07:29 [2m2024-01-26T04:48:50.550797Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-cln and waiting for it to exit
00:07:29 [2m2024-01-26T04:48:50.562122Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:07:29 [2m2024-01-26T04:48:50.590728Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-1 and waiting for it to exit
00:07:29 [2m2024-01-26T04:48:50.600269Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-2 and waiting for it to exit
00:07:29 [2m2024-01-26T04:48:50.609586Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-3 and waiting for it to exit
00:07:29 [2m2024-01-26T04:48:50.620265Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:07:29 [2m2024-01-26T04:48:50.630198Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:07:29 [2m2024-01-26T04:48:50.631085Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: latency_test
Seq	Host	Starttime	JobRuntime	Send	Receive	Exitval	Signal	Command
1	:	1706244061.278	     0.020	0	63	0	0	always_success_test
2	:	1706244066.302	     5.021	0	0	0	0	backend_test_bitcoind
3	:	1706244071.324	     5.126	0	0	0	0	backend_test_electrs
4	:	1706244076.450	     5.062	0	0	0	0	backend_test_esplora
6	:	1706244086.679	    32.026	0	4562	1	0	reconnect_test
7	:	1706244091.798	    36.737	0	5126	1	0	lightning_reconnect_test
5	:	1706244081.512	   449.128	0	11578	0	0	latency_test
Compiling fed binaries for version v0.2.1...
Using saved setting for 'extra-substituters = https://fedimint.cachix.org' from ~/.local/share/nix/trusted-settings.json.
Using saved setting for 'extra-trusted-public-keys = fedimint.cachix.org-1:FpJJjy1iPVlvyv4OMiN5y9+/arFLPcnZhZVVCHCDYTs=' from ~/.local/share/nix/trusted-settings.json.
========== Starting backwards-compatibility run ===========
fed version: v0.2.1
client version: current
gateway version: current
Pre-building workspace...
    Finished dev [unoptimized + debuginfo] target(s) in 0.21s
Pre-building tests...
    Finished test [unoptimized + debuginfo] target(s) in 0.22s
## Starting all tests in parallel...
parallel: This job failed:
reconnect_test
parallel: Starting no more jobs. Waiting for 2 jobs to finish.
parallel: This job failed:
lightning_reconnect_test
parallel: Starting no more jobs. Waiting for 1 jobs to finish.
Some tests failed. Full job log:
Search for '## FAILED' to find the end of the failing test
========== Finished backwards-compatibility run ===========
fed version: v0.2.1
client version: current
gateway version: current
Elapsed time: 481.625727336 seconds
Backwards-compatibility tests summary:
fed_version  client_version  gateway_version  exit_code
