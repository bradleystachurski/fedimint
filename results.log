Running backwards-compatibility tests for versions: v0.2.1
## START: always_success_test
## COMPLETE: always_success_test
## START: lightning_reconnect_test
00:00:00     Blocking waiting for file lock on package cache
00:00:04     Blocking waiting for file lock on package cache
00:00:09     Blocking waiting for file lock on package cache
00:00:12     Finished dev [unoptimized + debuginfo] target(s) in 12.60s
00:00:14 [2m2024-02-01T16:57:24.459676Z[0m [32m INFO[0m [2mdevimint::cli[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2044198"
00:00:14 [2m2024-02-01T16:57:24.519939Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:18 [2m2024-02-01T16:57:28.583886Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1qjsu3zteuqwnx8epphpnchflh9ccagx8zun84j2
00:00:22 [2m2024-02-01T16:57:32.879828Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1qjsu3zteuqwnx8epphpnchflh9ccagx8zun84j2
00:00:22 [2m2024-02-01T16:57:32.891797Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:22 [2m2024-02-01T16:57:32.924704Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:22 [2m2024-02-01T16:57:32.924753Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:23 [2m2024-02-01T16:57:33.096090Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:23 [2m2024-02-01T16:57:33.096153Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:00:23 [2m2024-02-01T16:57:33.131955Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:00:23 [2m2024-02-01T16:57:33.207979Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:00:24 [2m2024-02-01T16:57:34.252678Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:24 [2m2024-02-01T16:57:34.264461Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 1
00:00:24 [2m2024-02-01T16:57:34.268628Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 2
00:00:24 [2m2024-02-01T16:57:34.276500Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 3
00:00:24 [2m2024-02-01T16:57:34.346462Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 1 random-4LaLg1
00:00:24 [2m2024-02-01T16:57:34.350440Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 2 random-O3iV12
00:00:24 [2m2024-02-01T16:57:34.353338Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 3 random-EP97j3
00:00:24 [2m2024-02-01T16:57:34.380862Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:46 [2m2024-02-01T16:57:56.369267Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:00:47 [2m2024-02-01T16:57:57.177365Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:00:47 [2m2024-02-01T16:57:57.181152Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:00:47 [2m2024-02-01T16:57:57.185182Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:00:47 [2m2024-02-01T16:57:57.189843Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:00:47 [2m2024-02-01T16:57:57.332977Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-1 and waiting for it to exit
00:00:47 [2m2024-02-01T16:57:57.483323Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-2 and waiting for it to exit
00:00:47 [2m2024-02-01T16:57:57.565588Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-3 and waiting for it to exit
00:00:47 [2m2024-02-01T16:57:57.681037Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
00:00:47 Error: polling lnd_startup after 20 retries
00:00:47 
00:00:47 Caused by:
00:00:47     status: Unknown, message: "the RPC server is in the process of starting up, but not yet ready to accept calls", details: [], metadata: MetadataMap { headers: {"content-type": "application/grpc"} }
## FAILED: lightning_reconnect_test
## START: gateway_reboot_test
00:00:00     Blocking waiting for file lock on package cache
00:00:00     Blocking waiting for file lock on package cache
00:00:00     Blocking waiting for file lock on package cache
00:00:01     Blocking waiting for file lock on package cache
00:00:01     Blocking waiting for file lock on build directory
00:00:01     Finished dev [unoptimized + debuginfo] target(s) in 1.11s
00:00:04 [2m2024-02-01T16:57:34.593314Z[0m [32m INFO[0m [2mdevimint::cli[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2049650"
00:00:04 [2m2024-02-01T16:57:34.784539Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:13 [2m2024-02-01T16:57:43.996958Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1qznzyyf2ld2cxaez82f53fypxs9hhz03w4kmpun
00:00:19 [2m2024-02-01T16:57:49.537894Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1qznzyyf2ld2cxaez82f53fypxs9hhz03w4kmpun
00:00:19 [2m2024-02-01T16:57:49.540249Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:19 [2m2024-02-01T16:57:49.567126Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:19 [2m2024-02-01T16:57:49.567192Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:00:19 [2m2024-02-01T16:57:49.819944Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:19 [2m2024-02-01T16:57:49.820014Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:00:19 [2m2024-02-01T16:57:49.920029Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:19 [2m2024-02-01T16:57:49.963713Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:00:20 [2m2024-02-01T16:57:50.990947Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:20 [2m2024-02-01T16:57:51.000576Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 1
00:00:21 [2m2024-02-01T16:57:51.020487Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 2
00:00:22 [2m2024-02-01T16:57:52.025034Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 3
00:00:22 [2m2024-02-01T16:57:52.120976Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 1 random-b8ywT1
00:00:22 [2m2024-02-01T16:57:52.163445Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 2 random-KC53l2
00:00:22 [2m2024-02-01T16:57:52.194024Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 3 random-4SSAM3
00:00:22 [2m2024-02-01T16:57:52.297715Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:40 [2m2024-02-01T16:58:10.342669Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m DKG successfully complete. Starting consensus...
00:00:41 [2m2024-02-01T16:58:11.263460Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:41 [2m2024-02-01T16:58:11.263777Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:41 
00:00:41 Caused by:
00:00:41     connection closed)))} }, trying to continue...
00:00:42 [2m2024-02-01T16:58:13.002242Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m lightning started
00:00:43 [2m2024-02-01T16:58:13.272293Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:43 [2m2024-02-01T16:58:13.272465Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:43 
00:00:43 Caused by:
00:00:43     connection closed)))} }, trying to continue...
00:00:44 [2m2024-02-01T16:58:14.012163Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m block sync done
00:00:44 [2m2024-02-01T16:58:14.025036Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m100000000 [3maddr[0m[2m=[0m"bcrt1qs2zvxewhrm36rw6z402ptlcjq8whvfuz3sxqae"
00:00:44 [2m2024-02-01T16:58:14.053758Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:44 [2m2024-02-01T16:58:14.275921Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:44 [2m2024-02-01T16:58:14.276096Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:44 
00:00:44 Caused by:
00:00:44     connection closed)))} }, trying to continue...
00:00:45 [2m2024-02-01T16:58:15.279492Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: i/o error: Transport endpoint is not connected (os error 107)
00:00:45 [2m2024-02-01T16:58:15.279692Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: i/o error: Transport endpoint is not connected (os error 107); restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: i/o error: Transport endpoint is not connected (os error 107)
00:00:45 
00:00:45 Caused by:
00:00:45     0: i/o error: Transport endpoint is not connected (os error 107)
00:00:45     1: Transport endpoint is not connected (os error 107))))} }, trying to continue...
00:00:45 [2m2024-02-01T16:58:15.403699Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:46 [2m2024-02-01T16:58:16.281934Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Consensus is running
00:00:46 [2m2024-02-01T16:58:16.282183Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m moved client configs
00:00:46 [2m2024-02-01T16:58:16.574309Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Getting chan info failed [3me[0m[2m=[0mstatus: Unknown, message: "edge not found", details: [], metadata: MetadataMap { headers: {"content-type": "application/grpc"} }
00:00:47 [2m2024-02-01T16:58:17.624374Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Empty chan info [3medge[0m[2m=[0mChannelEdge { channel_id: 123145302376448, chan_point: "497759924274db814180e625e97d316e1bfe346cf7185e36593b94feed9d8e07:0", last_update: 1706806696, node1_pub: "03dfda628b17409e4239d0426fc0cd7dd4edea9adabe4fba0a54824f8d6a1bdca4", node2_pub: "03e493482955ff3e3061d9aa5f96e1c4ccc5ec7d7182680ac6b2397419ad30a828", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1706806696 }) }
00:00:48 [2m2024-02-01T16:58:18.629475Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways started
00:00:48 [2m2024-02-01T16:58:18.629508Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m federation and gateways started
00:00:48 [2m2024-02-01T16:58:18.630273Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Joining federation with the main client
00:00:49 [2m2024-02-01T16:58:19.261369Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Generating first epoch
00:00:49 [2m2024-02-01T16:58:19.261405Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:50 [2m2024-02-01T16:58:20.833129Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m await gateways registered
00:00:51 [2m2024-02-01T16:58:21.388352Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways registered
00:00:51 [2m2024-02-01T16:58:21.388383Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m starting dev federation took 46.794967457s
00:00:51 [2m2024-02-01T16:58:21.410897Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mfedimint_cli_version[0m[2m=[0m"fedimint-cli 0.3.0-alpha"
00:00:51 [2m2024-02-01T16:58:21.456697Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mfedimint_cli_version_hash[0m[2m=[0m"58717cb4a08ec89d000000002e96d06a7b9a9d"
00:00:51 [2m2024-02-01T16:58:21.477048Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mgateway_cli_version[0m[2m=[0m"fedimint-gateway-cli 0.3.0-alpha"
00:00:51 [2m2024-02-01T16:58:21.503452Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mgateway_cli_version_hash[0m[2m=[0m"58717cb4a08ec89d000000002e96d06a7b9a9d"
00:00:51 [2m2024-02-01T16:58:21.519786Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mfedimintd_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:00:51 [2m2024-02-01T16:58:21.550449Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mgatewayd_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:00:52 [2m2024-02-01T16:58:22.290079Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Using cln gateway
00:00:52 [2m2024-02-01T16:58:22.290111Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Pegging-in client funds [3mamount[0m[2m=[0m10000
00:00:52 [2m2024-02-01T16:58:22.663032Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m10000 [3maddr[0m[2m=[0m"bcrt1q7za575jqh53cm04h7kdda073qxepfnasp0vjm8u07p0mtfl4f8cqqv2rz3"
00:00:52 [2m2024-02-01T16:58:22.697951Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m21
00:01:02 [2m2024-02-01T16:58:32.147742Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-cln and waiting for it to exit
00:01:02 [2m2024-02-01T16:58:32.175409Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:01:02 [2m2024-02-01T16:58:32.203264Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Making payment while gateway is down
00:01:06 [2m2024-02-01T16:58:36.510373Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Rebooting gateways...
00:01:10 [2m2024-02-01T16:58:40.886134Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m CLN Gateway restarted, with auto-rejoin to federation
00:01:10 [2m2024-02-01T16:58:40.914127Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m LND Gateway restarted, with auto-rejoin to federation
00:01:10 [2m2024-02-01T16:58:40.914207Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m gateway_reboot_test: success [3mLOG_DEVIMINT[0m[2m=[0m"devimint"
00:01:10 [2m2024-02-01T16:58:40.914241Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:01:10 [2m2024-02-01T16:58:40.938615Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-cln and waiting for it to exit
00:01:10 [2m2024-02-01T16:58:40.963896Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:01:10 [2m2024-02-01T16:58:40.980713Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:01:10 [2m2024-02-01T16:58:40.992321Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:01:11 [2m2024-02-01T16:58:41.035794Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-1 and waiting for it to exit
00:01:11 [2m2024-02-01T16:58:41.049399Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-2 and waiting for it to exit
00:01:11 [2m2024-02-01T16:58:41.069011Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-3 and waiting for it to exit
00:01:11 [2m2024-02-01T16:58:41.089158Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:01:11 [2m2024-02-01T16:58:41.123011Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:01:11 [2m2024-02-01T16:58:41.127204Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: gateway_reboot_test
## START: reconnect_test
00:00:00     Blocking waiting for file lock on package cache
00:00:00     Blocking waiting for file lock on package cache
00:00:00     Blocking waiting for file lock on package cache
00:00:00     Blocking waiting for file lock on package cache
00:00:00     Blocking waiting for file lock on build directory
00:00:00     Finished dev [unoptimized + debuginfo] target(s) in 0.53s
00:00:00 [2m2024-02-01T16:57:05.702652Z[0m [32m INFO[0m [2mdevimint::cli[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2036422"
00:00:00 [2m2024-02-01T16:57:05.704995Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:02 [2m2024-02-01T16:57:07.545223Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1q78478222p2stny0vyltnvjtqwjjf6r9pr52mfe
00:00:04 [2m2024-02-01T16:57:09.799933Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1q78478222p2stny0vyltnvjtqwjjf6r9pr52mfe
00:00:04 [2m2024-02-01T16:57:09.800595Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:04 [2m2024-02-01T16:57:09.807714Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:04 [2m2024-02-01T16:57:09.807805Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:00:04 [2m2024-02-01T16:57:09.816005Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:04 [2m2024-02-01T16:57:09.816096Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:04 [2m2024-02-01T16:57:09.825552Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:00:04 [2m2024-02-01T16:57:09.831975Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:00:05 [2m2024-02-01T16:57:10.846906Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:05 [2m2024-02-01T16:57:10.848127Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 1
00:00:05 [2m2024-02-01T16:57:10.849297Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 2
00:00:05 [2m2024-02-01T16:57:10.850164Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 3
00:00:05 [2m2024-02-01T16:57:10.858309Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 1 random-eaOk81
00:00:05 [2m2024-02-01T16:57:10.861848Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 2 random-lIv4O2
00:00:05 [2m2024-02-01T16:57:10.864615Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 3 random-74Kl13
00:00:05 [2m2024-02-01T16:57:10.874547Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:22 [2m2024-02-01T16:57:27.845265Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m DKG successfully complete. Starting consensus...
00:00:23 [2m2024-02-01T16:57:28.863717Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:23 [2m2024-02-01T16:57:28.864106Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:23 
00:00:23 Caused by:
00:00:23     connection closed)))} }, trying to continue...
00:00:25 [2m2024-02-01T16:57:30.874158Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:25 [2m2024-02-01T16:57:30.945045Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m lightning started
00:00:26 [2m2024-02-01T16:57:31.961306Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m block sync done
00:00:26 [2m2024-02-01T16:57:31.975779Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m100000000 [3maddr[0m[2m=[0m"bcrt1q6afcp3e472z00tkxajxsk7t8jesrsf9a6wrsay"
00:00:27 [2m2024-02-01T16:57:32.030336Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:29 [2m2024-02-01T16:57:34.084031Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:32 [2m2024-02-01T16:57:37.405754Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Getting chan info failed [3me[0m[2m=[0mstatus: Unknown, message: "edge not found", details: [], metadata: MetadataMap { headers: {"content-type": "application/grpc"} }
00:00:33 [2m2024-02-01T16:57:38.460410Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Empty chan info [3medge[0m[2m=[0mChannelEdge { channel_id: 123145302376448, chan_point: "295ed837113ce7da0e47fde23188e1be11364822f1fe9bc21e1cda9b91921897:0", last_update: 1706806657, node1_pub: "0317e6bc63d1b0d7ce7d8e79a3e81ca355a01a1bf20c468e5148e9216ec9bed57a", node2_pub: "03a7911e3047401a1a5386c16a457996d54df8dbcad4178e1d4b6bf134037a28c1", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1706806657 }) }
00:00:34 [2m2024-02-01T16:57:39.574776Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways started
00:00:34 [2m2024-02-01T16:57:39.644546Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:34 [2m2024-02-01T16:57:39.644927Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:34 
00:00:34 Caused by:
00:00:34     connection closed)))} }, trying to continue...
00:00:41 [2m2024-02-01T16:57:46.723566Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:59 [2m2024-02-01T16:58:04.797884Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Consensus is running
00:00:59 [2m2024-02-01T16:58:04.811808Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m moved client configs
00:00:59 [2m2024-02-01T16:58:04.811863Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m federation and gateways started
00:00:59 [2m2024-02-01T16:58:04.919700Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Joining federation with the main client
00:01:01 [2m2024-02-01T16:58:06.692799Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Generating first epoch
00:01:01 [2m2024-02-01T16:58:06.692836Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:01:03 [2m2024-02-01T16:58:08.139977Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m await gateways registered
00:01:03 [2m2024-02-01T16:58:08.693774Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways registered
00:01:03 [2m2024-02-01T16:58:08.693807Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m starting dev federation took 62.991085387s
00:01:03 [2m2024-02-01T16:58:08.744418Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mfedimint_cli_version[0m[2m=[0m"fedimint-cli 0.3.0-alpha"
00:01:03 [2m2024-02-01T16:58:08.768777Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mfedimint_cli_version_hash[0m[2m=[0m"58717cb4a08ec89d000000002e96d06a7b9a9d"
00:01:03 [2m2024-02-01T16:58:08.804376Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mgateway_cli_version[0m[2m=[0m"fedimint-gateway-cli 0.3.0-alpha"
00:01:03 [2m2024-02-01T16:58:08.828985Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mgateway_cli_version_hash[0m[2m=[0m"58717cb4a08ec89d000000002e96d06a7b9a9d"
00:01:03 [2m2024-02-01T16:58:08.856598Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mfedimintd_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:01:03 [2m2024-02-01T16:58:08.880630Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mgatewayd_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:01:03 [2m2024-02-01T16:58:08.880662Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m110
00:01:09 [2m2024-02-01T16:58:14.355436Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to fedimintd-0 and waiting for it to exit
00:01:19 [2m2024-02-01T16:58:24.851514Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m100
00:01:25 [2m2024-02-01T16:58:30.207750Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:01:25 [2m2024-02-01T16:58:30.229448Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m100
00:01:32 [2m2024-02-01T16:58:37.522835Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Server 0 successfully rejoined!
00:01:32 [2m2024-02-01T16:58:37.522868Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m100
00:01:39 [2m2024-02-01T16:58:44.641661Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to fedimintd-1 and waiting for it to exit
00:01:51 [2m2024-02-01T16:58:56.511940Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m100
00:01:55 [2m2024-02-01T16:59:00.991570Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to fedimintd-2 and waiting for it to exit
00:02:06 [2m2024-02-01T16:59:11.483035Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to fedimintd-3 and waiting for it to exit
00:02:17 [2m2024-02-01T16:59:22.310372Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:02:17 [2m2024-02-01T16:59:22.310952Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:02:17 [2m2024-02-01T16:59:22.311425Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:02:22 [2m2024-02-01T16:59:27.930987Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m fm success: reconnect-test
00:02:22 [2m2024-02-01T16:59:27.931032Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:02:22 [2m2024-02-01T16:59:27.932970Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:02:22 [2m2024-02-01T16:59:27.934208Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:02:22 [2m2024-02-01T16:59:27.946573Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-cln and waiting for it to exit
00:02:22 [2m2024-02-01T16:59:27.958990Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:02:22 [2m2024-02-01T16:59:27.966948Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-1 and waiting for it to exit
00:02:22 [2m2024-02-01T16:59:27.974907Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-2 and waiting for it to exit
00:02:22 [2m2024-02-01T16:59:27.982437Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-3 and waiting for it to exit
00:02:22 [2m2024-02-01T16:59:27.990000Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:02:22 [2m2024-02-01T16:59:27.999666Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:02:22 [2m2024-02-01T16:59:28.000662Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: reconnect_test
Seq	Host	Starttime	JobRuntime	Send	Receive	Exitval	Signal	Command
1	:	1706806599.932	     0.021	0	63	0	0	always_success_test
2	:	1706806604.958	     5.025	0	0	0	0	backend_test_bitcoind
3	:	1706806609.982	     5.028	0	0	0	0	backend_test_electrs
4	:	1706806615.011	     5.023	0	0	0	0	backend_test_esplora
5	:	1706806620.034	     5.023	0	0	0	0	latency_test
7	:	1706806630.196	    47.691	0	4420	1	0	lightning_reconnect_test
8	:	1706806650.501	    70.667	0	13367	0	0	gateway_reboot_test
6	:	1706806625.057	   142.952	0	12380	0	0	reconnect_test
Compiling fed binaries for version v0.2.1...
Using saved setting for 'extra-substituters = https://fedimint.cachix.org' from ~/.local/share/nix/trusted-settings.json.
Using saved setting for 'extra-trusted-public-keys = fedimint.cachix.org-1:FpJJjy1iPVlvyv4OMiN5y9+/arFLPcnZhZVVCHCDYTs=' from ~/.local/share/nix/trusted-settings.json.
Compiling gateway binaries for version v0.2.1...
Using saved setting for 'extra-substituters = https://fedimint.cachix.org' from ~/.local/share/nix/trusted-settings.json.
Using saved setting for 'extra-trusted-public-keys = fedimint.cachix.org-1:FpJJjy1iPVlvyv4OMiN5y9+/arFLPcnZhZVVCHCDYTs=' from ~/.local/share/nix/trusted-settings.json.
========== Starting backwards-compatibility run ===========
fed version: v0.2.1
client version: current
gateway version: v0.2.1
Pre-building workspace...
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on build directory
    Finished dev [unoptimized + debuginfo] target(s) in 0.80s
Pre-building tests...
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on build directory
    Finished test [unoptimized + debuginfo] target(s) in 0.90s
## Starting all tests in parallel...
parallel: This job failed:
lightning_reconnect_test
parallel: Starting no more jobs. Waiting for 2 jobs to finish.
Some tests failed. Full job log:
Search for '## FAILED' to find the end of the failing test
========== Finished backwards-compatibility run ===========
fed version: v0.2.1
client version: current
gateway version: v0.2.1
## START: always_success_test
## COMPLETE: always_success_test
## START: lightning_reconnect_test
00:00:00     Blocking waiting for file lock on package cache
00:00:01     Blocking waiting for file lock on package cache
00:00:04     Blocking waiting for file lock on package cache
00:00:06     Blocking waiting for file lock on build directory
00:00:08     Finished dev [unoptimized + debuginfo] target(s) in 7.96s
00:00:12 [2m2024-02-01T16:57:21.731678Z[0m [32m INFO[0m [2mdevimint::cli[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2042095"
00:00:12 [2m2024-02-01T16:57:21.825121Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:17 [2m2024-02-01T16:57:26.730994Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1qja496nuwe6cfmhpqe5vdc9n0lka5l5y0nya47k
00:00:22 [2m2024-02-01T16:57:31.446813Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1qja496nuwe6cfmhpqe5vdc9n0lka5l5y0nya47k
00:00:22 [2m2024-02-01T16:57:31.457975Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:22 [2m2024-02-01T16:57:31.464838Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:22 [2m2024-02-01T16:57:31.464910Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:00:22 [2m2024-02-01T16:57:31.479852Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:22 [2m2024-02-01T16:57:31.479966Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:22 [2m2024-02-01T16:57:31.488041Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:00:22 [2m2024-02-01T16:57:31.492414Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:00:23 [2m2024-02-01T16:57:32.512135Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:23 [2m2024-02-01T16:57:32.524379Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 1
00:00:23 [2m2024-02-01T16:57:32.535195Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 2
00:00:23 [2m2024-02-01T16:57:32.543189Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 3
00:00:23 [2m2024-02-01T16:57:32.587184Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 1 random-ZKDCS1
00:00:23 [2m2024-02-01T16:57:32.594567Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 2 random-dO3Gz2
00:00:23 [2m2024-02-01T16:57:32.624533Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 3 random-c4hr23
00:00:23 [2m2024-02-01T16:57:32.718081Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:44 [2m2024-02-01T16:57:53.852110Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m DKG successfully complete. Starting consensus...
00:00:44 [2m2024-02-01T16:57:53.853722Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:44 [2m2024-02-01T16:57:53.864432Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:00:45 [2m2024-02-01T16:57:54.315632Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:00:45 [2m2024-02-01T16:57:54.320284Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:00:45 [2m2024-02-01T16:57:54.329221Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:00:45 [2m2024-02-01T16:57:54.353237Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:00:45 [2m2024-02-01T16:57:54.443004Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-1 and waiting for it to exit
00:00:45 [2m2024-02-01T16:57:54.628862Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-2 and waiting for it to exit
00:00:45 [2m2024-02-01T16:57:54.721617Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-3 and waiting for it to exit
00:00:45 [2m2024-02-01T16:57:54.770211Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
00:00:45 Error: polling lnd_startup after 20 retries
00:00:45 
00:00:45 Caused by:
00:00:45     status: Unknown, message: "the RPC server is in the process of starting up, but not yet ready to accept calls", details: [], metadata: MetadataMap { headers: {"content-type": "application/grpc"} }
## FAILED: lightning_reconnect_test
## START: gateway_reboot_test
00:00:00     Blocking waiting for file lock on package cache
00:00:00     Blocking waiting for file lock on build directory
00:00:00     Finished dev [unoptimized + debuginfo] target(s) in 0.83s
00:00:10 [2m2024-02-01T16:57:41.261523Z[0m [32m INFO[0m [2mdevimint::cli[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2049879"
00:00:10 [2m2024-02-01T16:57:41.417459Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:19 [2m2024-02-01T16:57:50.633965Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1qvw6s6an4uafetm4lv35w3nynjlwdsrvy6ed2gl
00:00:25 [2m2024-02-01T16:57:56.054659Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1qvw6s6an4uafetm4lv35w3nynjlwdsrvy6ed2gl
00:00:25 [2m2024-02-01T16:57:56.056123Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:25 [2m2024-02-01T16:57:56.083693Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:25 [2m2024-02-01T16:57:56.083765Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:25 [2m2024-02-01T16:57:56.343799Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:25 [2m2024-02-01T16:57:56.343885Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:00:25 [2m2024-02-01T16:57:56.359966Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:00:25 [2m2024-02-01T16:57:56.366887Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:00:26 [2m2024-02-01T16:57:57.417339Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:26 [2m2024-02-01T16:57:57.440948Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 1
00:00:26 [2m2024-02-01T16:57:57.442268Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 2
00:00:26 [2m2024-02-01T16:57:57.449758Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 3
00:00:26 [2m2024-02-01T16:57:57.565590Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 1 random-dzSjA1
00:00:26 [2m2024-02-01T16:57:57.591962Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 2 random-0KaUu2
00:00:26 [2m2024-02-01T16:57:57.601150Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 3 random-CfSHT3
00:00:26 [2m2024-02-01T16:57:57.634762Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:39 [2m2024-02-01T16:58:10.569405Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m DKG successfully complete. Starting consensus...
00:00:39 [2m2024-02-01T16:58:10.575732Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:39 [2m2024-02-01T16:58:10.576191Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:39 
00:00:39 Caused by:
00:00:39     connection closed)))} }, trying to continue...
00:00:42 [2m2024-02-01T16:58:13.083465Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:42 [2m2024-02-01T16:58:13.083791Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:42 
00:00:42 Caused by:
00:00:42     connection closed)))} }, trying to continue...
00:00:42 [2m2024-02-01T16:58:13.541276Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m lightning started
00:00:43 [2m2024-02-01T16:58:14.087800Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:43 [2m2024-02-01T16:58:14.088060Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:43 
00:00:43 Caused by:
00:00:43     connection closed)))} }, trying to continue...
00:00:43 [2m2024-02-01T16:58:14.548584Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m block sync done
00:00:43 [2m2024-02-01T16:58:14.558822Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m100000000 [3maddr[0m[2m=[0m"bcrt1qmxakq0paax8r42w0tzjus9z55hchyqxsppwecz"
00:00:43 [2m2024-02-01T16:58:14.585550Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:44 [2m2024-02-01T16:58:15.091955Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: i/o error: Transport endpoint is not connected (os error 107)
00:00:44 [2m2024-02-01T16:58:15.093375Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: i/o error: Transport endpoint is not connected (os error 107); restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: i/o error: Transport endpoint is not connected (os error 107)
00:00:44 
00:00:44 Caused by:
00:00:44     0: i/o error: Transport endpoint is not connected (os error 107)
00:00:44     1: Transport endpoint is not connected (os error 107))))} }, trying to continue...
00:00:44 [2m2024-02-01T16:58:15.885978Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:45 [2m2024-02-01T16:58:16.096328Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Consensus is running
00:00:45 [2m2024-02-01T16:58:16.099723Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m moved client configs
00:00:45 [2m2024-02-01T16:58:16.999331Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Getting chan info failed [3me[0m[2m=[0mstatus: Unknown, message: "edge not found", details: [], metadata: MetadataMap { headers: {"content-type": "application/grpc"} }
00:00:46 [2m2024-02-01T16:58:18.001461Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Empty chan info [3medge[0m[2m=[0mChannelEdge { channel_id: 123145302376449, chan_point: "34c4a983c654995e13b9ea97beafd40ae88a8098c1fb3f72b10fda3a6193aced:1", last_update: 1706806697, node1_pub: "020b8ba53da9b9da814b16924cb45ee4f4901bc1596f31e3ed0af0021023268f89", node2_pub: "037b13b2bbf167769974066356d898ec816e64c0f7930ea06c4b2a31fce01dc98d", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1706806697 }) }
00:00:48 [2m2024-02-01T16:58:19.106990Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways started
00:00:48 [2m2024-02-01T16:58:19.107030Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m federation and gateways started
00:00:48 [2m2024-02-01T16:58:19.131731Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Joining federation with the main client
00:00:48 [2m2024-02-01T16:58:19.972165Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Generating first epoch
00:00:48 [2m2024-02-01T16:58:19.972213Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:50 [2m2024-02-01T16:58:21.372712Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m await gateways registered
00:00:50 [2m2024-02-01T16:58:21.747820Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways registered
00:00:50 [2m2024-02-01T16:58:21.747852Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m starting dev federation took 40.486230544s
00:00:50 [2m2024-02-01T16:58:21.775302Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mfedimint_cli_version[0m[2m=[0m"fedimint-cli 0.3.0-alpha"
00:00:50 [2m2024-02-01T16:58:21.797307Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mfedimint_cli_version_hash[0m[2m=[0m"58717cb4a08ec89d000000002e96d06a7b9a9d"
00:00:50 [2m2024-02-01T16:58:21.824334Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mgateway_cli_version[0m[2m=[0m"fedimint-gateway-cli 0.3.0-alpha"
00:00:50 [2m2024-02-01T16:58:21.844457Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mgateway_cli_version_hash[0m[2m=[0m"58717cb4a08ec89d000000002e96d06a7b9a9d"
00:00:50 [2m2024-02-01T16:58:21.859698Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mfedimintd_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:00:50 [2m2024-02-01T16:58:21.879981Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mgatewayd_version_hash[0m[2m=[0m"58717cb4a08ec89d000000002e96d06a7b9a9d"
00:00:51 [2m2024-02-01T16:58:22.572532Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Using cln gateway
00:00:51 [2m2024-02-01T16:58:22.572564Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Pegging-in client funds [3mamount[0m[2m=[0m10000
00:00:51 [2m2024-02-01T16:58:22.798286Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m10000 [3maddr[0m[2m=[0m"bcrt1qaf8t60jv90jh5mmztc9z8lypld4yanf9cpqj8y6j3c8zfn8gxp7qq25eh9"
00:00:51 [2m2024-02-01T16:58:22.860276Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m21
00:01:03 [2m2024-02-01T16:58:34.187135Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-cln and waiting for it to exit
00:01:03 [2m2024-02-01T16:58:34.235294Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:01:03 [2m2024-02-01T16:58:34.272259Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Making payment while gateway is down
00:01:07 [2m2024-02-01T16:58:38.430197Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Rebooting gateways...
00:01:12 [2m2024-02-01T16:58:43.133874Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m CLN Gateway restarted, with auto-rejoin to federation
00:01:12 [2m2024-02-01T16:58:43.290529Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m LND Gateway restarted, with auto-rejoin to federation
00:01:12 [2m2024-02-01T16:58:43.306774Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m gateway_reboot_test: success [3mLOG_DEVIMINT[0m[2m=[0m"devimint"
00:01:12 [2m2024-02-01T16:58:43.306837Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:01:12 [2m2024-02-01T16:58:43.401098Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-cln and waiting for it to exit
00:01:12 [2m2024-02-01T16:58:43.445078Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:01:12 [2m2024-02-01T16:58:43.452668Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:01:12 [2m2024-02-01T16:58:43.458581Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:01:12 [2m2024-02-01T16:58:43.487732Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-1 and waiting for it to exit
00:01:12 [2m2024-02-01T16:58:43.600406Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-2 and waiting for it to exit
00:01:12 [2m2024-02-01T16:58:43.632123Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-3 and waiting for it to exit
00:01:12 [2m2024-02-01T16:58:43.648910Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:01:12 [2m2024-02-01T16:58:43.715439Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:01:12 [2m2024-02-01T16:58:43.718412Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: gateway_reboot_test
## START: reconnect_test
00:00:00     Blocking waiting for file lock on package cache
00:00:00     Blocking waiting for file lock on package cache
00:00:01     Blocking waiting for file lock on package cache
00:00:01     Finished dev [unoptimized + debuginfo] target(s) in 0.45s
00:00:01 [2m2024-02-01T16:57:05.323443Z[0m [32m INFO[0m [2mdevimint::cli[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2036138"
00:00:01 [2m2024-02-01T16:57:05.325863Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:02 [2m2024-02-01T16:57:06.958407Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1qmpk7c6zzfwsj2er2y69smqup8wwnkw3k5ry5tq
00:00:04 [2m2024-02-01T16:57:08.970526Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1qmpk7c6zzfwsj2er2y69smqup8wwnkw3k5ry5tq
00:00:04 [2m2024-02-01T16:57:08.971896Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:04 [2m2024-02-01T16:57:08.974498Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:04 [2m2024-02-01T16:57:08.974531Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:04 [2m2024-02-01T16:57:08.980403Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:04 [2m2024-02-01T16:57:08.980471Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:00:04 [2m2024-02-01T16:57:08.983260Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:00:04 [2m2024-02-01T16:57:08.983716Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:00:05 [2m2024-02-01T16:57:09.987935Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:05 [2m2024-02-01T16:57:09.990036Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 1
00:00:05 [2m2024-02-01T16:57:09.992017Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 2
00:00:05 [2m2024-02-01T16:57:09.996483Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 3
00:00:06 [2m2024-02-01T16:57:10.003661Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 1 random-CcnHq1
00:00:06 [2m2024-02-01T16:57:10.007698Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 2 random-zkSqU2
00:00:06 [2m2024-02-01T16:57:10.017106Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 3 random-25hdO3
00:00:06 [2m2024-02-01T16:57:10.030250Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:24 [2m2024-02-01T16:57:28.009785Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m DKG successfully complete. Starting consensus...
00:00:24 [2m2024-02-01T16:57:28.290351Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m lightning started
00:00:25 [2m2024-02-01T16:57:29.071711Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:25 [2m2024-02-01T16:57:29.072045Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:25 
00:00:25 Caused by:
00:00:25     connection closed)))} }, trying to continue...
00:00:25 [2m2024-02-01T16:57:29.310845Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m block sync done
00:00:25 [2m2024-02-01T16:57:29.324099Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m100000000 [3maddr[0m[2m=[0m"bcrt1qk27uc9un7dwrcd9r2jlyzjm5ct6rvah3hhv3zp"
00:00:25 [2m2024-02-01T16:57:29.371145Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:27 [2m2024-02-01T16:57:31.076186Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:27 [2m2024-02-01T16:57:31.076360Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:27 
00:00:27 Caused by:
00:00:27     connection closed)))} }, trying to continue...
00:00:27 [2m2024-02-01T16:57:31.109448Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:28 [2m2024-02-01T16:57:32.503869Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Empty chan info [3medge[0m[2m=[0mChannelEdge { channel_id: 123145302376449, chan_point: "e0aa8e4dcc3875debd7e79ccd9bbbd22fda686c69f1c8bef0a023230733750cc:1", last_update: 1706806652, node1_pub: "02805a83e7f8e5d82f406abbb704e1cfc34777a0140221c79a14bee3bd9ce02aeb", node2_pub: "02c383619604cf87bfd803aacd3d030e9d59742c1b7771682d1cb3d118df1749e9", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1706806652 }) }
00:00:29 [2m2024-02-01T16:57:33.108295Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:29 [2m2024-02-01T16:57:33.552534Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Empty chan info [3medge[0m[2m=[0mChannelEdge { channel_id: 123145302376449, chan_point: "e0aa8e4dcc3875debd7e79ccd9bbbd22fda686c69f1c8bef0a023230733750cc:1", last_update: 1706806652, node1_pub: "02805a83e7f8e5d82f406abbb704e1cfc34777a0140221c79a14bee3bd9ce02aeb", node2_pub: "02c383619604cf87bfd803aacd3d030e9d59742c1b7771682d1cb3d118df1749e9", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1706806652 }) }
00:00:30 [2m2024-02-01T16:57:34.670475Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways started
00:00:44 [2m2024-02-01T16:57:48.166037Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:01:00 [2m2024-02-01T16:58:04.235043Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Consensus is running
00:01:00 [2m2024-02-01T16:58:04.236319Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m moved client configs
00:01:00 [2m2024-02-01T16:58:04.236362Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m federation and gateways started
00:01:00 [2m2024-02-01T16:58:04.289355Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Joining federation with the main client
00:01:02 [2m2024-02-01T16:58:06.752622Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Generating first epoch
00:01:02 [2m2024-02-01T16:58:06.752657Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:01:04 [2m2024-02-01T16:58:08.055256Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m await gateways registered
00:01:04 [2m2024-02-01T16:58:08.748716Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways registered
00:01:04 [2m2024-02-01T16:58:08.748740Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m starting dev federation took 63.425201101s
00:01:04 [2m2024-02-01T16:58:08.784833Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mfedimint_cli_version[0m[2m=[0m"fedimint-cli 0.3.0-alpha"
00:01:04 [2m2024-02-01T16:58:08.822409Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mfedimint_cli_version_hash[0m[2m=[0m"58717cb4a08ec89d000000002e96d06a7b9a9d"
00:01:04 [2m2024-02-01T16:58:08.869808Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mgateway_cli_version[0m[2m=[0m"fedimint-gateway-cli 0.3.0-alpha"
00:01:04 [2m2024-02-01T16:58:08.908206Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mgateway_cli_version_hash[0m[2m=[0m"58717cb4a08ec89d000000002e96d06a7b9a9d"
00:01:04 [2m2024-02-01T16:58:08.924669Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mfedimintd_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:01:04 [2m2024-02-01T16:58:08.965015Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mgatewayd_version_hash[0m[2m=[0m"58717cb4a08ec89d000000002e96d06a7b9a9d"
00:01:04 [2m2024-02-01T16:58:08.965072Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m110
00:01:11 [2m2024-02-01T16:58:15.205662Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to fedimintd-0 and waiting for it to exit
00:01:21 [2m2024-02-01T16:58:25.784796Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m100
00:01:28 [2m2024-02-01T16:58:32.451874Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:01:28 [2m2024-02-01T16:58:32.465902Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m100
00:01:36 [2m2024-02-01T16:58:40.229687Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Server 0 successfully rejoined!
00:01:36 [2m2024-02-01T16:58:40.237662Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m100
00:01:42 [2m2024-02-01T16:58:46.859842Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to fedimintd-1 and waiting for it to exit
00:01:53 [2m2024-02-01T16:58:57.986816Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m100
00:01:58 [2m2024-02-01T16:59:02.751273Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to fedimintd-2 and waiting for it to exit
00:02:09 [2m2024-02-01T16:59:13.639089Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to fedimintd-3 and waiting for it to exit
00:02:20 [2m2024-02-01T16:59:24.516602Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:02:20 [2m2024-02-01T16:59:24.517109Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:02:20 [2m2024-02-01T16:59:24.517500Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:02:26 [2m2024-02-01T16:59:30.324618Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m fm success: reconnect-test
00:02:26 [2m2024-02-01T16:59:30.324658Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:02:26 [2m2024-02-01T16:59:30.329141Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:02:26 [2m2024-02-01T16:59:30.330863Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:02:26 [2m2024-02-01T16:59:30.346429Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-cln and waiting for it to exit
00:02:26 [2m2024-02-01T16:59:30.357547Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:02:26 [2m2024-02-01T16:59:30.366604Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-1 and waiting for it to exit
00:02:26 [2m2024-02-01T16:59:30.376403Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-2 and waiting for it to exit
00:02:26 [2m2024-02-01T16:59:30.385097Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-3 and waiting for it to exit
00:02:26 [2m2024-02-01T16:59:30.394621Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:02:26 [2m2024-02-01T16:59:30.407254Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:02:26 [2m2024-02-01T16:59:30.408270Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: reconnect_test
Seq	Host	Starttime	JobRuntime	Send	Receive	Exitval	Signal	Command
1	:	1706806599.567	     0.022	0	63	0	0	always_success_test
2	:	1706806604.597	     5.031	0	0	0	0	backend_test_bitcoind
3	:	1706806609.628	     5.050	0	0	0	0	backend_test_electrs
4	:	1706806614.679	     5.050	0	0	0	0	backend_test_esplora
5	:	1706806619.729	     5.050	0	0	0	0	latency_test
7	:	1706806629.861	    45.672	0	4833	1	0	lightning_reconnect_test
8	:	1706806651.020	    72.749	0	13182	0	0	gateway_reboot_test
6	:	1706806624.780	   145.637	0	12662	0	0	reconnect_test
Compiling fed binaries for version v0.2.1...
Using saved setting for 'extra-substituters = https://fedimint.cachix.org' from ~/.local/share/nix/trusted-settings.json.
Using saved setting for 'extra-trusted-public-keys = fedimint.cachix.org-1:FpJJjy1iPVlvyv4OMiN5y9+/arFLPcnZhZVVCHCDYTs=' from ~/.local/share/nix/trusted-settings.json.
========== Starting backwards-compatibility run ===========
fed version: v0.2.1
client version: current
gateway version: current
Pre-building workspace...
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Finished dev [unoptimized + debuginfo] target(s) in 0.38s
Pre-building tests...
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Finished test [unoptimized + debuginfo] target(s) in 1.09s
## Starting all tests in parallel...
parallel: This job failed:
lightning_reconnect_test
parallel: Starting no more jobs. Waiting for 2 jobs to finish.
Some tests failed. Full job log:
Search for '## FAILED' to find the end of the failing test
========== Finished backwards-compatibility run ===========
fed version: v0.2.1
client version: current
gateway version: current
## START: always_success_test
## COMPLETE: always_success_test
## START: lightning_reconnect_test
00:00:00     Blocking waiting for file lock on package cache
00:00:00     Blocking waiting for file lock on package cache
00:00:00     Blocking waiting for file lock on package cache
00:00:01     Finished dev [unoptimized + debuginfo] target(s) in 0.87s
00:00:01 [2m2024-02-01T16:57:31.928060Z[0m [32m INFO[0m [2mdevimint::cli[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2049180"
00:00:01 [2m2024-02-01T16:57:31.939286Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:11 [2m2024-02-01T16:57:41.450199Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1qazwqjsfjvfgsmh3hdr89u3ghqm832dga6gdtdu
00:00:16 [2m2024-02-01T16:57:46.474545Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1qazwqjsfjvfgsmh3hdr89u3ghqm832dga6gdtdu
00:00:16 [2m2024-02-01T16:57:46.477972Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:16 [2m2024-02-01T16:57:46.560611Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:16 [2m2024-02-01T16:57:46.560680Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:00:16 [2m2024-02-01T16:57:46.657912Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:16 [2m2024-02-01T16:57:46.657992Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:00:16 [2m2024-02-01T16:57:46.667799Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:16 [2m2024-02-01T16:57:46.748402Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:00:17 [2m2024-02-01T16:57:47.806826Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:17 [2m2024-02-01T16:57:47.808570Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 1
00:00:17 [2m2024-02-01T16:57:47.814269Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 2
00:00:17 [2m2024-02-01T16:57:47.820415Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 3
00:00:17 [2m2024-02-01T16:57:47.880058Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 1 random-gB2141
00:00:17 [2m2024-02-01T16:57:47.886430Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 2 random-UfWWq2
00:00:17 [2m2024-02-01T16:57:47.908754Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 3 random-Yk3iO3
00:00:17 [2m2024-02-01T16:57:47.932685Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:39 [2m2024-02-01T16:58:09.864811Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:00:40 [2m2024-02-01T16:58:10.036930Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:00:40 [2m2024-02-01T16:58:10.043642Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:00:40 [2m2024-02-01T16:58:10.049593Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:00:40 [2m2024-02-01T16:58:10.053759Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:00:40 [2m2024-02-01T16:58:10.075786Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-1 and waiting for it to exit
00:00:40 [2m2024-02-01T16:58:10.087584Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-2 and waiting for it to exit
00:00:40 [2m2024-02-01T16:58:10.105362Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-3 and waiting for it to exit
00:00:40 [2m2024-02-01T16:58:10.129200Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
00:00:40 Error: polling lnd_startup after 20 retries
00:00:40 
00:00:40 Caused by:
00:00:40     status: Unknown, message: "the RPC server is in the process of starting up, but not yet ready to accept calls", details: [], metadata: MetadataMap { headers: {"content-type": "application/grpc"} }
## FAILED: lightning_reconnect_test
## START: reconnect_test
00:00:00     Blocking waiting for file lock on package cache
00:00:00     Blocking waiting for file lock on package cache
00:00:00     Blocking waiting for file lock on package cache
00:00:00     Blocking waiting for file lock on build directory
00:00:00     Finished dev [unoptimized + debuginfo] target(s) in 0.41s
00:00:00 [2m2024-02-01T16:57:05.965153Z[0m [32m INFO[0m [2mdevimint::cli[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2036627"
00:00:00 [2m2024-02-01T16:57:05.967125Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:02 [2m2024-02-01T16:57:07.978602Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1q4th5nkxswq8r4dus4cqyq4h5zfma8gr2p90tp9
00:00:05 [2m2024-02-01T16:57:10.877173Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1q4th5nkxswq8r4dus4cqyq4h5zfma8gr2p90tp9
00:00:05 [2m2024-02-01T16:57:10.883711Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:05 [2m2024-02-01T16:57:10.919728Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:05 [2m2024-02-01T16:57:10.919806Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:06 [2m2024-02-01T16:57:11.143714Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:06 [2m2024-02-01T16:57:11.143802Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:00:06 [2m2024-02-01T16:57:11.211702Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:00:06 [2m2024-02-01T16:57:11.282760Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:00:07 [2m2024-02-01T16:57:12.312761Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:07 [2m2024-02-01T16:57:12.323758Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 1
00:00:07 [2m2024-02-01T16:57:12.332767Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 2
00:00:07 [2m2024-02-01T16:57:12.337122Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 3
00:00:07 [2m2024-02-01T16:57:12.348976Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 1 random-UTEJd1
00:00:07 [2m2024-02-01T16:57:12.352001Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 2 random-dz65T2
00:00:07 [2m2024-02-01T16:57:12.360438Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 3 random-97Npi3
00:00:07 [2m2024-02-01T16:57:12.371389Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:23 [2m2024-02-01T16:57:28.785180Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m DKG successfully complete. Starting consensus...
00:00:24 [2m2024-02-01T16:57:29.628259Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:24 [2m2024-02-01T16:57:29.628570Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:24 
00:00:24 Caused by:
00:00:24     connection closed)))} }, trying to continue...
00:00:26 [2m2024-02-01T16:57:31.255680Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m lightning started
00:00:26 [2m2024-02-01T16:57:31.647716Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:27 [2m2024-02-01T16:57:32.300061Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m block sync done
00:00:27 [2m2024-02-01T16:57:32.325428Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m100000000 [3maddr[0m[2m=[0m"bcrt1q92ne5sf3ngv9w86tgrk2n37pdg3fl62afelhy8"
00:00:27 [2m2024-02-01T16:57:32.435719Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:29 [2m2024-02-01T16:57:34.846788Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:34 [2m2024-02-01T16:57:39.312274Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Getting chan info failed [3me[0m[2m=[0mstatus: Unknown, message: "edge not found", details: [], metadata: MetadataMap { headers: {"content-type": "application/grpc"} }
00:00:35 [2m2024-02-01T16:57:40.360458Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Empty chan info [3medge[0m[2m=[0mChannelEdge { channel_id: 123145302376449, chan_point: "40c8e81cad1556914bc8f88ad2d80870fb7a82ac8a87d6dd8b9fdf491efc9199:1", last_update: 1706806659, node1_pub: "0244f72d9419661333f63323a4a1d5172d94a8cd44898a89cd6c49e171d0da840d", node2_pub: "02996f0e92061ada7017fa4beebe0ae652459a80410356a11ff596338bdb5b46bd", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1706806659 }) }
00:00:36 [2m2024-02-01T16:57:41.507708Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways started
00:00:40 [2m2024-02-01T16:57:45.151991Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:40 [2m2024-02-01T16:57:45.155778Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:40 
00:00:40 Caused by:
00:00:40     connection closed)))} }, trying to continue...
00:00:59 [2m2024-02-01T16:58:04.243834Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:01:05 [2m2024-02-01T16:58:10.290299Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Consensus is running
00:01:05 [2m2024-02-01T16:58:10.296078Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m moved client configs
00:01:05 [2m2024-02-01T16:58:10.296162Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m federation and gateways started
00:01:05 [2m2024-02-01T16:58:10.314866Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Joining federation with the main client
00:01:05 [2m2024-02-01T16:58:10.789438Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Generating first epoch
00:01:05 [2m2024-02-01T16:58:10.789473Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:01:07 [2m2024-02-01T16:58:12.047973Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m await gateways registered
00:01:07 [2m2024-02-01T16:58:12.341797Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways registered
00:01:07 [2m2024-02-01T16:58:12.341830Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m starting dev federation took 66.376519975s
00:01:07 [2m2024-02-01T16:58:12.350213Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mfedimint_cli_version[0m[2m=[0m"fedimint-cli 0.2.1"
00:01:07 [2m2024-02-01T16:58:12.372614Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mfedimint_cli_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:01:07 [2m2024-02-01T16:58:12.396503Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mgateway_cli_version[0m[2m=[0m"fedimint-gateway-cli 0.2.1"
00:01:07 [2m2024-02-01T16:58:12.411802Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mgateway_cli_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:01:07 [2m2024-02-01T16:58:12.438805Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mfedimintd_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:01:07 [2m2024-02-01T16:58:12.464781Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mgatewayd_version_hash[0m[2m=[0m"58717cb4a08ec89d000000002e96d06a7b9a9d"
00:01:07 [2m2024-02-01T16:58:12.464826Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m110
00:01:11 [2m2024-02-01T16:58:16.146249Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to fedimintd-0 and waiting for it to exit
00:01:21 [2m2024-02-01T16:58:26.827910Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m100
00:01:29 [2m2024-02-01T16:58:34.010594Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:01:29 [2m2024-02-01T16:58:34.023625Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m100
00:01:36 [2m2024-02-01T16:58:41.423088Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Server 0 successfully rejoined!
00:01:36 [2m2024-02-01T16:58:41.423123Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m100
00:01:42 [2m2024-02-01T16:58:47.697691Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to fedimintd-1 and waiting for it to exit
00:01:53 [2m2024-02-01T16:58:58.871760Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m100
00:01:58 [2m2024-02-01T16:59:03.799030Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to fedimintd-2 and waiting for it to exit
00:02:09 [2m2024-02-01T16:59:14.237673Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to fedimintd-3 and waiting for it to exit
00:02:20 [2m2024-02-01T16:59:25.211519Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:02:20 [2m2024-02-01T16:59:25.211977Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:02:20 [2m2024-02-01T16:59:25.212315Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:02:25 [2m2024-02-01T16:59:30.962303Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m fm success: reconnect-test
00:02:25 [2m2024-02-01T16:59:30.962342Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:02:25 [2m2024-02-01T16:59:30.965380Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:02:25 [2m2024-02-01T16:59:30.967203Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:02:25 [2m2024-02-01T16:59:30.981650Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-cln and waiting for it to exit
00:02:25 [2m2024-02-01T16:59:30.997899Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:02:26 [2m2024-02-01T16:59:31.009901Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-1 and waiting for it to exit
00:02:26 [2m2024-02-01T16:59:31.019675Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-2 and waiting for it to exit
00:02:26 [2m2024-02-01T16:59:31.028562Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-3 and waiting for it to exit
00:02:26 [2m2024-02-01T16:59:31.041988Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:02:26 [2m2024-02-01T16:59:31.056743Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:02:26 [2m2024-02-01T16:59:31.057673Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: reconnect_test
Seq	Host	Starttime	JobRuntime	Send	Receive	Exitval	Signal	Command
1	:	1706806600.199	     0.022	0	63	0	0	always_success_test
2	:	1706806605.247	     5.029	0	0	0	0	backend_test_bitcoind
3	:	1706806610.276	     5.047	0	0	0	0	backend_test_electrs
4	:	1706806615.324	     5.049	0	0	0	0	backend_test_esplora
5	:	1706806620.373	     5.022	0	0	0	0	latency_test
7	:	1706806650.368	    40.233	0	4419	1	0	lightning_reconnect_test
6	:	1706806625.395	   145.674	0	12309	0	0	reconnect_test
Compiling fed binaries for version v0.2.1...
Using saved setting for 'extra-substituters = https://fedimint.cachix.org' from ~/.local/share/nix/trusted-settings.json.
Using saved setting for 'extra-trusted-public-keys = fedimint.cachix.org-1:FpJJjy1iPVlvyv4OMiN5y9+/arFLPcnZhZVVCHCDYTs=' from ~/.local/share/nix/trusted-settings.json.
Compiling client binaries for version v0.2.1...
Using saved setting for 'extra-substituters = https://fedimint.cachix.org' from ~/.local/share/nix/trusted-settings.json.
Using saved setting for 'extra-trusted-public-keys = fedimint.cachix.org-1:FpJJjy1iPVlvyv4OMiN5y9+/arFLPcnZhZVVCHCDYTs=' from ~/.local/share/nix/trusted-settings.json.
Using saved setting for 'extra-substituters = https://fedimint.cachix.org' from ~/.local/share/nix/trusted-settings.json.
Using saved setting for 'extra-trusted-public-keys = fedimint.cachix.org-1:FpJJjy1iPVlvyv4OMiN5y9+/arFLPcnZhZVVCHCDYTs=' from ~/.local/share/nix/trusted-settings.json.
========== Starting backwards-compatibility run ===========
fed version: v0.2.1
client version: v0.2.1
gateway version: current
Pre-building workspace...
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on build directory
    Finished dev [unoptimized + debuginfo] target(s) in 1.23s
Pre-building tests...
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on build directory
    Finished test [unoptimized + debuginfo] target(s) in 0.54s
## Starting all tests in parallel...
parallel: This job failed:
lightning_reconnect_test
parallel: Starting no more jobs. Waiting for 1 jobs to finish.
Some tests failed. Full job log:
Search for '## FAILED' to find the end of the failing test
========== Finished backwards-compatibility run ===========
fed version: v0.2.1
client version: v0.2.1
gateway version: current
## START: always_success_test
## COMPLETE: always_success_test
## START: lightning_reconnect_test
00:00:01     Blocking waiting for file lock on package cache
00:00:01     Blocking waiting for file lock on package cache
00:00:07     Finished dev [unoptimized + debuginfo] target(s) in 6.48s
00:00:09 [2m2024-02-01T16:57:18.853407Z[0m [32m INFO[0m [2mdevimint::cli[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2041271"
00:00:09 [2m2024-02-01T16:57:18.887942Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:10 [2m2024-02-01T16:57:19.889920Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: RPC error response: RpcError { code: -28, message: "Verifying blocks…", data: None }
00:00:17 [2m2024-02-01T16:57:26.451385Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1qnyt4nvxua6hauc9fnd0sugrp96wxf54pe9rafj
00:00:22 [2m2024-02-01T16:57:31.115599Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1qnyt4nvxua6hauc9fnd0sugrp96wxf54pe9rafj
00:00:22 [2m2024-02-01T16:57:31.116303Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:22 [2m2024-02-01T16:57:31.119943Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:22 [2m2024-02-01T16:57:31.119985Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:22 [2m2024-02-01T16:57:31.127221Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:22 [2m2024-02-01T16:57:31.127282Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:00:22 [2m2024-02-01T16:57:31.134953Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:00:22 [2m2024-02-01T16:57:31.135869Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:00:23 [2m2024-02-01T16:57:32.154399Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:23 [2m2024-02-01T16:57:32.158509Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 1
00:00:23 [2m2024-02-01T16:57:32.159834Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 2
00:00:23 [2m2024-02-01T16:57:32.164668Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 3
00:00:23 [2m2024-02-01T16:57:32.174710Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 1 random-V2j2n1
00:00:23 [2m2024-02-01T16:57:32.186466Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 2 random-VbuXW2
00:00:23 [2m2024-02-01T16:57:32.193730Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 3 random-dzBIG3
00:00:23 [2m2024-02-01T16:57:32.213808Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:44 [2m2024-02-01T16:57:53.363363Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:00:44 [2m2024-02-01T16:57:53.981048Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:00:44 [2m2024-02-01T16:57:53.989972Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:00:45 [2m2024-02-01T16:57:54.004000Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:00:45 [2m2024-02-01T16:57:54.017991Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:00:45 [2m2024-02-01T16:57:54.257389Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-1 and waiting for it to exit
00:00:45 [2m2024-02-01T16:57:54.536280Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-2 and waiting for it to exit
00:00:45 [2m2024-02-01T16:57:54.595163Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-3 and waiting for it to exit
00:00:45 [2m2024-02-01T16:57:54.722911Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
00:00:45 Error: polling lnd_startup after 20 retries
00:00:45 
00:00:45 Caused by:
00:00:45     status: Unknown, message: "the RPC server is in the process of starting up, but not yet ready to accept calls", details: [], metadata: MetadataMap { headers: {"content-type": "application/grpc"} }
## FAILED: lightning_reconnect_test
## START: gateway_reboot_test
00:00:00     Blocking waiting for file lock on package cache
00:00:00     Blocking waiting for file lock on package cache
00:00:00     Blocking waiting for file lock on package cache
00:00:01     Blocking waiting for file lock on package cache
00:00:01     Blocking waiting for file lock on build directory
00:00:01     Finished dev [unoptimized + debuginfo] target(s) in 1.30s
00:00:02 [2m2024-02-01T16:57:32.826683Z[0m [32m INFO[0m [2mdevimint::cli[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2049763"
00:00:02 [2m2024-02-01T16:57:32.843881Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:13 [2m2024-02-01T16:57:43.333096Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1qzmwlyrpvv4sl3j9yzj5q498nc7cqnc4574dwcw
00:00:18 [2m2024-02-01T16:57:48.337715Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1qzmwlyrpvv4sl3j9yzj5q498nc7cqnc4574dwcw
00:00:18 [2m2024-02-01T16:57:48.338681Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:18 [2m2024-02-01T16:57:48.387552Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:18 [2m2024-02-01T16:57:48.387649Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:00:18 [2m2024-02-01T16:57:48.645124Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:18 [2m2024-02-01T16:57:48.645208Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:18 [2m2024-02-01T16:57:48.752086Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:00:18 [2m2024-02-01T16:57:48.780533Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:00:19 [2m2024-02-01T16:57:49.803490Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:19 [2m2024-02-01T16:57:49.805744Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 1
00:00:19 [2m2024-02-01T16:57:49.817007Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 2
00:00:19 [2m2024-02-01T16:57:49.848303Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 3
00:00:19 [2m2024-02-01T16:57:49.865132Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 1 random-oTIOB1
00:00:19 [2m2024-02-01T16:57:49.930138Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 2 random-yADTJ2
00:00:19 [2m2024-02-01T16:57:49.950290Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 3 random-1qEUw3
00:00:20 [2m2024-02-01T16:57:50.058703Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:40 [2m2024-02-01T16:58:10.352176Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m DKG successfully complete. Starting consensus...
00:00:40 [2m2024-02-01T16:58:10.359339Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:41 [2m2024-02-01T16:58:11.857790Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:00:41 [2m2024-02-01T16:58:11.925644Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:00:41 [2m2024-02-01T16:58:11.931377Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:00:41 [2m2024-02-01T16:58:11.935254Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:00:41 [2m2024-02-01T16:58:11.942279Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:00:41 [2m2024-02-01T16:58:11.952977Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-1 and waiting for it to exit
00:00:41 [2m2024-02-01T16:58:11.972153Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-2 and waiting for it to exit
00:00:41 [2m2024-02-01T16:58:11.987169Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-3 and waiting for it to exit
00:00:42 [2m2024-02-01T16:58:12.007946Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
00:00:42 Error: polling lnd_startup after 20 retries
00:00:42 
00:00:42 Caused by:
00:00:42     status: Unknown, message: "the RPC server is in the process of starting up, but not yet ready to accept calls", details: [], metadata: MetadataMap { headers: {"content-type": "application/grpc"} }
## FAILED: gateway_reboot_test
## START: reconnect_test
00:00:00     Blocking waiting for file lock on package cache
00:00:00     Blocking waiting for file lock on package cache
00:00:00     Blocking waiting for file lock on package cache
00:00:01     Blocking waiting for file lock on package cache
00:00:01     Blocking waiting for file lock on build directory
00:00:01     Finished dev [unoptimized + debuginfo] target(s) in 0.51s
00:00:01 [2m2024-02-01T16:57:05.391217Z[0m [32m INFO[0m [2mdevimint::cli[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2036182"
00:00:01 [2m2024-02-01T16:57:05.393328Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:03 [2m2024-02-01T16:57:07.012480Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1qjq42uhgq674tflakpzkp5verl80j3t73nnnlcr
00:00:05 [2m2024-02-01T16:57:09.037863Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1qjq42uhgq674tflakpzkp5verl80j3t73nnnlcr
00:00:05 [2m2024-02-01T16:57:09.038497Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:05 [2m2024-02-01T16:57:09.040942Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:05 [2m2024-02-01T16:57:09.040976Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:00:05 [2m2024-02-01T16:57:09.046642Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:05 [2m2024-02-01T16:57:09.046728Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:00:05 [2m2024-02-01T16:57:09.050719Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:05 [2m2024-02-01T16:57:09.051658Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:00:06 [2m2024-02-01T16:57:10.058059Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:06 [2m2024-02-01T16:57:10.059731Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 1
00:00:06 [2m2024-02-01T16:57:10.061661Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 2
00:00:06 [2m2024-02-01T16:57:10.069147Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 3
00:00:06 [2m2024-02-01T16:57:10.168188Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 1 random-d5bQM1
00:00:06 [2m2024-02-01T16:57:10.191290Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 2 random-6ZoTK2
00:00:06 [2m2024-02-01T16:57:10.200196Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 3 random-06duu3
00:00:06 [2m2024-02-01T16:57:10.275710Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:23 [2m2024-02-01T16:57:27.686137Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m DKG successfully complete. Starting consensus...
00:00:23 [2m2024-02-01T16:57:27.699714Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: i/o error: Connection reset by peer (os error 104)
00:00:25 [2m2024-02-01T16:57:29.332883Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m lightning started
00:00:25 [2m2024-02-01T16:57:29.739967Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: i/o error: Transport endpoint is not connected (os error 107)
00:00:25 [2m2024-02-01T16:57:29.740351Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: i/o error: Transport endpoint is not connected (os error 107); restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: i/o error: Transport endpoint is not connected (os error 107)
00:00:25 
00:00:25 Caused by:
00:00:25     0: i/o error: Transport endpoint is not connected (os error 107)
00:00:25     1: Transport endpoint is not connected (os error 107))))} }, trying to continue...
00:00:26 [2m2024-02-01T16:57:30.364199Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m block sync done
00:00:26 [2m2024-02-01T16:57:30.383979Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m100000000 [3maddr[0m[2m=[0m"bcrt1qm35cfnyd7d9k6c08fnkq8xkxr5rv5r4ahnpmwk"
00:00:26 [2m2024-02-01T16:57:30.439736Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:27 [2m2024-02-01T16:57:31.807345Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:27 [2m2024-02-01T16:57:31.807770Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:27 
00:00:27 Caused by:
00:00:27     connection closed)))} }, trying to continue...
00:00:28 [2m2024-02-01T16:57:32.059595Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:30 [2m2024-02-01T16:57:34.580334Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Empty chan info [3medge[0m[2m=[0mChannelEdge { channel_id: 123145302376448, chan_point: "5d816931a5f1a089be7c3c92cf655f618038e92b5429899db9926a8393d961e9:0", last_update: 1706806654, node1_pub: "038e5494b09b65752f6b6986893551fc34fab8b2bd263ce6005fd97f9c0b2883e9", node2_pub: "03f940db228d4ee9024692e801ff70b0724febd0fede5308e428b811c216c8f69c", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1706806654 }) }
00:00:31 [2m2024-02-01T16:57:35.644828Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Empty chan info [3medge[0m[2m=[0mChannelEdge { channel_id: 123145302376448, chan_point: "5d816931a5f1a089be7c3c92cf655f618038e92b5429899db9926a8393d961e9:0", last_update: 1706806654, node1_pub: "038e5494b09b65752f6b6986893551fc34fab8b2bd263ce6005fd97f9c0b2883e9", node2_pub: "03f940db228d4ee9024692e801ff70b0724febd0fede5308e428b811c216c8f69c", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1706806654 }) }
00:00:32 [2m2024-02-01T16:57:36.759803Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways started
00:00:35 [2m2024-02-01T16:57:39.943710Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: i/o error: Connection reset by peer (os error 104)
00:00:46 [2m2024-02-01T16:57:50.074011Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Consensus is running
00:00:46 [2m2024-02-01T16:57:50.108860Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m moved client configs
00:00:46 [2m2024-02-01T16:57:50.108935Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m federation and gateways started
00:00:46 [2m2024-02-01T16:57:50.172779Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Joining federation with the main client
00:00:50 [2m2024-02-01T16:57:54.249484Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Generating first epoch
00:00:50 [2m2024-02-01T16:57:54.249516Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:55 [2m2024-02-01T16:57:59.582995Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m await gateways registered
00:00:58 [2m2024-02-01T16:58:02.483756Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways registered
00:00:58 [2m2024-02-01T16:58:02.483788Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m starting dev federation took 57.092500191s
00:00:58 [2m2024-02-01T16:58:02.546822Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mfedimint_cli_version[0m[2m=[0m"fedimint-cli 0.3.0-alpha"
00:00:58 [2m2024-02-01T16:58:02.599384Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mfedimint_cli_version_hash[0m[2m=[0m"58717cb4a08ec89d000000002e96d06a7b9a9d"
00:00:58 [2m2024-02-01T16:58:02.640767Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mgateway_cli_version[0m[2m=[0m"fedimint-gateway-cli 0.3.0-alpha"
00:00:58 [2m2024-02-01T16:58:02.664021Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mgateway_cli_version_hash[0m[2m=[0m"58717cb4a08ec89d000000002e96d06a7b9a9d"
00:00:58 [2m2024-02-01T16:58:02.748786Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mfedimintd_version_hash[0m[2m=[0m"58717cb4a08ec89d000000002e96d06a7b9a9d"
00:00:58 [2m2024-02-01T16:58:02.837043Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mgatewayd_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:00:58 [2m2024-02-01T16:58:02.837078Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m110
00:01:06 [2m2024-02-01T16:58:10.337503Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to fedimintd-0 and waiting for it to exit
00:01:21 [2m2024-02-01T16:58:25.399782Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m100
00:01:27 [2m2024-02-01T16:58:31.526938Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:01:27 [2m2024-02-01T16:58:31.537430Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m100
00:01:34 [2m2024-02-01T16:58:38.916967Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Server 0 successfully rejoined!
00:01:34 [2m2024-02-01T16:58:38.916999Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m100
00:01:41 [2m2024-02-01T16:58:45.957589Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to fedimintd-1 and waiting for it to exit
00:01:56 [2m2024-02-01T16:59:00.484116Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m100
00:02:00 [2m2024-02-01T16:59:04.808789Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to fedimintd-2 and waiting for it to exit
00:02:14 [2m2024-02-01T16:59:18.200439Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to fedimintd-3 and waiting for it to exit
00:02:28 [2m2024-02-01T16:59:32.178346Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:02:28 [2m2024-02-01T16:59:32.178771Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:02:28 [2m2024-02-01T16:59:32.179041Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:02:31 [2m2024-02-01T16:59:35.818409Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m fm success: reconnect-test
00:02:31 [2m2024-02-01T16:59:35.818450Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:02:31 [2m2024-02-01T16:59:35.821840Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:02:31 [2m2024-02-01T16:59:35.825212Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:02:31 [2m2024-02-01T16:59:35.836543Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-cln and waiting for it to exit
00:02:31 [2m2024-02-01T16:59:35.847829Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:02:31 [2m2024-02-01T16:59:35.855772Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-1 and waiting for it to exit
00:02:31 [2m2024-02-01T16:59:35.863539Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-2 and waiting for it to exit
00:02:31 [2m2024-02-01T16:59:35.871780Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-3 and waiting for it to exit
00:02:31 [2m2024-02-01T16:59:35.880622Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:02:31 [2m2024-02-01T16:59:35.891000Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:02:31 [2m2024-02-01T16:59:35.892063Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: reconnect_test
Seq	Host	Starttime	JobRuntime	Send	Receive	Exitval	Signal	Command
1	:	1706806599.586	     0.022	0	63	0	0	always_success_test
2	:	1706806604.607	     5.037	0	0	0	0	backend_test_bitcoind
3	:	1706806609.645	     5.048	0	0	0	0	backend_test_electrs
4	:	1706806614.693	     5.047	0	0	0	0	backend_test_esplora
5	:	1706806619.741	     5.045	0	0	0	0	latency_test
7	:	1706806629.861	    45.231	0	4584	1	0	lightning_reconnect_test
8	:	1706806650.375	    41.677	0	4884	1	0	gateway_reboot_test
6	:	1706806624.786	   151.114	0	13098	0	0	reconnect_test
Compiling gateway binaries for version v0.2.1...
Using saved setting for 'extra-substituters = https://fedimint.cachix.org' from ~/.local/share/nix/trusted-settings.json.
Using saved setting for 'extra-trusted-public-keys = fedimint.cachix.org-1:FpJJjy1iPVlvyv4OMiN5y9+/arFLPcnZhZVVCHCDYTs=' from ~/.local/share/nix/trusted-settings.json.
========== Starting backwards-compatibility run ===========
fed version: current
client version: current
gateway version: v0.2.1
Pre-building workspace...
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Finished dev [unoptimized + debuginfo] target(s) in 0.47s
Pre-building tests...
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Finished test [unoptimized + debuginfo] target(s) in 0.93s
## Starting all tests in parallel...
parallel: This job failed:
lightning_reconnect_test
parallel: Starting no more jobs. Waiting for 2 jobs to finish.
parallel: This job failed:
gateway_reboot_test
parallel: Starting no more jobs. Waiting for 1 jobs to finish.
Some tests failed. Full job log:
Search for '## FAILED' to find the end of the failing test
========== Finished backwards-compatibility run ===========
fed version: current
client version: current
gateway version: v0.2.1
## START: always_success_test
## COMPLETE: always_success_test
## START: lightning_reconnect_test
00:00:00     Blocking waiting for file lock on package cache
00:00:01     Blocking waiting for file lock on package cache
00:00:05     Blocking waiting for file lock on package cache
00:00:11     Blocking waiting for file lock on build directory
00:00:13     Finished dev [unoptimized + debuginfo] target(s) in 13.55s
00:00:15 [2m2024-02-01T16:57:25.466537Z[0m [32m INFO[0m [2mdevimint::cli[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2044597"
00:00:15 [2m2024-02-01T16:57:25.483726Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:19 [2m2024-02-01T16:57:29.645892Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1qlflhgz0nc0tcmwqdkwqsf0unhv8mx8nlttgfs2
00:00:24 [2m2024-02-01T16:57:34.312410Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1qlflhgz0nc0tcmwqdkwqsf0unhv8mx8nlttgfs2
00:00:24 [2m2024-02-01T16:57:34.322619Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:24 [2m2024-02-01T16:57:34.392633Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:24 [2m2024-02-01T16:57:34.392700Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:24 [2m2024-02-01T16:57:34.491710Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:24 [2m2024-02-01T16:57:34.491801Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:00:24 [2m2024-02-01T16:57:34.544002Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:00:24 [2m2024-02-01T16:57:34.597196Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:00:25 [2m2024-02-01T16:57:35.667069Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:25 [2m2024-02-01T16:57:35.676676Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 1
00:00:26 [2m2024-02-01T16:57:36.689459Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 2
00:00:26 [2m2024-02-01T16:57:36.692704Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 3
00:00:26 [2m2024-02-01T16:57:36.749093Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 1 random-kzf661
00:00:26 [2m2024-02-01T16:57:36.772803Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 2 random-DmXS92
00:00:26 [2m2024-02-01T16:57:36.778793Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 3 random-zBGIc3
00:00:26 [2m2024-02-01T16:57:36.817286Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:47 [2m2024-02-01T16:57:57.852435Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:00:48 [2m2024-02-01T16:57:58.469677Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:00:48 [2m2024-02-01T16:57:58.472482Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:00:48 [2m2024-02-01T16:57:58.474683Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:00:48 [2m2024-02-01T16:57:58.478908Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:00:48 [2m2024-02-01T16:57:58.519481Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-1 and waiting for it to exit
00:00:48 [2m2024-02-01T16:57:58.663340Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-2 and waiting for it to exit
00:00:48 [2m2024-02-01T16:57:58.827777Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-3 and waiting for it to exit
00:00:48 [2m2024-02-01T16:57:58.907771Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
00:00:49 Error: polling lnd_startup after 20 retries
00:00:49 
00:00:49 Caused by:
00:00:49     status: Unknown, message: "the RPC server is in the process of starting up, but not yet ready to accept calls", details: [], metadata: MetadataMap { headers: {"content-type": "application/grpc"} }
## FAILED: lightning_reconnect_test
## START: gateway_reboot_test
00:00:00     Finished dev [unoptimized + debuginfo] target(s) in 0.57s
00:00:01 [2m2024-02-01T16:57:30.369192Z[0m [32m INFO[0m [2mdevimint::cli[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2047862"
00:00:01 [2m2024-02-01T16:57:30.383885Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:04 [2m2024-02-01T16:57:33.936640Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1qcz7s5gf6h6th04wedzzcy0e844r6arcttwp7cw
00:00:11 [2m2024-02-01T16:57:40.111954Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1qcz7s5gf6h6th04wedzzcy0e844r6arcttwp7cw
00:00:11 [2m2024-02-01T16:57:40.113718Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:11 [2m2024-02-01T16:57:40.155685Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:11 [2m2024-02-01T16:57:40.155757Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:00:11 [2m2024-02-01T16:57:40.459689Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:11 [2m2024-02-01T16:57:40.523802Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:00:11 [2m2024-02-01T16:57:40.648862Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:00:11 [2m2024-02-01T16:57:40.715812Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:13 [2m2024-02-01T16:57:42.739656Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:13 [2m2024-02-01T16:57:42.741109Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 1
00:00:13 [2m2024-02-01T16:57:42.745669Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 2
00:00:13 [2m2024-02-01T16:57:42.760246Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 3
00:00:13 [2m2024-02-01T16:57:42.889104Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 1 random-QVSUp1
00:00:13 [2m2024-02-01T16:57:42.900972Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 2 random-mtZs92
00:00:13 [2m2024-02-01T16:57:42.921953Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 3 random-8ZmcY3
00:00:14 [2m2024-02-01T16:57:43.166414Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:34 [2m2024-02-01T16:58:03.476534Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:00:34 [2m2024-02-01T16:58:03.955766Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:00:34 [2m2024-02-01T16:58:03.957087Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:00:34 [2m2024-02-01T16:58:03.961889Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:00:34 [2m2024-02-01T16:58:03.967987Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:00:35 [2m2024-02-01T16:58:04.026091Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-1 and waiting for it to exit
00:00:35 [2m2024-02-01T16:58:04.132104Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-2 and waiting for it to exit
00:00:35 [2m2024-02-01T16:58:04.235263Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-3 and waiting for it to exit
00:00:35 [2m2024-02-01T16:58:04.367844Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
00:00:35 Error: polling lnd_startup after 20 retries
00:00:35 
00:00:35 Caused by:
00:00:35     status: Unknown, message: "the RPC server is in the process of starting up, but not yet ready to accept calls", details: [], metadata: MetadataMap { headers: {"content-type": "application/grpc"} }
## FAILED: gateway_reboot_test
## START: reconnect_test
00:00:00     Blocking waiting for file lock on package cache
00:00:00     Blocking waiting for file lock on package cache
00:00:00     Blocking waiting for file lock on package cache
00:00:00     Blocking waiting for file lock on package cache
00:00:00     Finished dev [unoptimized + debuginfo] target(s) in 0.51s
00:00:00 [2m2024-02-01T16:57:05.616509Z[0m [32m INFO[0m [2mdevimint::cli[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2036393"
00:00:00 [2m2024-02-01T16:57:05.618526Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:02 [2m2024-02-01T16:57:07.400770Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1qk4myf30r4aha0eeuwdpya5xrduugkddjr4ck9t
00:00:04 [2m2024-02-01T16:57:09.613700Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1qk4myf30r4aha0eeuwdpya5xrduugkddjr4ck9t
00:00:04 [2m2024-02-01T16:57:09.614290Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:04 [2m2024-02-01T16:57:09.616756Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:04 [2m2024-02-01T16:57:09.617589Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:04 [2m2024-02-01T16:57:09.623352Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:04 [2m2024-02-01T16:57:09.625183Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:00:04 [2m2024-02-01T16:57:09.628176Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:00:04 [2m2024-02-01T16:57:09.628697Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:00:05 [2m2024-02-01T16:57:10.646156Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:05 [2m2024-02-01T16:57:10.648015Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 1
00:00:05 [2m2024-02-01T16:57:10.650021Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 2
00:00:05 [2m2024-02-01T16:57:10.652590Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 3
00:00:05 [2m2024-02-01T16:57:10.744001Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 1 random-JQ5qT1
00:00:05 [2m2024-02-01T16:57:10.770741Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 2 random-rE5uR2
00:00:05 [2m2024-02-01T16:57:10.777507Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 3 random-nk9Sm3
00:00:05 [2m2024-02-01T16:57:10.906899Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:23 [2m2024-02-01T16:57:28.044169Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m DKG successfully complete. Starting consensus...
00:00:23 [2m2024-02-01T16:57:28.060920Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:24 [2m2024-02-01T16:57:29.825648Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m lightning started
00:00:25 [2m2024-02-01T16:57:30.085000Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:25 [2m2024-02-01T16:57:30.863196Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m block sync done
00:00:25 [2m2024-02-01T16:57:30.885962Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m100000000 [3maddr[0m[2m=[0m"bcrt1q3mylass4skxw6vlpvcyap7y3s6elale4g0kzf2"
00:00:25 [2m2024-02-01T16:57:30.955210Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:26 [2m2024-02-01T16:57:31.346061Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:26 [2m2024-02-01T16:57:31.346506Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:26 
00:00:26 Caused by:
00:00:26     connection closed)))} }, trying to continue...
00:00:26 [2m2024-02-01T16:57:31.705673Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:28 [2m2024-02-01T16:57:33.400317Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:28 [2m2024-02-01T16:57:33.400638Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:28 
00:00:28 Caused by:
00:00:28     connection closed)))} }, trying to continue...
00:00:30 [2m2024-02-01T16:57:35.052431Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Empty chan info [3medge[0m[2m=[0mChannelEdge { channel_id: 123145302376449, chan_point: "a9da84ad757d380038061ab86dd689863c2f3263b40b6c486a757e930176f797:1", last_update: 1706806654, node1_pub: "02a40080cbeb3d10ea45454673637b125ae44594ed4b8a863f5c741d67859720c9", node2_pub: "02c74cdb52e9f12d77efbfd5d7c8d7d37a08453bbfe6fd558cd2e570520fa4e7ff", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1706806654 }) }
00:00:31 [2m2024-02-01T16:57:36.098417Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Empty chan info [3medge[0m[2m=[0mChannelEdge { channel_id: 123145302376449, chan_point: "a9da84ad757d380038061ab86dd689863c2f3263b40b6c486a757e930176f797:1", last_update: 1706806654, node1_pub: "02a40080cbeb3d10ea45454673637b125ae44594ed4b8a863f5c741d67859720c9", node2_pub: "02c74cdb52e9f12d77efbfd5d7c8d7d37a08453bbfe6fd558cd2e570520fa4e7ff", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1706806654 }) }
00:00:32 [2m2024-02-01T16:57:37.222757Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways started
00:00:39 [2m2024-02-01T16:57:44.446786Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Consensus is running
00:00:39 [2m2024-02-01T16:57:44.448087Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m moved client configs
00:00:39 [2m2024-02-01T16:57:44.448131Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m federation and gateways started
00:00:39 [2m2024-02-01T16:57:44.455448Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Joining federation with the main client
00:00:40 [2m2024-02-01T16:57:45.575763Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Generating first epoch
00:00:40 [2m2024-02-01T16:57:45.575802Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:44 [2m2024-02-01T16:57:49.015950Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m await gateways registered
00:00:47 [2m2024-02-01T16:57:52.056637Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways registered
00:00:47 [2m2024-02-01T16:57:52.056671Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m starting dev federation took 46.440090394s
00:00:47 [2m2024-02-01T16:57:52.119293Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mfedimint_cli_version[0m[2m=[0m"fedimint-cli 0.2.1"
00:00:47 [2m2024-02-01T16:57:52.256831Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mfedimint_cli_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:00:47 [2m2024-02-01T16:57:52.288048Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mgateway_cli_version[0m[2m=[0m"fedimint-gateway-cli 0.2.1"
00:00:47 [2m2024-02-01T16:57:52.463741Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mgateway_cli_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:00:47 [2m2024-02-01T16:57:52.605246Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mfedimintd_version_hash[0m[2m=[0m"58717cb4a08ec89d000000002e96d06a7b9a9d"
00:00:47 [2m2024-02-01T16:57:52.795773Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mgatewayd_version_hash[0m[2m=[0m"58717cb4a08ec89d000000002e96d06a7b9a9d"
00:00:47 [2m2024-02-01T16:57:52.795816Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m110
00:01:00 [2m2024-02-01T16:58:05.663825Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to fedimintd-0 and waiting for it to exit
00:01:15 [2m2024-02-01T16:58:20.438759Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m100
00:01:20 [2m2024-02-01T16:58:25.279257Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:01:20 [2m2024-02-01T16:58:25.279776Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m100
00:01:27 [2m2024-02-01T16:58:32.087923Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Server 0 successfully rejoined!
00:01:27 [2m2024-02-01T16:58:32.087959Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m100
00:01:34 [2m2024-02-01T16:58:39.610409Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to fedimintd-1 and waiting for it to exit
00:01:49 [2m2024-02-01T16:58:54.884425Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m100
00:01:53 [2m2024-02-01T16:58:58.718376Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to fedimintd-2 and waiting for it to exit
00:02:07 [2m2024-02-01T16:59:12.070645Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to fedimintd-3 and waiting for it to exit
00:02:20 [2m2024-02-01T16:59:25.723154Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:02:20 [2m2024-02-01T16:59:25.723651Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:02:20 [2m2024-02-01T16:59:25.723982Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:02:24 [2m2024-02-01T16:59:29.506242Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m fm success: reconnect-test
00:02:24 [2m2024-02-01T16:59:29.506286Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:02:24 [2m2024-02-01T16:59:29.509587Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:02:24 [2m2024-02-01T16:59:29.517404Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:02:24 [2m2024-02-01T16:59:29.549379Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-cln and waiting for it to exit
00:02:24 [2m2024-02-01T16:59:29.575367Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:02:24 [2m2024-02-01T16:59:29.590918Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-1 and waiting for it to exit
00:02:24 [2m2024-02-01T16:59:29.605957Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-2 and waiting for it to exit
00:02:24 [2m2024-02-01T16:59:29.620181Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-3 and waiting for it to exit
00:02:24 [2m2024-02-01T16:59:29.634063Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:02:24 [2m2024-02-01T16:59:29.648741Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:02:24 [2m2024-02-01T16:59:29.649889Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: reconnect_test
## START: devimint_cli_test
00:00:07     Finished dev [unoptimized + debuginfo] target(s) in 6.69s
00:00:11 [2m2024-02-01T16:57:45.310976Z[0m [32m INFO[0m [2mdevimint::cli[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2054670"
00:00:11 [2m2024-02-01T16:57:45.376669Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:19 [2m2024-02-01T16:57:53.879814Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1qj0k35dld2p8x03m5x6m7q3sc86fv7htj03sdjg
00:00:25 [2m2024-02-01T16:57:59.213386Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1qj0k35dld2p8x03m5x6m7q3sc86fv7htj03sdjg
00:00:25 [2m2024-02-01T16:57:59.252421Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:25 [2m2024-02-01T16:57:59.299710Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:25 [2m2024-02-01T16:57:59.299784Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:25 [2m2024-02-01T16:57:59.491723Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:25 [2m2024-02-01T16:57:59.491810Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:00:25 [2m2024-02-01T16:57:59.496036Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:00:25 [2m2024-02-01T16:57:59.507784Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:00:26 [2m2024-02-01T16:58:00.536711Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:26 [2m2024-02-01T16:58:00.538214Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 1
00:00:26 [2m2024-02-01T16:58:00.539677Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 2
00:00:26 [2m2024-02-01T16:58:00.544935Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 3
00:00:26 [2m2024-02-01T16:58:00.616144Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 1 random-I478A1
00:00:26 [2m2024-02-01T16:58:00.682644Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 2 random-Mdwua2
00:00:26 [2m2024-02-01T16:58:00.721181Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 3 random-7vcUU3
00:00:26 [2m2024-02-01T16:58:00.845851Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:37 [2m2024-02-01T16:58:11.267053Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m DKG successfully complete. Starting consensus...
00:00:37 [2m2024-02-01T16:58:11.279420Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: i/o error: Transport endpoint is not connected (os error 107)
00:00:39 [2m2024-02-01T16:58:13.296143Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: i/o error: Transport endpoint is not connected (os error 107)
00:00:39 [2m2024-02-01T16:58:13.649426Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m lightning started
00:00:40 [2m2024-02-01T16:58:14.306394Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: i/o error: Transport endpoint is not connected (os error 107)
00:00:40 [2m2024-02-01T16:58:14.668172Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m block sync done
00:00:40 [2m2024-02-01T16:58:14.690448Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m100000000 [3maddr[0m[2m=[0m"bcrt1qk9hv8a5kuqkgql055ww7xv0lkltfdeylw8pp9c"
00:00:40 [2m2024-02-01T16:58:14.737879Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:41 [2m2024-02-01T16:58:15.316114Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: i/o error: Connection reset by peer (os error 104)
00:00:42 [2m2024-02-01T16:58:16.132007Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:42 [2m2024-02-01T16:58:16.320215Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Consensus is running
00:00:42 [2m2024-02-01T16:58:16.323706Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m moved client configs
00:00:43 [2m2024-02-01T16:58:17.284385Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Getting chan info failed [3me[0m[2m=[0mstatus: Unknown, message: "edge not found", details: [], metadata: MetadataMap { headers: {"content-type": "application/grpc"} }
00:00:44 [2m2024-02-01T16:58:18.286993Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Empty chan info [3medge[0m[2m=[0mChannelEdge { channel_id: 123145302376448, chan_point: "57c10c4cebc3342158de4a166b0d5efc27f974b0f2a6cbe4635e964c841854e6:0", last_update: 1706806697, node1_pub: "0309305c68b217e12e009c3f9b6198ec13598b1db96020e081440c4d4380c1d10d", node2_pub: "0375f11e2c88a84097756e25b09bf646ea757d0158833c0a8fdc289c0ff001afa5", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1706806697 }) }
00:00:45 [2m2024-02-01T16:58:19.408282Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways started
00:00:45 [2m2024-02-01T16:58:19.408320Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m federation and gateways started
00:00:45 [2m2024-02-01T16:58:19.445316Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Joining federation with the main client
00:00:46 [2m2024-02-01T16:58:20.429343Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Generating first epoch
00:00:46 [2m2024-02-01T16:58:20.429377Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:47 [2m2024-02-01T16:58:21.562385Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m await gateways registered
00:00:47 [2m2024-02-01T16:58:21.900878Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways registered
00:00:47 [2m2024-02-01T16:58:21.900913Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m starting dev federation took 36.589837485s
00:00:47 [2m2024-02-01T16:58:21.928911Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mfedimint_cli_version[0m[2m=[0m"fedimint-cli 0.2.1"
00:00:47 [2m2024-02-01T16:58:21.940810Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mfedimint_cli_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:00:47 [2m2024-02-01T16:58:21.946927Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mgateway_cli_version[0m[2m=[0m"fedimint-gateway-cli 0.2.1"
00:00:47 [2m2024-02-01T16:58:21.952609Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mgateway_cli_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:00:47 [2m2024-02-01T16:58:21.965518Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mfedimintd_version_hash[0m[2m=[0m"58717cb4a08ec89d000000002e96d06a7b9a9d"
00:00:47 [2m2024-02-01T16:58:21.989160Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mgatewayd_version_hash[0m[2m=[0m"58717cb4a08ec89d000000002e96d06a7b9a9d"
00:00:48 [2m2024-02-01T16:58:22.577210Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Using cln gateway
00:00:48 [2m2024-02-01T16:58:22.655219Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Pegging-in gateway funds [3mamount[0m[2m=[0m10000000
00:00:48 [2m2024-02-01T16:58:22.707279Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m10000000 [3maddr[0m[2m=[0m"bcrt1qez2jmwe4ddvgec98jjntfw0exrl0kwra7d9xq4wa0ttl2xg54qcqsclrrw"
00:00:48 [2m2024-02-01T16:58:22.740790Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m21
00:01:00 [2m2024-02-01T16:58:34.304140Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing LND can pay CLN directly
00:01:00 [2m2024-02-01T16:58:34.929793Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing CLN can pay LND directly
00:01:02 [2m2024-02-01T16:58:36.242452Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing generated descriptor for 4 guardian federation
00:01:02 [2m2024-02-01T16:58:36.242517Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing Client
00:01:02 [2m2024-02-01T16:58:36.242525Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing reissuing e-cash
00:01:02 [2m2024-02-01T16:58:36.551524Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Pegging-in client funds [3mamount[0m[2m=[0m5000000
00:01:03 [2m2024-02-01T16:58:37.022854Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m5000000 [3maddr[0m[2m=[0m"bcrt1q94gdm23hlzfspdzhlw4c43qpfd25r67t770ppt5n5lzamv3amuyqul5xsh"
00:01:03 [2m2024-02-01T16:58:37.115165Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m21
00:01:13 [2m2024-02-01T16:58:47.316889Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing backup&restore
00:05:15 [2m2024-02-01T17:02:49.634121Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing spending from client
00:05:17 [2m2024-02-01T17:02:51.813560Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing reissuing e-cash after spending
00:05:19 [2m2024-02-01T17:02:53.997491Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing reissuing e-cash via module commands
00:05:21 [2m2024-02-01T17:02:55.705895Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing fedimint-cli pays LND HOLD invoice via CLN gateway
00:05:21 [2m2024-02-01T17:02:55.880663Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Using cln gateway
00:05:23 [2m2024-02-01T17:02:57.435362Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing fedimint-cli pays LND via CLN gateway
00:05:23 [2m2024-02-01T17:02:57.611155Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Using cln gateway
00:05:31 [2m2024-02-01T17:03:05.708834Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing receiving e-cash notes
00:05:33 [2m2024-02-01T17:03:07.675866Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing LND gateway
00:05:33 [2m2024-02-01T17:03:07.963489Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Using lnd gateway
00:05:33 [2m2024-02-01T17:03:07.963525Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing outgoing payment from client to CLN via LND gateway
00:05:37 [2m2024-02-01T17:03:11.991717Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing incoming payment from CLN to client via LND gateway
00:05:41 [2m2024-02-01T17:03:15.734182Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing receiving ecash notes
00:05:43 [2m2024-02-01T17:03:17.585240Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Will finish the payment of the LND HOLD invoice via CLN gateway
00:05:43 [2m2024-02-01T17:03:17.978584Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing client deposit
00:05:44 [2m2024-02-01T17:03:18.132468Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Pegging-in client funds [3mamount[0m[2m=[0m100000
00:05:44 [2m2024-02-01T17:03:18.279351Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m100000 [3maddr[0m[2m=[0m"bcrt1qeklm5x3xtrfm4xeneysnp9vq3hlg0g8kfh3z7ts2nfmwktyycmjq9l3c4m"
00:05:44 [2m2024-02-01T17:03:18.307967Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m21
00:05:48 [2m2024-02-01T17:03:22.390042Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing client withdraw
00:05:52 [2m2024-02-01T17:03:26.387555Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:05:52 [2m2024-02-01T17:03:26.388949Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:05:52 [2m2024-02-01T17:03:26.389888Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:05:52 [2m2024-02-01T17:03:26.401054Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-cln and waiting for it to exit
00:05:52 [2m2024-02-01T17:03:26.410086Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:05:52 [2m2024-02-01T17:03:26.418963Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-1 and waiting for it to exit
00:05:52 [2m2024-02-01T17:03:26.429355Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-2 and waiting for it to exit
00:05:52 [2m2024-02-01T17:03:26.438851Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-3 and waiting for it to exit
00:05:52 [2m2024-02-01T17:03:26.449398Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:05:52 [2m2024-02-01T17:03:26.458019Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:05:52 [2m2024-02-01T17:03:26.458794Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: devimint_cli_test
Seq	Host	Starttime	JobRuntime	Send	Receive	Exitval	Signal	Command
1	:	1706806599.876	     0.023	0	63	0	0	always_success_test
2	:	1706806604.901	     5.025	0	0	0	0	backend_test_bitcoind
3	:	1706806609.926	     5.025	0	0	0	0	backend_test_electrs
4	:	1706806614.952	     5.026	0	0	0	0	backend_test_esplora
5	:	1706806619.978	     5.024	0	0	0	0	latency_test
7	:	1706806630.135	    49.058	0	4483	1	0	lightning_reconnect_test
8	:	1706806649.088	    35.371	0	4226	1	0	gateway_reboot_test
6	:	1706806625.002	   144.675	0	12713	0	0	reconnect_test
9	:	1706806654.313	   352.153	0	13691	0	0	devimint_cli_test
Compiling client binaries for version v0.2.1...
Using saved setting for 'extra-substituters = https://fedimint.cachix.org' from ~/.local/share/nix/trusted-settings.json.
Using saved setting for 'extra-trusted-public-keys = fedimint.cachix.org-1:FpJJjy1iPVlvyv4OMiN5y9+/arFLPcnZhZVVCHCDYTs=' from ~/.local/share/nix/trusted-settings.json.
Using saved setting for 'extra-substituters = https://fedimint.cachix.org' from ~/.local/share/nix/trusted-settings.json.
Using saved setting for 'extra-trusted-public-keys = fedimint.cachix.org-1:FpJJjy1iPVlvyv4OMiN5y9+/arFLPcnZhZVVCHCDYTs=' from ~/.local/share/nix/trusted-settings.json.
========== Starting backwards-compatibility run ===========
fed version: current
client version: v0.2.1
gateway version: current
Pre-building workspace...
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Finished dev [unoptimized + debuginfo] target(s) in 0.78s
Pre-building tests...
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Finished test [unoptimized + debuginfo] target(s) in 0.90s
## Starting all tests in parallel...
parallel: This job failed:
lightning_reconnect_test
parallel: Starting no more jobs. Waiting for 3 jobs to finish.
parallel: This job failed:
gateway_reboot_test
parallel: Starting no more jobs. Waiting for 2 jobs to finish.
Some tests failed. Full job log:
Search for '## FAILED' to find the end of the failing test
========== Finished backwards-compatibility run ===========
fed version: current
client version: v0.2.1
gateway version: current
## START: always_success_test
## COMPLETE: always_success_test
## START: gateway_reboot_test
00:00:00     Finished dev [unoptimized + debuginfo] target(s) in 0.36s
00:00:00 [2m2024-02-01T16:58:14.944471Z[0m [32m INFO[0m [2mdevimint::cli[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2069742"
00:00:00 [2m2024-02-01T16:58:14.948805Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:02 [2m2024-02-01T16:58:16.681245Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1qe9kczzpuvjxfnefxnprwmrsamqjptq63smzn97
00:00:03 [2m2024-02-01T16:58:17.600405Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1qe9kczzpuvjxfnefxnprwmrsamqjptq63smzn97
00:00:03 [2m2024-02-01T16:58:17.601084Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:03 [2m2024-02-01T16:58:17.603526Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:03 [2m2024-02-01T16:58:17.603556Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:03 [2m2024-02-01T16:58:17.610404Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:03 [2m2024-02-01T16:58:17.611148Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:00:03 [2m2024-02-01T16:58:17.613924Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:00:03 [2m2024-02-01T16:58:17.616107Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:00:04 [2m2024-02-01T16:58:18.620724Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:04 [2m2024-02-01T16:58:18.621648Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 1
00:00:04 [2m2024-02-01T16:58:18.622525Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 2
00:00:04 [2m2024-02-01T16:58:18.623371Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 3
00:00:04 [2m2024-02-01T16:58:18.628796Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 1 random-yOUVE1
00:00:04 [2m2024-02-01T16:58:18.634137Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 2 random-MLb2r2
00:00:04 [2m2024-02-01T16:58:18.639167Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 3 random-dY3eZ3
00:00:04 [2m2024-02-01T16:58:18.654559Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:08 [2m2024-02-01T16:58:22.802524Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m DKG successfully complete. Starting consensus...
00:00:08 [2m2024-02-01T16:58:22.808599Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:08 [2m2024-02-01T16:58:22.808886Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:08 
00:00:08 Caused by:
00:00:08     connection closed)))} }, trying to continue...
00:00:09 [2m2024-02-01T16:58:23.707480Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m lightning started
00:00:09 [2m2024-02-01T16:58:23.819081Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:10 [2m2024-02-01T16:58:24.719354Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m block sync done
00:00:10 [2m2024-02-01T16:58:24.726539Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m100000000 [3maddr[0m[2m=[0m"bcrt1qdjq4dkvrzu2vgelfd3p4kkgszsejglrnz3j9sn"
00:00:10 [2m2024-02-01T16:58:24.742366Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:10 [2m2024-02-01T16:58:24.879922Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:10 [2m2024-02-01T16:58:24.880172Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:10 
00:00:10 Caused by:
00:00:10     connection closed)))} }, trying to continue...
00:00:11 [2m2024-02-01T16:58:25.889169Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:11 [2m2024-02-01T16:58:25.889381Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:11 
00:00:11 Caused by:
00:00:11     connection closed)))} }, trying to continue...
00:00:12 [2m2024-02-01T16:58:26.317778Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:13 [2m2024-02-01T16:58:27.912909Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Consensus is running
00:00:13 [2m2024-02-01T16:58:27.916900Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m moved client configs
00:00:14 [2m2024-02-01T16:58:28.760355Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Empty chan info [3medge[0m[2m=[0mChannelEdge { channel_id: 123145302376449, chan_point: "746eb23ba3228ae129b1e7709975efcaa60bd13bd45c697e437671fcbe09ede3:1", last_update: 0, node1_pub: "02d0f5af224d03f0e039d85d52cf1fc3b245594873b53e35338dad2d6bb6130dd9", node2_pub: "0319896be40d170eb735a36872fdd26d49145cc58ad0311a26ed83375429e5de02", capacity: 10000000, node1_policy: None, node2_policy: None }
00:00:16 [2m2024-02-01T16:58:30.381821Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways started
00:00:16 [2m2024-02-01T16:58:30.381856Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m federation and gateways started
00:00:16 [2m2024-02-01T16:58:30.388796Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Joining federation with the main client
00:00:17 [2m2024-02-01T16:58:31.216144Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Generating first epoch
00:00:17 [2m2024-02-01T16:58:31.216181Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:18 [2m2024-02-01T16:58:32.287922Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m await gateways registered
00:00:18 [2m2024-02-01T16:58:32.763545Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways registered
00:00:18 [2m2024-02-01T16:58:32.763574Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m starting dev federation took 17.819024623s
00:00:18 [2m2024-02-01T16:58:32.782723Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mfedimint_cli_version[0m[2m=[0m"fedimint-cli 0.2.1"
00:00:18 [2m2024-02-01T16:58:32.810392Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mfedimint_cli_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:00:18 [2m2024-02-01T16:58:32.840134Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mgateway_cli_version[0m[2m=[0m"fedimint-gateway-cli 0.2.1"
00:00:18 [2m2024-02-01T16:58:32.872767Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mgateway_cli_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:00:18 [2m2024-02-01T16:58:32.911888Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mfedimintd_version_hash[0m[2m=[0m"58717cb4a08ec89d000000002e96d06a7b9a9d"
00:00:18 [2m2024-02-01T16:58:32.947813Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mgatewayd_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:00:19 [2m2024-02-01T16:58:33.961511Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Using cln gateway
00:00:19 [2m2024-02-01T16:58:33.961553Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Pegging-in client funds [3mamount[0m[2m=[0m10000
00:00:20 [2m2024-02-01T16:58:34.450956Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m10000 [3maddr[0m[2m=[0m"bcrt1q3a9nmxceukfg7dfgjk3ekpz3hmxaptr8x08s38h0z6kjyxzcdzpsadaewx"
00:00:20 [2m2024-02-01T16:58:34.538202Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m21
00:00:27 [2m2024-02-01T16:58:41.813034Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-cln and waiting for it to exit
00:00:27 [2m2024-02-01T16:58:41.841629Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:00:27 [2m2024-02-01T16:58:41.867645Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Making payment while gateway is down
00:00:30 [2m2024-02-01T16:58:44.064501Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Rebooting gateways...
00:00:32 [2m2024-02-01T16:58:46.274133Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m CLN Gateway restarted, with auto-rejoin to federation
00:00:32 [2m2024-02-01T16:58:46.294748Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m LND Gateway restarted, with auto-rejoin to federation
00:00:32 [2m2024-02-01T16:58:46.294829Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m gateway_reboot_test: success [3mLOG_DEVIMINT[0m[2m=[0m"devimint"
00:00:32 [2m2024-02-01T16:58:46.294858Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:00:32 [2m2024-02-01T16:58:46.326015Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-cln and waiting for it to exit
00:00:32 [2m2024-02-01T16:58:46.343810Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:00:32 [2m2024-02-01T16:58:46.349607Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:00:32 [2m2024-02-01T16:58:46.354285Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:00:32 [2m2024-02-01T16:58:46.379861Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-1 and waiting for it to exit
00:00:32 [2m2024-02-01T16:58:46.393579Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-2 and waiting for it to exit
00:00:32 [2m2024-02-01T16:58:46.412332Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-3 and waiting for it to exit
00:00:32 [2m2024-02-01T16:58:46.426612Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:00:32 [2m2024-02-01T16:58:46.456461Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:00:32 [2m2024-02-01T16:58:46.460845Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: gateway_reboot_test
## START: lightning_reconnect_test
00:00:00     Blocking waiting for file lock on package cache
00:00:00     Blocking waiting for file lock on package cache
00:00:00     Blocking waiting for file lock on package cache
00:00:01     Blocking waiting for file lock on package cache
00:00:01     Finished dev [unoptimized + debuginfo] target(s) in 1.10s
00:00:06 [2m2024-02-01T16:57:36.459716Z[0m [32m INFO[0m [2mdevimint::cli[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2049498"
00:00:06 [2m2024-02-01T16:57:36.524821Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:15 [2m2024-02-01T16:57:45.426615Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1qwthllvlt09pnj6yzhj34jkj92pa5546n0addp8
00:00:20 [2m2024-02-01T16:57:50.629827Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1qwthllvlt09pnj6yzhj34jkj92pa5546n0addp8
00:00:20 [2m2024-02-01T16:57:50.643791Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:20 [2m2024-02-01T16:57:50.947956Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:20 [2m2024-02-01T16:57:50.948035Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:00:21 [2m2024-02-01T16:57:51.367703Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:21 [2m2024-02-01T16:57:51.367781Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:21 [2m2024-02-01T16:57:51.564018Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:00:21 [2m2024-02-01T16:57:51.616022Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:00:22 [2m2024-02-01T16:57:52.680871Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:22 [2m2024-02-01T16:57:52.682669Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 1
00:00:23 [2m2024-02-01T16:57:53.693176Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 2
00:00:23 [2m2024-02-01T16:57:53.694766Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 3
00:00:23 [2m2024-02-01T16:57:53.714534Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 1 random-0cS4F1
00:00:23 [2m2024-02-01T16:57:53.732413Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 2 random-4qPd42
00:00:23 [2m2024-02-01T16:57:53.766558Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 3 random-q8eQf3
00:00:23 [2m2024-02-01T16:57:53.816942Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:40 [2m2024-02-01T16:58:10.253461Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m DKG successfully complete. Starting consensus...
00:00:40 [2m2024-02-01T16:58:10.269380Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:42 [2m2024-02-01T16:58:12.287667Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:43 [2m2024-02-01T16:58:13.300596Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:43 [2m2024-02-01T16:58:13.628483Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m lightning started
00:00:44 [2m2024-02-01T16:58:14.316043Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:44 [2m2024-02-01T16:58:14.316289Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:44 
00:00:44 Caused by:
00:00:44     connection closed)))} }, trying to continue...
00:00:44 [2m2024-02-01T16:58:14.659897Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m block sync done
00:00:44 [2m2024-02-01T16:58:14.681696Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m100000000 [3maddr[0m[2m=[0m"bcrt1qjw5lfhepcshv9uzcpypa58uxfzsl4d0gs9p6an"
00:00:44 [2m2024-02-01T16:58:14.728104Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:45 [2m2024-02-01T16:58:15.319825Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Consensus is running
00:00:45 [2m2024-02-01T16:58:15.320085Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m moved client configs
00:00:46 [2m2024-02-01T16:58:16.179055Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:47 [2m2024-02-01T16:58:17.362301Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Getting chan info failed [3me[0m[2m=[0mstatus: Unknown, message: "edge not found", details: [], metadata: MetadataMap { headers: {"content-type": "application/grpc"} }
00:00:48 [2m2024-02-01T16:58:18.364266Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Empty chan info [3medge[0m[2m=[0mChannelEdge { channel_id: 123145302376448, chan_point: "e0d1b3b037fa21a06ab3bfe08ed44b2ed2c96fc118a06cd92e9f01124b776a7a:0", last_update: 1706806697, node1_pub: "02f32d951d059298bb505ff7f333e83dc6717f1bbbad2057e2d68555545874b5d2", node2_pub: "0306dfc0795a3fb7c1c172ebbda7724e804c3c32e542f4eeb9de22c49f95677429", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1706806697 }) }
00:00:49 [2m2024-02-01T16:58:19.484200Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways started
00:00:49 [2m2024-02-01T16:58:19.484237Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m federation and gateways started
00:00:49 [2m2024-02-01T16:58:19.534907Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Joining federation with the main client
00:00:50 [2m2024-02-01T16:58:20.520013Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Generating first epoch
00:00:50 [2m2024-02-01T16:58:20.520050Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:51 [2m2024-02-01T16:58:21.530321Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m await gateways registered
00:00:51 [2m2024-02-01T16:58:21.888137Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways registered
00:00:51 [2m2024-02-01T16:58:21.888178Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m starting dev federation took 45.428340962s
00:00:51 [2m2024-02-01T16:58:21.906487Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mfedimint_cli_version[0m[2m=[0m"fedimint-cli 0.2.1"
00:00:51 [2m2024-02-01T16:58:21.931885Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mfedimint_cli_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:00:51 [2m2024-02-01T16:58:21.938429Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mgateway_cli_version[0m[2m=[0m"fedimint-gateway-cli 0.2.1"
00:00:51 [2m2024-02-01T16:58:21.950962Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mgateway_cli_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:00:51 [2m2024-02-01T16:58:21.965384Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mfedimintd_version_hash[0m[2m=[0m"58717cb4a08ec89d000000002e96d06a7b9a9d"
00:00:51 [2m2024-02-01T16:58:21.999759Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mgatewayd_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:00:52 [2m2024-02-01T16:58:22.747561Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Using cln gateway
00:00:52 [2m2024-02-01T16:58:22.747861Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Pegging-in both gateways
00:00:52 [2m2024-02-01T16:58:22.747880Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Pegging-in gateway funds [3mamount[0m[2m=[0m99999
00:00:52 [2m2024-02-01T16:58:22.794049Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m99999 [3maddr[0m[2m=[0m"bcrt1q0ljkygeecysqa089cjcvnqvlpackvuptldy4497csksap5tzghwqc9l0ea"
00:00:52 [2m2024-02-01T16:58:22.851891Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m21
00:01:03 [2m2024-02-01T16:58:33.199322Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Pegging-in gateway funds [3mamount[0m[2m=[0m99999
00:01:03 [2m2024-02-01T16:58:33.319765Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m99999 [3maddr[0m[2m=[0m"bcrt1qqf4hvtfjk6zelgvnnpefgpj7vsfmhfwh857xcuy5jjs08lw6ahvqkvmllg"
00:01:03 [2m2024-02-01T16:58:33.424811Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m21
00:01:12 [2m2024-02-01T16:58:42.051759Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Stopping all lightning nodes
00:01:12 [2m2024-02-01T16:58:42.116563Z[0m [32m INFO[0m [2mdevimint::gatewayd[0m[2m:[0m Stopping lightning node
00:01:12 [2m2024-02-01T16:58:42.147077Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:01:12 [2m2024-02-01T16:58:42.217431Z[0m [32m INFO[0m [2mdevimint::gatewayd[0m[2m:[0m Stopping lightning node
00:01:12 [2m2024-02-01T16:58:42.217478Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lnd and waiting for it to exit
00:01:12 [2m2024-02-01T16:58:42.283127Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Restarting both lightning nodes...
00:01:18 [2m2024-02-01T16:58:48.454880Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Retrying info...
00:01:18 [2m2024-02-01T16:58:48.641979Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Using cln gateway
00:01:18 [2m2024-02-01T16:58:48.642013Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Creating invoice....
00:01:21 [2m2024-02-01T16:58:51.389299Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Using cln gateway
00:01:21 [2m2024-02-01T16:58:51.389328Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Creating invoice....
00:01:25 [2m2024-02-01T16:58:55.896499Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-cln and waiting for it to exit
00:01:26 [2m2024-02-01T16:58:56.432206Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Using lnd gateway
00:01:26 [2m2024-02-01T16:58:56.432244Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Creating invoice....
00:01:30 [2m2024-02-01T16:59:00.968548Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:01:30 [2m2024-02-01T16:59:00.992810Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m lightning_reconnect_test: success
00:01:30 [2m2024-02-01T16:59:00.992872Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:01:31 [2m2024-02-01T16:59:01.005267Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:01:31 [2m2024-02-01T16:59:01.006233Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:01:31 [2m2024-02-01T16:59:01.008253Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:01:31 [2m2024-02-01T16:59:01.013162Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:01:31 [2m2024-02-01T16:59:01.027481Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-1 and waiting for it to exit
00:01:31 [2m2024-02-01T16:59:01.037670Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-2 and waiting for it to exit
00:01:31 [2m2024-02-01T16:59:01.049615Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-3 and waiting for it to exit
00:01:31 [2m2024-02-01T16:59:01.061771Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: lightning_reconnect_test
## START: reconnect_test
00:00:00     Blocking waiting for file lock on package cache
00:00:00     Blocking waiting for file lock on package cache
00:00:00     Blocking waiting for file lock on package cache
00:00:00     Blocking waiting for file lock on package cache
00:00:00     Finished dev [unoptimized + debuginfo] target(s) in 0.43s
00:00:00 [2m2024-02-01T16:57:05.884237Z[0m [32m INFO[0m [2mdevimint::cli[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2036529"
00:00:00 [2m2024-02-01T16:57:05.886100Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:02 [2m2024-02-01T16:57:07.855460Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1qskvklakltpcfl6aw9s07kzjxpgqta9aec2lld3
00:00:05 [2m2024-02-01T16:57:10.879922Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1qskvklakltpcfl6aw9s07kzjxpgqta9aec2lld3
00:00:05 [2m2024-02-01T16:57:10.881768Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:05 [2m2024-02-01T16:57:10.891724Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:05 [2m2024-02-01T16:57:10.891802Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:00:05 [2m2024-02-01T16:57:10.959715Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:05 [2m2024-02-01T16:57:10.986779Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:00:06 [2m2024-02-01T16:57:11.044351Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:00:06 [2m2024-02-01T16:57:11.095770Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:07 [2m2024-02-01T16:57:12.132964Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:07 [2m2024-02-01T16:57:12.134567Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 1
00:00:07 [2m2024-02-01T16:57:12.135989Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 2
00:00:08 [2m2024-02-01T16:57:13.145094Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 3
00:00:08 [2m2024-02-01T16:57:13.390897Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 1 random-nD8n81
00:00:08 [2m2024-02-01T16:57:13.416163Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 2 random-GE6tm2
00:00:08 [2m2024-02-01T16:57:13.502859Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 3 random-es8M93
00:00:08 [2m2024-02-01T16:57:13.690026Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:22 [2m2024-02-01T16:57:27.762785Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m DKG successfully complete. Starting consensus...
00:00:22 [2m2024-02-01T16:57:27.772060Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:22 [2m2024-02-01T16:57:27.772530Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:22 
00:00:22 Caused by:
00:00:22     connection closed)))} }, trying to continue...
00:00:24 [2m2024-02-01T16:57:29.817381Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:26 [2m2024-02-01T16:57:31.256841Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m lightning started
00:00:26 [2m2024-02-01T16:57:31.852787Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: i/o error: Connection reset by peer (os error 104)
00:00:27 [2m2024-02-01T16:57:32.289287Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m block sync done
00:00:27 [2m2024-02-01T16:57:32.323764Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m100000000 [3maddr[0m[2m=[0m"bcrt1qvdtl5pu988qsplmt3xw5nzvn0w76ug29zsrp9u"
00:00:27 [2m2024-02-01T16:57:32.484047Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:30 [2m2024-02-01T16:57:35.293858Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:33 [2m2024-02-01T16:57:38.676391Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Getting chan info failed [3me[0m[2m=[0mstatus: Unknown, message: "edge not found", details: [], metadata: MetadataMap { headers: {"content-type": "application/grpc"} }
00:00:34 [2m2024-02-01T16:57:39.780920Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways started
00:00:35 [2m2024-02-01T16:57:40.136176Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:35 [2m2024-02-01T16:57:40.136560Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:35 
00:00:35 Caused by:
00:00:35     connection closed)))} }, trying to continue...
00:00:45 [2m2024-02-01T16:57:50.182946Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Consensus is running
00:00:45 [2m2024-02-01T16:57:50.216264Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m moved client configs
00:00:45 [2m2024-02-01T16:57:50.216326Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m federation and gateways started
00:00:45 [2m2024-02-01T16:57:50.245897Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Joining federation with the main client
00:00:48 [2m2024-02-01T16:57:53.831803Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Generating first epoch
00:00:48 [2m2024-02-01T16:57:53.831837Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:54 [2m2024-02-01T16:57:59.760971Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m await gateways registered
00:00:58 [2m2024-02-01T16:58:03.508048Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways registered
00:00:58 [2m2024-02-01T16:58:03.508076Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m starting dev federation took 57.623772065s
00:00:58 [2m2024-02-01T16:58:03.572329Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mfedimint_cli_version[0m[2m=[0m"fedimint-cli 0.2.1"
00:00:58 [2m2024-02-01T16:58:03.683811Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mfedimint_cli_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:00:58 [2m2024-02-01T16:58:03.697404Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mgateway_cli_version[0m[2m=[0m"fedimint-gateway-cli 0.2.1"
00:00:58 [2m2024-02-01T16:58:03.752444Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mgateway_cli_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:00:58 [2m2024-02-01T16:58:03.883808Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mfedimintd_version_hash[0m[2m=[0m"58717cb4a08ec89d000000002e96d06a7b9a9d"
00:00:58 [2m2024-02-01T16:58:03.969433Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mgatewayd_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:00:58 [2m2024-02-01T16:58:03.969464Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m110
00:01:05 [2m2024-02-01T16:58:10.971966Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to fedimintd-0 and waiting for it to exit
00:01:20 [2m2024-02-01T16:58:25.452510Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m100
00:01:26 [2m2024-02-01T16:58:31.825499Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:01:26 [2m2024-02-01T16:58:31.846490Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m100
00:01:34 [2m2024-02-01T16:58:39.448025Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Server 0 successfully rejoined!
00:01:34 [2m2024-02-01T16:58:39.448062Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m100
00:01:41 [2m2024-02-01T16:58:46.111112Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to fedimintd-1 and waiting for it to exit
00:01:55 [2m2024-02-01T16:59:00.541681Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m100
00:02:00 [2m2024-02-01T16:59:05.023791Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to fedimintd-2 and waiting for it to exit
00:02:13 [2m2024-02-01T16:59:18.455047Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to fedimintd-3 and waiting for it to exit
00:02:27 [2m2024-02-01T16:59:32.292764Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:02:27 [2m2024-02-01T16:59:32.293276Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:02:27 [2m2024-02-01T16:59:32.293583Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:02:30 [2m2024-02-01T16:59:35.055168Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m fm success: reconnect-test
00:02:30 [2m2024-02-01T16:59:35.055209Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:02:30 [2m2024-02-01T16:59:35.061451Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:02:30 [2m2024-02-01T16:59:35.064761Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:02:30 [2m2024-02-01T16:59:35.086715Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-cln and waiting for it to exit
00:02:30 [2m2024-02-01T16:59:35.102365Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:02:30 [2m2024-02-01T16:59:35.115465Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-1 and waiting for it to exit
00:02:30 [2m2024-02-01T16:59:35.130581Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-2 and waiting for it to exit
00:02:30 [2m2024-02-01T16:59:35.141863Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-3 and waiting for it to exit
00:02:30 [2m2024-02-01T16:59:35.149901Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:02:30 [2m2024-02-01T16:59:35.161413Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:02:30 [2m2024-02-01T16:59:35.162507Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: reconnect_test
## START: load_test_tool_test
00:00:00     Finished dev [unoptimized + debuginfo] target(s) in 0.75s
00:00:02 [2m2024-02-01T16:58:32.355774Z[0m [32m INFO[0m [2mdevimint::cli[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2078134"
00:00:02 [2m2024-02-01T16:58:32.372193Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:06 [2m2024-02-01T16:58:36.061086Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1qkv44tts5zjztm55r7qxpr7huxt6srw5alna394
00:00:11 [2m2024-02-01T16:58:41.547926Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1qkv44tts5zjztm55r7qxpr7huxt6srw5alna394
00:00:11 [2m2024-02-01T16:58:41.551902Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:11 [2m2024-02-01T16:58:41.555530Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:11 [2m2024-02-01T16:58:41.555583Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:11 [2m2024-02-01T16:58:41.577061Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:11 [2m2024-02-01T16:58:41.577152Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:00:11 [2m2024-02-01T16:58:41.583958Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:00:11 [2m2024-02-01T16:58:41.599750Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:00:12 [2m2024-02-01T16:58:42.629170Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:12 [2m2024-02-01T16:58:42.636278Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 1
00:00:12 [2m2024-02-01T16:58:42.643874Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 2
00:00:12 [2m2024-02-01T16:58:42.646348Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 3
00:00:12 [2m2024-02-01T16:58:42.655785Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 1 random-STfdK1
00:00:12 [2m2024-02-01T16:58:42.666223Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 2 random-Ae7GJ2
00:00:12 [2m2024-02-01T16:58:42.674621Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 3 random-W2gqv3
00:00:12 [2m2024-02-01T16:58:42.707195Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:17 [2m2024-02-01T16:58:47.889448Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m DKG successfully complete. Starting consensus...
00:00:17 [2m2024-02-01T16:58:47.896040Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:17 [2m2024-02-01T16:58:47.896265Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:17 
00:00:17 Caused by:
00:00:17     connection closed)))} }, trying to continue...
00:00:18 [2m2024-02-01T16:58:48.655796Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m lightning started
00:00:18 [2m2024-02-01T16:58:48.904506Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:18 [2m2024-02-01T16:58:48.904685Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:18 
00:00:18 Caused by:
00:00:18     connection closed)))} }, trying to continue...
00:00:19 [2m2024-02-01T16:58:49.661733Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m block sync done
00:00:19 [2m2024-02-01T16:58:49.665103Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m100000000 [3maddr[0m[2m=[0m"bcrt1qyrjpc3de0mjvxx4h795qkcs9k38hu7pf2yv6n5"
00:00:19 [2m2024-02-01T16:58:49.681721Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:19 [2m2024-02-01T16:58:49.912245Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:19 [2m2024-02-01T16:58:49.912467Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:19 
00:00:19 Caused by:
00:00:19     connection closed)))} }, trying to continue...
00:00:20 [2m2024-02-01T16:58:50.883146Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:20 [2m2024-02-01T16:58:50.998379Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:20 [2m2024-02-01T16:58:50.999752Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:20 
00:00:20 Caused by:
00:00:20     connection closed)))} }, trying to continue...
00:00:21 [2m2024-02-01T16:58:51.995521Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Getting chan info failed [3me[0m[2m=[0mstatus: Unknown, message: "edge not found", details: [], metadata: MetadataMap { headers: {"content-type": "application/grpc"} }
00:00:21 [2m2024-02-01T16:58:52.002052Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Consensus is running
00:00:21 [2m2024-02-01T16:58:52.002328Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m moved client configs
00:00:23 [2m2024-02-01T16:58:53.059496Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Empty chan info [3medge[0m[2m=[0mChannelEdge { channel_id: 123145302376448, chan_point: "c16782663a9151e7f9f1d475097caef5f74dc020a3f036a4de6a28a5c55bb0a0:0", last_update: 1706806732, node1_pub: "0352a328201c3a550d3fc9f6bac5273daaffd95444c662f84edc30c786a4619822", node2_pub: "03b89015c33a2683894943c93b8e982edcb0e56116a3cf70fc3ec605ff36052d6c", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1706806732 }) }
00:00:24 [2m2024-02-01T16:58:54.188226Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways started
00:00:24 [2m2024-02-01T16:58:54.188262Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m federation and gateways started
00:00:24 [2m2024-02-01T16:58:54.200893Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Joining federation with the main client
00:00:24 [2m2024-02-01T16:58:54.936440Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Generating first epoch
00:00:24 [2m2024-02-01T16:58:54.936473Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:26 [2m2024-02-01T16:58:56.175757Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m await gateways registered
00:00:26 [2m2024-02-01T16:58:56.516415Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways registered
00:00:26 [2m2024-02-01T16:58:56.516447Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m starting dev federation took 24.160569923s
00:00:26 [2m2024-02-01T16:58:56.532151Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mfedimint_cli_version[0m[2m=[0m"fedimint-cli 0.2.1"
00:00:26 [2m2024-02-01T16:58:56.549828Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mfedimint_cli_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:00:26 [2m2024-02-01T16:58:56.572282Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mgateway_cli_version[0m[2m=[0m"fedimint-gateway-cli 0.2.1"
00:00:26 [2m2024-02-01T16:58:56.580376Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mgateway_cli_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:00:26 [2m2024-02-01T16:58:56.603153Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mfedimintd_version_hash[0m[2m=[0m"58717cb4a08ec89d000000002e96d06a7b9a9d"
00:00:26 [2m2024-02-01T16:58:56.629282Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mgatewayd_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:00:26 [2m2024-02-01T16:58:56.629323Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Pegging-in client funds [3mamount[0m[2m=[0m10000
00:00:26 [2m2024-02-01T16:58:56.893992Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m10000 [3maddr[0m[2m=[0m"bcrt1qtydha9ge69skvshxvt6xrhhsfxthgpa6tp08fqrlxkdwj275ltwsqnjd46"
00:00:26 [2m2024-02-01T16:58:56.934360Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m21
00:00:38 1 gateway_LND_pay_invoice_success: avg 2.707808836s, median 2.707808836s, max 2.707808836s, min 2.707808836s
00:00:38 1 gateway_pay_invoice_success: avg 2.707808836s, median 2.707808836s, max 2.707808836s, min 2.707808836s
00:00:38 2 reissue_notes: avg 1.46394429s, median 1.551963382s, max 1.551963382s, min 1.375925199s
00:00:46 1 gateway_CLN_pay_invoice_success: avg 2.987040211s, median 2.987040211s, max 2.987040211s, min 2.987040211s
00:00:46 1 gateway_pay_invoice_success: avg 2.987040211s, median 2.987040211s, max 2.987040211s, min 2.987040211s (compared to previous: avg: +10.34%, median: +10.34%, max: +10.34%, min: +10.34%)
00:00:46 2 reissue_notes: avg 1.494801597s, median 1.520721291s, max 1.520721291s, min 1.468881903s (compared to previous: avg: +2.12%, median: -2.00%, max: -2.00%, min: +6.76%)
00:00:46 [2m2024-02-01T16:59:16.429577Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing ln-circular-load-test with 'two-gateways' strategy
00:00:59 1 gateway_LND_pay_invoice_success: avg 2.845001862s, median 2.845001862s, max 2.845001862s, min 2.845001862s
00:00:59 1 gateway_LND_payment_received_started: avg 1.896102752s, median 1.896102752s, max 1.896102752s, min 1.896102752s
00:00:59 1 gateway_LND_payment_received_success: avg 3.672850324s, median 3.672850324s, max 3.672850324s, min 3.672850324s
00:00:59 2 gateway_create_invoice: avg 615.678242ms, median 1.223352914s, max 1.223352914s, min 8.003571ms
00:00:59 1 gateway_pay_invoice_success: avg 2.845001862s, median 2.845001862s, max 2.845001862s, min 2.845001862s (compared to previous: avg: -4.75%, median: -4.75%, max: -4.75%, min: -4.75%)
00:00:59 1 gateway_payment_received_success: avg 3.672850324s, median 3.672850324s, max 3.672850324s, min 3.672850324s
00:00:59 2 reissue_notes: avg 1.44394696s, median 1.548316489s, max 1.548316489s, min 1.339577432s (compared to previous: avg: -3.41%, median: +1.84%, max: +1.84%, min: -8.79%)
00:00:59 [2m2024-02-01T16:59:29.013974Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing ln-circular-load-test with 'partner-ping-pong' strategy
00:01:13 2 gateway_create_invoice: avg 1.202327824s, median 1.219697336s, max 1.219697336s, min 1.184958312s (compared to previous: avg: +95.45%, median: -0.33%, max: -0.33%, min: +14700.00%)
00:01:13 2 gateway_gateway_payment_received_started: avg 49.826708ms, median 66.055626ms, max 66.055626ms, min 33.59779ms
00:01:13 2 gateway_gateway_payment_received_success: avg 3.565523158s, median 3.724553183s, max 3.724553183s, min 3.406493134s
00:01:13 2 gateway_payment_received_success: avg 3.565523158s, median 3.724553183s, max 3.724553183s, min 3.406493134s
00:01:13 2 reissue_notes: avg 1.491978751s, median 1.647424191s, max 1.647424191s, min 1.336533312s (compared to previous: avg: +3.33%, median: +6.40%, max: +6.40%, min: -0.22%)
00:01:13 [2m2024-02-01T16:59:43.829846Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing ln-circular-load-test with 'self-payment' strategy
00:01:25 1 gateway_create_invoice: avg 1.224659102s, median 1.224659102s, max 1.224659102s, min 1.224659102s
00:01:25 1 gateway_gateway_payment_received_started: avg 23.085701ms, median 23.085701ms, max 23.085701ms, min 23.085701ms
00:01:25 1 gateway_gateway_payment_received_success: avg 3.428221358s, median 3.428221358s, max 3.428221358s, min 3.428221358s
00:01:25 1 gateway_payment_received_success: avg 3.428221358s, median 3.428221358s, max 3.428221358s, min 3.428221358s
00:01:25 2 reissue_notes: avg 1.257170699s, median 1.259917052s, max 1.259917052s, min 1.254424347s (compared to previous: avg: -15.69%, median: -23.56%, max: -23.56%, min: -6.14%)
00:01:25 [2m2024-02-01T16:59:55.969697Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:01:25 [2m2024-02-01T16:59:55.978796Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-1 and waiting for it to exit
00:01:25 [2m2024-02-01T16:59:55.987109Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-2 and waiting for it to exit
00:01:25 [2m2024-02-01T16:59:55.996596Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-3 and waiting for it to exit
00:01:25 [2m2024-02-01T16:59:56.003327Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-cln and waiting for it to exit
00:01:26 [2m2024-02-01T16:59:56.022102Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:01:26 [2m2024-02-01T16:59:56.022949Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:01:26 [2m2024-02-01T16:59:56.045149Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:01:26 [2m2024-02-01T16:59:56.050546Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:01:26 [2m2024-02-01T16:59:56.051604Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:01:26 [2m2024-02-01T16:59:56.053436Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: load_test_tool_test
## START: devimint_cli_test_single
00:00:01     Finished dev [unoptimized + debuginfo] target(s) in 0.32s
00:00:01 [2m2024-02-01T16:58:25.795669Z[0m [32m INFO[0m [2mdevimint::cli[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2075094"
00:00:01 [2m2024-02-01T16:58:25.798874Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:06 [2m2024-02-01T16:58:30.450446Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1qyl254cud7qtf80nac0uuzkauvxrwt2yf95sp2w
00:00:12 [2m2024-02-01T16:58:36.571131Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1qyl254cud7qtf80nac0uuzkauvxrwt2yf95sp2w
00:00:12 [2m2024-02-01T16:58:36.576024Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:12 [2m2024-02-01T16:58:36.592069Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:12 [2m2024-02-01T16:58:36.592158Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:12 [2m2024-02-01T16:58:36.619713Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:13 [2m2024-02-01T16:58:37.631647Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:13 [2m2024-02-01T16:58:37.641366Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:14 [2m2024-02-01T16:58:38.659458Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m DKG successfully complete. Starting consensus...
00:00:17 [2m2024-02-01T16:58:41.336141Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:17 [2m2024-02-01T16:58:41.339846Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:17 
00:00:17 Caused by:
00:00:17     connection closed)))} }, trying to continue...
00:00:18 [2m2024-02-01T16:58:42.348248Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Consensus is running
00:00:18 [2m2024-02-01T16:58:42.351266Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m moved client configs
00:00:18 [2m2024-02-01T16:58:42.708899Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m lightning started
00:00:19 [2m2024-02-01T16:58:43.736795Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m block sync done
00:00:19 [2m2024-02-01T16:58:43.805475Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m100000000 [3maddr[0m[2m=[0m"bcrt1qgktega9s3z99angu9mfrz0ycry96ce078w5pcj"
00:00:19 [2m2024-02-01T16:58:43.918158Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:22 [2m2024-02-01T16:58:46.044944Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:24 [2m2024-02-01T16:58:48.324116Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Getting chan info failed [3me[0m[2m=[0mstatus: Unknown, message: "edge not found", details: [], metadata: MetadataMap { headers: {"content-type": "application/grpc"} }
00:00:25 [2m2024-02-01T16:58:49.330077Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways started
00:00:25 [2m2024-02-01T16:58:49.330103Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m federation and gateways started
00:00:25 [2m2024-02-01T16:58:49.330672Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Joining federation with the main client
00:00:25 [2m2024-02-01T16:58:49.477984Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Generating first epoch
00:00:25 [2m2024-02-01T16:58:49.478017Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:25 [2m2024-02-01T16:58:49.901711Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m await gateways registered
00:00:26 [2m2024-02-01T16:58:50.014300Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways registered
00:00:26 [2m2024-02-01T16:58:50.014325Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m starting dev federation took 24.21857501s
00:00:26 [2m2024-02-01T16:58:50.019831Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mfedimint_cli_version[0m[2m=[0m"fedimint-cli 0.2.1"
00:00:26 [2m2024-02-01T16:58:50.023544Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mfedimint_cli_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:00:26 [2m2024-02-01T16:58:50.026917Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mgateway_cli_version[0m[2m=[0m"fedimint-gateway-cli 0.2.1"
00:00:26 [2m2024-02-01T16:58:50.032105Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mgateway_cli_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:00:26 [2m2024-02-01T16:58:50.039125Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mfedimintd_version_hash[0m[2m=[0m"58717cb4a08ec89d000000002e96d06a7b9a9d"
00:00:26 [2m2024-02-01T16:58:50.046963Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mgatewayd_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:00:26 [2m2024-02-01T16:58:50.314444Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Using cln gateway
00:00:26 [2m2024-02-01T16:58:50.331458Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Pegging-in gateway funds [3mamount[0m[2m=[0m10000000
00:00:26 [2m2024-02-01T16:58:50.348028Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m10000000 [3maddr[0m[2m=[0m"bcrt1qcw6g3eugetaelyp9t757q6r5683k8un59y3acj"
00:00:26 [2m2024-02-01T16:58:50.362490Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m21
00:00:32 [2m2024-02-01T16:58:56.885332Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing LND can pay CLN directly
00:00:33 [2m2024-02-01T16:58:57.362823Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing CLN can pay LND directly
00:00:34 [2m2024-02-01T16:58:58.325211Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing generated descriptor for 1 guardian federation
00:00:34 [2m2024-02-01T16:58:58.325279Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing Client
00:00:34 [2m2024-02-01T16:58:58.325288Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing reissuing e-cash
00:00:34 [2m2024-02-01T16:58:58.484614Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Pegging-in client funds [3mamount[0m[2m=[0m5000000
00:00:34 [2m2024-02-01T16:58:58.699559Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m5000000 [3maddr[0m[2m=[0m"bcrt1q6dncvln2n0ujmcc73zyaczy6hmqm67yduxhqkm"
00:00:34 [2m2024-02-01T16:58:58.747068Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m21
00:00:40 [2m2024-02-01T16:59:04.633208Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing backup&restore
00:02:18 [2m2024-02-01T17:00:42.428173Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing spending from client
00:02:20 [2m2024-02-01T17:00:44.067957Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing reissuing e-cash after spending
00:02:21 [2m2024-02-01T17:00:45.633063Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing reissuing e-cash via module commands
00:02:22 [2m2024-02-01T17:00:46.927521Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing fedimint-cli pays LND HOLD invoice via CLN gateway
00:02:23 [2m2024-02-01T17:00:47.085234Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Using cln gateway
00:02:24 [2m2024-02-01T17:00:48.287728Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing fedimint-cli pays LND via CLN gateway
00:02:24 [2m2024-02-01T17:00:48.400821Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Using cln gateway
00:02:31 [2m2024-02-01T17:00:55.255859Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing receiving e-cash notes
00:02:32 [2m2024-02-01T17:00:56.795249Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing LND gateway
00:02:32 [2m2024-02-01T17:00:56.918747Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Using lnd gateway
00:02:32 [2m2024-02-01T17:00:56.918779Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing outgoing payment from client to CLN via LND gateway
00:02:35 [2m2024-02-01T17:00:59.985880Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing incoming payment from CLN to client via LND gateway
00:02:39 [2m2024-02-01T17:01:03.290155Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing receiving ecash notes
00:02:40 [2m2024-02-01T17:01:04.701424Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Will finish the payment of the LND HOLD invoice via CLN gateway
00:02:40 [2m2024-02-01T17:01:04.830642Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing client deposit
00:02:40 [2m2024-02-01T17:01:04.947412Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Pegging-in client funds [3mamount[0m[2m=[0m100000
00:02:41 [2m2024-02-01T17:01:05.053673Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m100000 [3maddr[0m[2m=[0m"bcrt1q4fruhm4hsnlvqs4f0prcwzftu8znu7ggl5taw8"
00:02:41 [2m2024-02-01T17:01:05.068129Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m21
00:02:45 [2m2024-02-01T17:01:09.721692Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing client withdraw
00:02:48 [2m2024-02-01T17:01:12.315259Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:02:48 [2m2024-02-01T17:01:12.316737Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:02:48 [2m2024-02-01T17:01:12.317843Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:02:48 [2m2024-02-01T17:01:12.334284Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-cln and waiting for it to exit
00:02:48 [2m2024-02-01T17:01:12.346415Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:02:48 [2m2024-02-01T17:01:12.404527Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:02:48 [2m2024-02-01T17:01:12.414447Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:02:48 [2m2024-02-01T17:01:12.415449Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: devimint_cli_test_single
## START: recoverytool_tests
00:00:00     Finished dev [unoptimized + debuginfo] target(s) in 0.28s
00:00:00 [2m2024-02-01T16:58:48.921749Z[0m [32m INFO[0m [2mdevimint::cli[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2089139"
00:00:00 [2m2024-02-01T16:58:48.923787Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:02 [2m2024-02-01T16:58:50.653405Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1qqeuksg95dj7cap3dlk2cagt6ecdg47rm2c8vgv
00:00:03 [2m2024-02-01T16:58:51.736386Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1qqeuksg95dj7cap3dlk2cagt6ecdg47rm2c8vgv
00:00:03 [2m2024-02-01T16:58:51.737124Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:03 [2m2024-02-01T16:58:51.739981Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:03 [2m2024-02-01T16:58:51.740028Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:03 [2m2024-02-01T16:58:51.746745Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:03 [2m2024-02-01T16:58:51.746823Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:00:03 [2m2024-02-01T16:58:51.756017Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:00:03 [2m2024-02-01T16:58:51.756762Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:00:04 [2m2024-02-01T16:58:52.764914Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:04 [2m2024-02-01T16:58:52.768740Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 1
00:00:04 [2m2024-02-01T16:58:52.776768Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 2
00:00:04 [2m2024-02-01T16:58:52.781065Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 3
00:00:04 [2m2024-02-01T16:58:52.798979Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 1 random-wlwqb1
00:00:04 [2m2024-02-01T16:58:52.807186Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 2 random-sL1Zo2
00:00:04 [2m2024-02-01T16:58:52.814597Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 3 random-pWeZX3
00:00:04 [2m2024-02-01T16:58:52.834394Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:09 [2m2024-02-01T16:58:57.176416Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m DKG successfully complete. Starting consensus...
00:00:09 [2m2024-02-01T16:58:57.182831Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:09 [2m2024-02-01T16:58:57.183151Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:09 
00:00:09 Caused by:
00:00:09     connection closed)))} }, trying to continue...
00:00:09 [2m2024-02-01T16:58:57.834240Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m lightning started
00:00:10 [2m2024-02-01T16:58:58.847950Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m block sync done
00:00:10 [2m2024-02-01T16:58:58.869504Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m100000000 [3maddr[0m[2m=[0m"bcrt1qslc99g5drur93hjsrktp6zqauxjvk8zskxlcdt"
00:00:10 [2m2024-02-01T16:58:58.924477Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:11 [2m2024-02-01T16:58:59.369988Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: i/o error: Transport endpoint is not connected (os error 107)
00:00:11 [2m2024-02-01T16:58:59.370332Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: i/o error: Transport endpoint is not connected (os error 107); restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: i/o error: Transport endpoint is not connected (os error 107)
00:00:11 
00:00:11 Caused by:
00:00:11     0: i/o error: Transport endpoint is not connected (os error 107)
00:00:11     1: Transport endpoint is not connected (os error 107))))} }, trying to continue...
00:00:12 [2m2024-02-01T16:59:00.384586Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:12 [2m2024-02-01T16:59:00.384899Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:12 
00:00:12 Caused by:
00:00:12     connection closed)))} }, trying to continue...
00:00:12 [2m2024-02-01T16:59:00.595470Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:13 [2m2024-02-01T16:59:01.393949Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:13 [2m2024-02-01T16:59:01.394194Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Error calling start_consensus: FederationError { general: Some(Received errors from 1 peers: peer-0: Rpc error: The background task been terminated because: Networking or low-level protocol error: WebSocket connection error: connection closed; restart required), peers: {PeerId(0): Rpc(RestartNeeded(Transport(WebSocket connection error: connection closed
00:00:13 
00:00:13 Caused by:
00:00:13     connection closed)))} }, trying to continue...
00:00:13 [2m2024-02-01T16:59:01.937491Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Getting chan info failed [3me[0m[2m=[0mstatus: Unknown, message: "edge not found", details: [], metadata: MetadataMap { headers: {"content-type": "application/grpc"} }
00:00:14 [2m2024-02-01T16:59:02.397458Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Consensus is running
00:00:14 [2m2024-02-01T16:59:02.397759Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m moved client configs
00:00:14 [2m2024-02-01T16:59:02.943617Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways started
00:00:14 [2m2024-02-01T16:59:02.943645Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m federation and gateways started
00:00:14 [2m2024-02-01T16:59:02.944381Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Joining federation with the main client
00:00:15 [2m2024-02-01T16:59:03.243197Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Generating first epoch
00:00:15 [2m2024-02-01T16:59:03.243223Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:16 [2m2024-02-01T16:59:04.545869Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m await gateways registered
00:00:16 [2m2024-02-01T16:59:04.701932Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways registered
00:00:16 [2m2024-02-01T16:59:04.701954Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m starting dev federation took 15.780126769s
00:00:16 [2m2024-02-01T16:59:04.707122Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mfedimint_cli_version[0m[2m=[0m"fedimint-cli 0.2.1"
00:00:16 [2m2024-02-01T16:59:04.710313Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mfedimint_cli_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:00:16 [2m2024-02-01T16:59:04.713166Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mgateway_cli_version[0m[2m=[0m"fedimint-gateway-cli 0.2.1"
00:00:16 [2m2024-02-01T16:59:04.715782Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mgateway_cli_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:00:16 [2m2024-02-01T16:59:04.720532Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mfedimintd_version_hash[0m[2m=[0m"58717cb4a08ec89d000000002e96d06a7b9a9d"
00:00:16 [2m2024-02-01T16:59:04.725566Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mgatewayd_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:00:16 [2m2024-02-01T16:59:04.901272Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Pegging-in client funds [3mamount[0m[2m=[0m12345000
00:00:17 [2m2024-02-01T16:59:05.069521Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m12345000 [3maddr[0m[2m=[0m"bcrt1qhpl0rcjrvhu6l89ls99gn2xmvlh8l80cdcn7eqwwsak0hwsnt09sc0f6kg"
00:00:17 [2m2024-02-01T16:59:05.085627Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m21
00:00:21 [2m2024-02-01T16:59:09.713905Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Pegging-in client funds [3mamount[0m[2m=[0m34567000
00:00:21 [2m2024-02-01T16:59:09.869165Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m34567000 [3maddr[0m[2m=[0m"bcrt1q264yh8p4fkp0ewxwy6mc7fukz8pz8hcn6sef8m3ljtx96cymzkys7cjq8s"
00:00:21 [2m2024-02-01T16:59:09.888376Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m21
00:00:24 [2m2024-02-01T16:59:12.781921Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Pegging-in client funds [3mamount[0m[2m=[0m23456000
00:00:24 [2m2024-02-01T16:59:12.939219Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m23456000 [3maddr[0m[2m=[0m"bcrt1qemz6uyykf5kfh77h9ehtd5dw98x6eavuneprcac39nh7hm79hflqz6eu5m"
00:00:24 [2m2024-02-01T16:59:12.953964Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m21
00:00:33 [2m2024-02-01T16:59:21.390981Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m11
00:00:34 [2m2024-02-01T16:59:22.589843Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Recovering using utxos method
00:00:34 [2m2024-02-01T16:59:22.604384Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Getting wallet balances before import
00:00:34 [2m2024-02-01T16:59:22.605234Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Importing descriptors into bitcoin wallet
00:00:35 [2m2024-02-01T16:59:23.270696Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Getting wallet balances after import
00:00:35 [2m2024-02-01T16:59:23.271756Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Recovering using epochs method
00:02:30 [2m2024-02-01T17:01:18.688480Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:02:30 [2m2024-02-01T17:01:18.689860Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:02:30 [2m2024-02-01T17:01:18.690917Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:02:30 [2m2024-02-01T17:01:18.702969Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-cln and waiting for it to exit
00:02:30 [2m2024-02-01T17:01:18.713746Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:02:30 [2m2024-02-01T17:01:18.723238Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-1 and waiting for it to exit
00:02:30 [2m2024-02-01T17:01:18.731554Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-2 and waiting for it to exit
00:02:30 [2m2024-02-01T17:01:18.740648Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-3 and waiting for it to exit
00:02:30 [2m2024-02-01T17:01:18.746714Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:02:30 [2m2024-02-01T17:01:18.754815Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:02:30 [2m2024-02-01T17:01:18.755506Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: recoverytool_tests
## START: devimint_cli_test
00:00:01     Finished dev [unoptimized + debuginfo] target(s) in 1.45s
00:00:02 [2m2024-02-01T16:58:21.775078Z[0m [32m INFO[0m [2mdevimint::cli[0m[2m:[0m Test setup in "/tmp/nix-shell.iJmCSc/devimint-2072525"
00:00:02 [2m2024-02-01T16:58:21.778706Z[0m [33m WARN[0m [2mdevimint[0m[2m:[0m Failed to create wallet ... retrying JSON-RPC error: transport error: Couldn't connect to host: Connection refused (os error 111)
00:00:05 [2m2024-02-01T16:58:24.302243Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Beginning to mine 101 blocks to address bcrt1qzr5zsnat67getz640yjpxclusj38t3wm2put4a
00:00:06 [2m2024-02-01T16:58:25.966937Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m Mined 101 blocks to address bcrt1qzr5zsnat67getz640yjpxclusj38t3wm2put4a
00:00:06 [2m2024-02-01T16:58:25.968753Z[0m [32m INFO[0m [2mdevimint::external[0m[2m:[0m block count: 101
00:00:06 [2m2024-02-01T16:58:25.977636Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m esplora started
00:00:06 [2m2024-02-01T16:58:25.977698Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-3 started
00:00:06 [2m2024-02-01T16:58:25.988475Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m electrs started
00:00:06 [2m2024-02-01T16:58:25.988561Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-1 started
00:00:06 [2m2024-02-01T16:58:25.989220Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-0 started
00:00:06 [2m2024-02-01T16:58:25.989784Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m fedimintd-2 started
00:00:07 [2m2024-02-01T16:58:26.999050Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 0
00:00:08 [2m2024-02-01T16:58:27.003862Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 1
00:00:08 [2m2024-02-01T16:58:27.005043Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 2
00:00:08 [2m2024-02-01T16:58:27.005990Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Connected to 3
00:00:08 [2m2024-02-01T16:58:27.015711Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 1 random-f8fAd1
00:00:08 [2m2024-02-01T16:58:27.021088Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 2 random-JD6hE2
00:00:08 [2m2024-02-01T16:58:27.026215Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m calling set_config_gen_connections for 3 random-6EhgW3
00:00:08 [2m2024-02-01T16:58:27.059021Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Running DKG...
00:00:13 [2m2024-02-01T16:58:32.345891Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m DKG successfully complete. Starting consensus...
00:00:13 [2m2024-02-01T16:58:32.354943Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:15 [2m2024-02-01T16:58:34.401855Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:16 [2m2024-02-01T16:58:35.066094Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m lightning started
00:00:18 [2m2024-02-01T16:58:37.093605Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m block sync done
00:00:18 [2m2024-02-01T16:58:37.132736Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m100000000 [3maddr[0m[2m=[0m"bcrt1qmy9740433qu8kar5uwycv7jzfjufwu0km4n6h0"
00:00:18 [2m2024-02-01T16:58:37.233524Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:19 [2m2024-02-01T16:58:38.866036Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: i/o error: Transport endpoint is not connected (os error 107)
00:00:20 [2m2024-02-01T16:58:39.135490Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:21 [2m2024-02-01T16:58:40.680433Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Getting chan info failed [3me[0m[2m=[0mstatus: Unknown, message: "edge not found", details: [], metadata: MetadataMap { headers: {"content-type": "application/grpc"} }
00:00:21 [2m2024-02-01T16:58:40.900339Z[0m [31mERROR[0m [2mjsonrpsee-client[0m[2m:[0m Failed to read message: Networking or low-level protocol error: WebSocket connection error: connection closed
00:00:22 [2m2024-02-01T16:58:41.733039Z[0m [33m WARN[0m [2mdevimint::external[0m[2m:[0m Empty chan info [3medge[0m[2m=[0mChannelEdge { channel_id: 123145302376449, chan_point: "242bbb7d33bce38b9037e7391cb31080396d30abf0e0dbd21e2ac392882ccd76:1", last_update: 1706806720, node1_pub: "0394995cfa99379e07214379edd04df108c38a1650ad468b4e2061a4cd1723efb2", node2_pub: "039c41f0b89140d97a1c7538fa2d7c81b152b2bdfc7bd50a93abc95736c8649c6e", capacity: 10000000, node1_policy: None, node2_policy: Some(RoutingPolicy { time_lock_delta: 80, min_htlc: 1000, fee_base_msat: 1000, fee_rate_milli_msat: 1, disabled: false, max_htlc_msat: 10000000000, last_update: 1706806720 }) }
00:00:23 [2m2024-02-01T16:58:42.844983Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways started
00:00:23 [2m2024-02-01T16:58:42.907438Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Consensus is running
00:00:23 [2m2024-02-01T16:58:42.908689Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m moved client configs
00:00:23 [2m2024-02-01T16:58:42.908737Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m federation and gateways started
00:00:23 [2m2024-02-01T16:58:42.913249Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Joining federation with the main client
00:00:24 [2m2024-02-01T16:58:43.866545Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Generating first epoch
00:00:24 [2m2024-02-01T16:58:43.866575Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m10
00:00:26 [2m2024-02-01T16:58:45.571531Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m await gateways registered
00:00:27 [2m2024-02-01T16:58:46.138847Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m gateways registered
00:00:27 [2m2024-02-01T16:58:46.138876Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m starting dev federation took 24.36309213s
00:00:27 [2m2024-02-01T16:58:46.160995Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mfedimint_cli_version[0m[2m=[0m"fedimint-cli 0.2.1"
00:00:27 [2m2024-02-01T16:58:46.172504Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mfedimint_cli_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:00:27 [2m2024-02-01T16:58:46.188608Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mgateway_cli_version[0m[2m=[0m"fedimint-gateway-cli 0.2.1"
00:00:27 [2m2024-02-01T16:58:46.206054Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mgateway_cli_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:00:27 [2m2024-02-01T16:58:46.219716Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mfedimintd_version_hash[0m[2m=[0m"58717cb4a08ec89d000000002e96d06a7b9a9d"
00:00:27 [2m2024-02-01T16:58:46.236969Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m [3mgatewayd_version_hash[0m[2m=[0m"a8422b84102ab5fc768307215d5b20d807143f27"
00:00:28 [2m2024-02-01T16:58:47.027527Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Using cln gateway
00:00:28 [2m2024-02-01T16:58:47.103933Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Pegging-in gateway funds [3mamount[0m[2m=[0m10000000
00:00:28 [2m2024-02-01T16:58:47.184922Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m10000000 [3maddr[0m[2m=[0m"bcrt1q6y55tgpe7gwhefwxy580h7uzhd4ce0e007u5v23dlrc7plgf55sqg7ntvm"
00:00:28 [2m2024-02-01T16:58:47.214855Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m21
00:00:37 [2m2024-02-01T16:58:56.904270Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing LND can pay CLN directly
00:00:38 [2m2024-02-01T16:58:57.431531Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing CLN can pay LND directly
00:00:39 [2m2024-02-01T16:58:58.395781Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing generated descriptor for 4 guardian federation
00:00:39 [2m2024-02-01T16:58:58.395867Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing Client
00:00:39 [2m2024-02-01T16:58:58.395878Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing reissuing e-cash
00:00:39 [2m2024-02-01T16:58:58.642498Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Pegging-in client funds [3mamount[0m[2m=[0m5000000
00:00:39 [2m2024-02-01T16:58:58.887651Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m5000000 [3maddr[0m[2m=[0m"bcrt1q0ac2zk4tzw7pp83hh7h9cwzcl9083kzpv3jqxpu60cwpvdqqm4dsslesac"
00:00:39 [2m2024-02-01T16:58:58.946848Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m21
00:00:45 [2m2024-02-01T16:59:04.800812Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing backup&restore
00:04:54 [2m2024-02-01T17:03:13.752096Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing spending from client
00:04:56 [2m2024-02-01T17:03:15.933582Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing reissuing e-cash after spending
00:04:58 [2m2024-02-01T17:03:17.927155Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing reissuing e-cash via module commands
00:05:00 [2m2024-02-01T17:03:19.578173Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing fedimint-cli pays LND HOLD invoice via CLN gateway
00:05:00 [2m2024-02-01T17:03:19.747306Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Using cln gateway
00:05:02 [2m2024-02-01T17:03:21.302758Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing fedimint-cli pays LND via CLN gateway
00:05:02 [2m2024-02-01T17:03:21.470979Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Using cln gateway
00:05:11 [2m2024-02-01T17:03:30.033412Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing receiving e-cash notes
00:05:13 [2m2024-02-01T17:03:32.087718Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing LND gateway
00:05:13 [2m2024-02-01T17:03:32.252089Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Using lnd gateway
00:05:13 [2m2024-02-01T17:03:32.252127Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing outgoing payment from client to CLN via LND gateway
00:05:17 [2m2024-02-01T17:03:36.173218Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing incoming payment from CLN to client via LND gateway
00:05:21 [2m2024-02-01T17:03:40.049206Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing receiving ecash notes
00:05:23 [2m2024-02-01T17:03:42.005674Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Will finish the payment of the LND HOLD invoice via CLN gateway
00:05:23 [2m2024-02-01T17:03:42.452067Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing client deposit
00:05:23 [2m2024-02-01T17:03:42.614004Z[0m [32m INFO[0m [2mdevimint::federation[0m[2m:[0m Pegging-in client funds [3mamount[0m[2m=[0m100000
00:05:23 [2m2024-02-01T17:03:42.789221Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Sending funds from bitcoind [3mamount[0m[2m=[0m100000 [3maddr[0m[2m=[0m"bcrt1qk9mw4kxjvcyvem92wkjzvl7k53ywcxll90c4uj0r536lact5zhyshelvew"
00:05:23 [2m2024-02-01T17:03:42.814680Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m Mining bitcoin blocks [3mblock_num[0m[2m=[0m21
00:05:30 [2m2024-02-01T17:03:49.060982Z[0m [32m INFO[0m [2mdevimint::tests[0m[2m:[0m Testing client withdraw
00:05:34 [2m2024-02-01T17:03:53.080953Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to esplora and waiting for it to exit
00:05:34 [2m2024-02-01T17:03:53.082392Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to electrs and waiting for it to exit
00:05:34 [2m2024-02-01T17:03:53.083510Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-lnd and waiting for it to exit
00:05:34 [2m2024-02-01T17:03:53.096926Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to gatewayd-cln and waiting for it to exit
00:05:34 [2m2024-02-01T17:03:53.108036Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-0 and waiting for it to exit
00:05:34 [2m2024-02-01T17:03:53.118043Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-1 and waiting for it to exit
00:05:34 [2m2024-02-01T17:03:53.188524Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-2 and waiting for it to exit
00:05:34 [2m2024-02-01T17:03:53.200348Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to fedimintd-3 and waiting for it to exit
00:05:34 [2m2024-02-01T17:03:53.208196Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to lnd and waiting for it to exit
00:05:34 [2m2024-02-01T17:03:53.218556Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGTERM to lightningd and waiting for it to exit
00:05:34 [2m2024-02-01T17:03:53.219551Z[0m [32m INFO[0m [2mdevimint[0m[2m:[0m sending SIGKILL to bitcoind and waiting for it to exit
## COMPLETE: devimint_cli_test
Compiling client binaries for version v0.2.1...
Using saved setting for 'extra-substituters = https://fedimint.cachix.org' from ~/.local/share/nix/trusted-settings.json.
Using saved setting for 'extra-trusted-public-keys = fedimint.cachix.org-1:FpJJjy1iPVlvyv4OMiN5y9+/arFLPcnZhZVVCHCDYTs=' from ~/.local/share/nix/trusted-settings.json.
Using saved setting for 'extra-substituters = https://fedimint.cachix.org' from ~/.local/share/nix/trusted-settings.json.
Using saved setting for 'extra-trusted-public-keys = fedimint.cachix.org-1:FpJJjy1iPVlvyv4OMiN5y9+/arFLPcnZhZVVCHCDYTs=' from ~/.local/share/nix/trusted-settings.json.
Compiling gateway binaries for version v0.2.1...
Using saved setting for 'extra-substituters = https://fedimint.cachix.org' from ~/.local/share/nix/trusted-settings.json.
Using saved setting for 'extra-trusted-public-keys = fedimint.cachix.org-1:FpJJjy1iPVlvyv4OMiN5y9+/arFLPcnZhZVVCHCDYTs=' from ~/.local/share/nix/trusted-settings.json.
========== Starting backwards-compatibility run ===========
fed version: current
client version: v0.2.1
gateway version: v0.2.1
Pre-building workspace...
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Finished dev [unoptimized + debuginfo] target(s) in 1.12s
Pre-building tests...
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Blocking waiting for file lock on package cache
    Finished test [unoptimized + debuginfo] target(s) in 0.55s
## Starting all tests in parallel...
All tests successful
========== Finished backwards-compatibility run ===========
fed version: current
client version: v0.2.1
gateway version: v0.2.1
Elapsed time: 437.360213145 seconds
Backwards-compatibility tests summary:
fed_version  client_version  gateway_version  exit_code
v0.2.1       current         v0.2.1           1
v0.2.1       current         current          1
v0.2.1       v0.2.1          current          1
current      current         v0.2.1           1
current      v0.2.1          current          1
current      v0.2.1          v0.2.1           0
